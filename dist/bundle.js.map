{"version":3,"sources":["webpack:///webpack/bootstrap ab1650cbd97648d23251","webpack:///external \"PIXI\"","webpack:///./src/singleton.ts","webpack:///./src/button.ts","webpack:///./src/popup.ts","webpack:///./src/theSea.ts","webpack:///./src/gameobject.ts","webpack:///./node_modules/victor/index.js","webpack:///./src/economyitem.ts","webpack:///./src/economyicon.ts","webpack:///./src/compassrose.ts","webpack:///./src/popmsgbox.ts","webpack:///./src/ship.ts","webpack:///../../filters/ascii/lib/filter-ascii.es.js","webpack:///../../filters/advanced-bloom/lib/filter-advanced-bloom.es.js","webpack:///../../filters/bloom/lib/filter-bloom.es.js","webpack:///../../filters/bulge-pinch/lib/filter-bulge-pinch.es.js","webpack:///../../filters/color-replace/lib/filter-color-replace.es.js","webpack:///../../filters/convolution/lib/filter-convolution.es.js","webpack:///../../filters/cross-hatch/lib/filter-cross-hatch.es.js","webpack:///../../filters/dot/lib/filter-dot.es.js","webpack:///../../filters/drop-shadow/lib/filter-drop-shadow.es.js","webpack:///../../filters/emboss/lib/filter-emboss.es.js","webpack:///../../filters/glow/lib/filter-glow.es.js","webpack:///../../filters/godray/lib/filter-godray.es.js","webpack:///../../filters/outline/lib/filter-outline.es.js","webpack:///../../filters/multi-color-replace/lib/filter-multi-color-replace.es.js","webpack:///../../filters/pixelate/lib/filter-pixelate.es.js","webpack:///../../filters/rgb-split/lib/filter-rgb-split.es.js","webpack:///../../filters/shockwave/lib/filter-shockwave.es.js","webpack:///../../filters/simple-lightmap/lib/filter-simple-lightmap.es.js","webpack:///../../filters/tilt-shift/lib/filter-tilt-shift.es.js","webpack:///../../filters/twist/lib/filter-twist.es.js","webpack:///../../filters/zoom-blur/lib/filter-zoom-blur.es.js","webpack:///./src/cannonball.ts","webpack:///./src/healthbar.ts","webpack:///./src/index.ts","webpack:///./src/island.ts","webpack:///./src/player.ts","webpack:///./src/fxmanager.ts","webpack:///./src/mainhud.ts","webpack:///./src/sailtrim.ts","webpack:///./src/watch.ts","webpack:///./src/shipwidget.ts","webpack:///./src/popshipdetail.ts","webpack:///./src/poptowninterface.ts","webpack:///./src/popprovisioner.ts","webpack:///./src/popprizeagent.ts","webpack:///./src/popcoinstore.ts","webpack:///./src/storecard.ts","webpack:///./src/popwarehouse.ts","webpack:///./src/popmarket.ts","webpack:///./src/marketitem.ts","webpack:///./src/popupmanager.ts"],"names":["vertex","fragment","vertex$1","fragment$1"],"mappings":"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CA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA,6BAA6B,kBAAkB;AAC/C,6BAA6B,kBAAkB;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA,wCAAwC,eAAe;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,YAAY;AACZ;AACA;AACA;AACA,SAAS;AACT;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;AC3yCE;AACmE;AACnE;;;AAEF,mCAA8B;AAC9B,sCAAyC;AAEzC;AAUI,yBAAuB,MAAgB;AAJhC,a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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab1650cbd97648d23251","module.exports = PIXI;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"PIXI\"\n// module id = 0\n// module chunks = 0","//\r\n// singleton for static/global objects\r\n//\r\nimport Player from './player';\r\nimport Ship from './ship';\r\nimport PopupManager from './popupmanager';\r\nimport theSea from './theSea';\r\nimport EconomyItem from './economyitem';\r\n\r\nexport default class SingletonClass {\r\n    private static _instance:SingletonClass = new SingletonClass();\r\n\r\n    private static playerObject:Player = new Player(); // instantiate the player object\r\n    private static playerShip:Ship; // maintained by the mainhud\r\n    private static _popupManager:PopupManager;\r\n    private static _currentPort:string = \"\";\r\n    private static _marketData:any = {};\r\n    private static _warehouseData:any = {};\r\n\r\n    constructor() {\r\n        if(SingletonClass._instance){\r\n            throw new Error(\"Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.\");\r\n        }\r\n        SingletonClass._instance = this;\r\n    }\r\n\r\n    public static getInstance():SingletonClass\r\n    {\r\n        return SingletonClass._instance;\r\n    }\r\n\r\n    public static get ship()\r\n    {\r\n        return SingletonClass.playerShip;\r\n    }\r\n\r\n    public SetShip(newShip:Ship)\r\n    {\r\n        SingletonClass.playerShip = newShip;\r\n    }\r\n\r\n    public static get player()\r\n    {\r\n        return SingletonClass.playerObject;\r\n    }\r\n\r\n    public static get popupManager()\r\n    {\r\n        return this._popupManager;\r\n    }\r\n\r\n    public static set popupManager(newpopman:PopupManager)\r\n    {\r\n        this._popupManager = newpopman;\r\n    }\r\n\r\n    public static get currentPort()\r\n    {\r\n        return this._currentPort;\r\n    }\r\n\r\n    public static set currentPort(newPort:string)\r\n    {\r\n        this._currentPort = newPort;\r\n    }\r\n\r\n    public static getPortMarketData(portName:string)\r\n    {\r\n        //console.log(this._marketData);\r\n        if(this._marketData.hasOwnProperty(portName))\r\n        {\r\n            return this._marketData[portName]; // return the object for this port data\r\n        } else {\r\n            SingletonClass.generateMarketData(portName);\r\n            return this._marketData[portName];\r\n        }\r\n    }\r\n\r\n    public static setPortMarketData(portName:string, dataObj:any)\r\n    {\r\n        this._marketData[portName] = dataObj;\r\n    }\r\n\r\n    public static setPortWarehouseData(portName:string, dataObj:any)\r\n    {\r\n        this._warehouseData[portName] = dataObj;\r\n    }\r\n\r\n    public static generateMarketData(portName:string)\r\n    {\r\n\r\n        // generate the data and store it on the singleton\r\n        var i, rate, up;\r\n        let data:any = {};\r\n        for (i=0; i<EconomyItem.maxItems; i++)\r\n        {\r\n            rate = theSea.getRandomIntInclusive(0,100);\r\n            if (theSea.getRandomIntInclusive(0,1) == 1)\r\n                up = true;\r\n            else\r\n                up = false;\r\n            data[i] = {rate: rate, up: up};\r\n        }\r\n\r\n        // store this on the singletone with our town info\r\n        SingletonClass.setPortMarketData(portName, data);\r\n        //console.log(\"Generating market data for : \" +  town);\r\n\r\n        // return our generated object\r\n        return data;\r\n    }\r\n\r\n    public static getPortWarehouseData(portName:string)\r\n    {\r\n        //console.log(this._marketData);\r\n        if(this._warehouseData.hasOwnProperty(portName))\r\n        {\r\n            return this._warehouseData[portName]; // return the object for this port data\r\n        } else {\r\n            SingletonClass.generateWarehouseData(portName);\r\n            return this._warehouseData[portName];\r\n        }\r\n    }\r\n    private static rateComp(a:any, b:any)\r\n    {\r\n        return a.rate - b.rate;\r\n    }\r\n\r\n    public static generateWarehouseData(portName:string)\r\n    {\r\n        // get the market data for this port\r\n        var marketData = SingletonClass.getPortMarketData(portName);\r\n\r\n        // randomly generate items with the smallest rate (lowest demand)\r\n\r\n        // generate an array of items and sort it on rate\r\n        var k;\r\n        var rateSort = [];\r\n        for (k=0;k<EconomyItem.maxItems;k++)\r\n        {\r\n            rateSort.push({itemid:k, rate: marketData[k].rate});\r\n        }\r\n        rateSort.sort(this.rateComp);\r\n        //console.log(rateSort);\r\n\r\n        // generate the data and store it on the singleton\r\n        var i,j, rate, up;\r\n        let data:any = {};\r\n        var items = [];\r\n        var sampleIndex = 6; // array in descending order of demand, take the top 6 \r\n        for (i=0; i<40; i++) // i is the item id\r\n        {\r\n            j = theSea.getRandomIntInclusive(0,sampleIndex);\r\n            items.push(rateSort[j].itemid);\r\n        }\r\n        items.sort(); // sort ascending the list of itemids\r\n        var now = Date.now();\r\n        data = {lastTime:now, items:items};\r\n        // store this on the singletone with our town info\r\n        SingletonClass.setPortWarehouseData(portName, data);\r\n        //console.log(\"Generating market data for : \" +  town);\r\n\r\n        // return our generated object\r\n        return data;\r\n    }\r\n\r\n    public static getMarketItemPrice(itemID:number)\r\n    {\r\n        var marketPrice,value;\r\n        // item price is in in the item data\r\n        value = EconomyItem.jsonData[itemID].value;\r\n        // modify this by the market rate at the current port\r\n        var port = this._currentPort;\r\n        var marketData = SingletonClass.getPortMarketData(port);\r\n        marketPrice = Math.floor(value + Math.ceil(value *  marketData[itemID].rate / 100));\r\n        // return the modified price\r\n        return marketPrice;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/singleton.ts","//\r\n// Button class for button behavior to sprites\r\n// \r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport * as filters from 'pixi-filters';\r\n\r\nexport default class Button extends PIXI.Sprite\r\n{\r\n    private glow:filters.GlowFilter;\r\n    private disabled:boolean = false;\r\n    private noScale:boolean=false;\r\n    private origScale:number = 0;\r\n    private label:PIXI.Text;\r\n    private strLabel:string=\"\";\r\n    private firstMouse:boolean = true;\r\n\r\n    constructor(texture?: PIXI.Texture, noScale:boolean=false, text:string=\"\", fontSize:number=22)\r\n    {\r\n        super(texture);\r\n        this.interactive = true;\r\n        this.on('mousedown', this.onMouseDown);\r\n        this.on('mouseup', this.onMouseUp);\r\n        this.on('mouseover', this.onMouseOver);\r\n        this.on('mouseout', this.onMouseOut);\r\n        this.glow = new filters.GlowFilter(10, 1, 1, 0xFFFFFF);\r\n        if (!noScale)\r\n            this.anchor.x = this.anchor.y = 0.5; // buttons center anchor so scale effects are proprtionate\r\n        this.noScale = noScale;\r\n        this.origScale = this.scale.x;\r\n        if (text != \"\")\r\n        {\r\n            this.strLabel = text;\r\n            var style = new PIXI.TextStyle({\r\n                fontFamily: 'IM Fell English SC',\r\n                fontSize: fontSize,\r\n                fill: 'white'\r\n            }); \r\n            this.label = new PIXI.Text(text, style)\r\n            if (this.noScale)\r\n            {\r\n                this.label.x = this.width / 2 - this.label.width / 2;\r\n                this.label.y = this.height / 2 - this.label.height / 2;\r\n            }\r\n            else {\r\n                this.label.x = -this.label.width / 2;\r\n                this.label.y = -this.label.height / 2;\r\n            }\r\n            this.addChild(this.label);\r\n        }\r\n    }\r\n\r\n    onMouseDown = () => \r\n    {\r\n        if (this.disabled)\r\n            return;\r\n        if (!this.noScale)\r\n        {\r\n            this.scale.x = this.scale.y = this.origScale * 0.67;\r\n        }\r\n        this.filters = [];\r\n    }\r\n\r\n    onMouseUp = () =>\r\n    {\r\n        if (this.disabled)\r\n            return;\r\n        if (!this.noScale)\r\n        {\r\n            this.scale.x = this.scale.y = this.origScale;\r\n            //console.log(\"Button returning to scale: \" + this.origScale);\r\n        }\r\n    }\r\n\r\n    onMouseOver = () =>\r\n    {\r\n        if (this.disabled)\r\n            return;\r\n\r\n        if (this.firstMouse)\r\n        {\r\n            this.origScale = this.scale.x;\r\n            this.firstMouse = false;\r\n            //console.log(\"Recording origScale: \" + this.origScale);\r\n        }\r\n        // apply glow filter\r\n        this.filters = [this.glow];\r\n    }\r\n\r\n    onMouseOut = () => \r\n    {\r\n        if (this.disabled)\r\n            return;\r\n        this.filters = [];\r\n        if (!this.noScale)\r\n        {\r\n            this.scale.x = this.scale.y = this.origScale;\r\n        }\r\n    }\r\n\r\n    setDisabled(disabled:boolean)\r\n    {\r\n        this.disabled = disabled;\r\n        if (disabled)\r\n        {\r\n            this.tint = 0x333333; // dark grey\r\n            this.alpha = 0.5;\r\n        }\r\n        else\r\n        {\r\n            this.tint = 0xFFFFFF; // clear any tint\r\n            this.alpha = 1.0;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/button.ts","//\r\n// PopUp bass class - all popups should extend this\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport Button from './button';\r\n\r\nexport default class PopUp extends PIXI.Container\r\n{\r\n    protected onClose:Function=null;\r\n    protected managerClose:Function=null; // second callback for the popupmanager onclose\r\n    protected bg:PIXI.Sprite; // the backdrop\r\n    protected btnX:Button;    // the close button\r\n    protected _backgrounded:boolean = false;\r\n\r\n    constructor(onClose?:Function)\r\n    {\r\n        super();\r\n    }\r\n\r\n    protected close()\r\n    {\r\n        if (this.onClose != null)\r\n            this.onClose(); // call our call back\r\n        if (this.managerClose != null)\r\n            this.managerClose();\r\n    }\r\n\r\n    public setManagerClose(onClose:Function)\r\n    {\r\n        this.managerClose = onClose;\r\n    }\r\n\r\n    // children will override\r\n    public init()\r\n    {\r\n        // load and position our graphics\r\n        this.bg = new PIXI.Sprite(PIXI.Texture.fromFrame(\"ui_map.png\"));\r\n        this.addChild(this.bg);\r\n        this.bg.interactive = true;\r\n        this.btnX = new Button( PIXI.Texture.fromFrame(\"Btn_Ex.png\"));\r\n        this.btnX.anchor.x = this.btnX.anchor.y = 0.5;\r\n        this.btnX.x = 713;\r\n        this.btnX.y = 42;\r\n        this.addChild(this.btnX);\r\n        this.btnX.on('click', this.btnXClick);\r\n    }\r\n\r\n    protected btnXClick = () =>\r\n    {\r\n        this.close(); // will callback to popupmanager to remove us from display\r\n    }\r\n\r\n    public backgrounded()\r\n    {\r\n        this._backgrounded = true;\r\n    }\r\n\r\n    public top()\r\n    {\r\n        this._backgrounded = false;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popup.ts","\r\nimport * as PIXI from 'pixi.js';\r\nimport GameObject  from './gameobject';\r\nimport { ObjectType } from './gameobject';\r\nimport Island from './island';\r\nimport Ship from './ship';\r\nimport FXManager from './fxmanager';\r\nimport SingletonClass from './singleton';\r\nimport Victor = require('victor');\r\n\r\ndeclare var PolyK: any;\r\n\r\nexport default class theSea \r\n{\r\n    private container:PIXI.Container = new PIXI.Container();\r\n    \r\n    private deltaX:number = 0;\r\n    private deltaY:number = 0;\r\n    private lastX:number = -1;\r\n    private lastY:number = -1;\r\n\r\n    private loadCallback:Function;\r\n\r\n    private islandArray: Array<GameObject> = []; // array of all sprites added to theSea islands and ships (later, projectiles as well)\r\n    private shipArray: Array<Ship> = [];\r\n    private wheelScale = 0.25;\r\n    private mouseDown:boolean = false;\r\n\r\n    private selectedBoat:Ship; // what boat does the user have selected\r\n\r\n    private islandsLoaded:boolean = false;\r\n    private boatsLoaded:boolean = false;\r\n\r\n    private boatData:any;   // save the json data to pass to boats as they are created\r\n\r\n    // layers so sea tiles always sorted beneath ships/islands\r\n    private layerSeaTiles:PIXI.Container = new PIXI.Container();\r\n    private layerObjects:PIXI.Container = new PIXI.Container();\r\n    private layerUI:PIXI.Container = new PIXI.Container();\r\n\r\n    private numPorts:number=0;  // number of islands in the island array that are ports\r\n\r\n    private fxManager:FXManager; // manager class to manage cannon balls, fire, smoke, and other effects\r\n\r\n    // javascript style mouse wheel handler, pixi does not support mouse wheel\r\n    mouseWheelHandler = (e:any) => {\r\n        //console.log(e);\r\n\r\n        if (e.wheelDelta > 0) { // scroll in\r\n            this.wheelScale += 0.05;\r\n            if (this.wheelScale > 2.0)\r\n                this.wheelScale = 2.0;\r\n            //console.log(\"wheel in\");\r\n        } else { // scroll out\r\n            this.wheelScale -= 0.05;\r\n            if (this.wheelScale < 0.10)\r\n                this.wheelScale = 0.10;\r\n            //console.log(\"wheel out\");\r\n        }\r\n\r\n        let pos = new PIXI.Point(e.clientX, e.clientY);\r\n        let preZoomWorld:PIXI.Point = this.container.toLocal(pos); //this.screenToWorld(e.clientX, e.clientY);  \r\n        \r\n        //\r\n        // perform the scale to the container\r\n        //\r\n        this.container.scale.x = this.container.scale.y = this.wheelScale;\r\n        \r\n        // console.log(\"scale: \" + this.wheelScale.toFixed(2) + \r\n        //             \" pos: \" + this.container.x.toFixed(2) + \",\" + this.container.y.toFixed(2) + \" \" + \r\n        //             \"w: \" + this.container.width.toFixed(2) + \r\n        //             \" h: \" + this.container.height.toFixed(2) +\r\n        //             \" mouse: \" + e.clientX + \",\" + e.clientY\r\n        //             );\r\n\r\n        //where is the zoom location now, after we changed the scale?\r\n        let postZoomWorld = this.container.toLocal(pos); //this.screenToWorld(e.clientX, e.clientY);\r\n        \r\n        //console.log(\"pre: \" + preZoomWorld.x + \",\" + preZoomWorld.y + \" post: \" + postZoomWorld.x + \",\" + postZoomWorld.y);\r\n\r\n        let preZoomGlobal = this.container.toGlobal(preZoomWorld);\r\n        let postZoomGlobal = this.container.toGlobal(postZoomWorld);\r\n        \r\n        //move the world so that the zoomed-location goes back to where it was on the screen before scaling        \r\n        this.container.x += postZoomGlobal.x - preZoomGlobal.x ;   \r\n        this.container.y += postZoomGlobal.y - preZoomGlobal.y; \r\n    }\r\n\r\n    mouseUpHandler = (e:any) => {\r\n        this.mouseDown = false;\r\n    }\r\n    \r\n    mouseDownHandler = (e:any) => {\r\n        if (e.target == this.container)\r\n            this.mouseDown = true;\r\n    }\r\n\r\n    // pixi style event handler, not the same arguments as javascript mouse event\r\n    mouseMoveHandler = (e:any) => {\r\n        //document.getElementById(\"log\").innerText = e.type;\r\n        //console.log(\"G: \" +e.data.global.x + \",\" + e.data.global.y);\r\n        //console.log(\"mouseMoved\");\r\n        // console.log(this);\r\n\r\n       // console.log(\"L: \" + this.container.toLocal(e.data.global).x + \", \" + this.container.toLocal(e.data.global).y);\r\n\r\n        if (e.target != this.container)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if (e.data.buttons == 0)\r\n            this.mouseDown = false;\r\n\r\n        if (this.mouseDown) // left button is down \r\n        {\r\n            //console.log(\"LeftDown\");\r\n            var doDelta = true;\r\n            if (this.lastX == -1)\r\n                doDelta = false;\r\n\r\n            if (doDelta)\r\n            {\r\n                this.deltaX = e.data.global.x - this.lastX;\r\n                this.deltaY = e.data.global.y - this.lastY;\r\n                //console.log(this.deltaX + \",\" + this.deltaY);\r\n            }\r\n\r\n            //console.log(e);\r\n            //console.log(e.data.global.x + \",\" + e.data.global.y);\r\n            this.lastX = e.data.global.x;\r\n            this.lastY = e.data.global.y;\r\n        }\r\n        else // button is up\r\n        {\r\n            this.deltaX = 0;\r\n            this.deltaY = 0;\r\n            this.lastX = -1;\r\n            this.lastY = -1;\r\n        }\r\n\r\n        /*\r\n         *\r\n         * mousemove/mouseover functionality for islands - test with polyk, prolly better done with pixi handling\r\n         * \r\n        //take the mouse coords and convert to world coords\r\n        let pos = new PIXI.Point(e.data.global.x, e.data.global.y);\r\n        let mouseWorld:PIXI.Point = this.container.toLocal(pos);\r\n        // now convert this to cartesian coordinates\r\n        // x is fine as is\r\n        // y is inverted from bottom left of sea tiles 0,8192\r\n        mouseWorld.y = 8192 - mouseWorld.y;\r\n\r\n        // walk the object array and perform a PolyK hittest against each island\r\n        for (let entry of this.objectArray) {\r\n            if (entry.getType() == ObjectType.ISLAND || entry.getType() == ObjectType.SHIP) {\r\n                var retVal = entry.cartesianHitTest(mouseWorld);\r\n                if (retVal == true) {\r\n                    //console.log(\"Hit over \" + entry.getSprite().name);\r\n                } else { \r\n                    //console.log(\"hitTest returns: \" + retVal + \" mouse: \" + mouseWorld.x + \",\" + mouseWorld.y);\r\n                }\r\n            }\r\n        }\r\n        */\r\n    }\r\n    \r\n    // when done loading, arrange the sea tiles on theSea container\r\n    setup = () => {\r\n        let map1 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_002.png\"].texture);\r\n        let map2 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_003.png\"].texture);\r\n        let map3 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_004.png\"].texture);\r\n        let map4 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_005.png\"].texture);\r\n        let map5 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_006.png\"].texture);\r\n        let map6 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_007.png\"].texture);\r\n        let map7 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_008.png\"].texture);\r\n        let map8 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_009.png\"].texture);\r\n        let map9 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_010.png\"].texture);\r\n        let map10 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_011.png\"].texture);\r\n        let map11 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_012.png\"].texture);\r\n        let map12 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_013.png\"].texture);\r\n        let map13 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_014.png\"].texture);\r\n        let map14 = new PIXI.Sprite(PIXI.loader.resources[\"images/4x4Region1/image_part_015.png\"].texture);\r\n        \r\n        // arranged left to right top to bottom\r\n        // however the upleft tile is empty as is the lower left tile.. only tiles 2-15 are not empty sea\r\n        map1.x = 2048; map1.y = 0; \r\n        map2.x = 4096; map2.y = 0; \r\n        map3.x = 6144; map3.y =0;\r\n        map4.x = 0; map4.y = 2048; \r\n        map5.x = 2048; map5.y = 2048; \r\n        map6.x = 4096; map6.y = 2048; \r\n        map7.x = 6144; map7.y = 2048; \r\n        map8.x = 0; map8.y = 4096; \r\n        map9.x = 2048; map9.y = 4096; \r\n        map10.x = 4096; map10.y = 4096;\r\n        map11.x = 6144; map11.y = 4096;\r\n        map12.x = 0; map12.y = 6144; \r\n        map13.x = 2048; map13.y = 6144;\r\n        map14.x = 4096; map14.y = 6144; \r\n\r\n        this.layerSeaTiles.addChild(map1);\r\n        this.layerSeaTiles.addChild(map2);\r\n        this.layerSeaTiles.addChild(map3);\r\n        this.layerSeaTiles.addChild(map4);\r\n        this.layerSeaTiles.addChild(map5);\r\n        this.layerSeaTiles.addChild(map6);\r\n        this.layerSeaTiles.addChild(map7);\r\n        this.layerSeaTiles.addChild(map8);\r\n        this.layerSeaTiles.addChild(map9);\r\n        this.layerSeaTiles.addChild(map10);\r\n        this.layerSeaTiles.addChild(map11);\r\n        this.layerSeaTiles.addChild(map12);\r\n        this.layerSeaTiles.addChild(map13);\r\n        this.layerSeaTiles.addChild(map14);\r\n\r\n        this.container.addChild(this.layerSeaTiles); // sea tiles sort to bottom\r\n        this.container.addChild(this.layerObjects); // all other objects will sort above it\r\n        this.container.addChild(this.layerUI);\r\n\r\n        this.container.scale.x = this.container.scale.y = this.wheelScale; \r\n\r\n        this.loadRegion(); // for now this loads the islands, ideally it will load the sea tiles too\r\n\r\n        this.fxManager.onAssetsLoaded(); // fxManager can now initialize with its assets\r\n    \r\n    }\r\n\r\n    public getUILayer()\r\n    {\r\n        return this.layerUI;\r\n    }\r\n\r\n    init(callback: Function)\r\n    {\r\n        // load our background sea tiles\r\n        PIXI.loader\r\n            .add(\"images/4x4Region1/image_part_002.png\")\r\n            .add(\"images/4x4Region1/image_part_003.png\")\r\n            .add(\"images/4x4Region1/image_part_004.png\")\r\n            .add(\"images/4x4Region1/image_part_005.png\")\r\n            .add(\"images/4x4Region1/image_part_006.png\")\r\n            .add(\"images/4x4Region1/image_part_007.png\")\r\n            .add(\"images/4x4Region1/image_part_008.png\")\r\n            .add(\"images/4x4Region1/image_part_009.png\")\r\n            .add(\"images/4x4Region1/image_part_010.png\")\r\n            .add(\"images/4x4Region1/image_part_011.png\")\r\n            .add(\"images/4x4Region1/image_part_012.png\")\r\n            .add(\"images/4x4Region1/image_part_013.png\")\r\n            .add(\"images/4x4Region1/image_part_014.png\")\r\n            .add(\"images/4x4Region1/image_part_015.png\")\r\n            .add(\"images/islands/region1atlas.json\")        // loader automagically loads all the textures in this atlas\r\n            .add(\"images/ships/corvette2.json\")\r\n\r\n        this.loadCallback = callback;\r\n\r\n        this.fxManager = new FXManager();\r\n        this.fxManager.addLoaderAssets(); // have fxManager request its assets\r\n        this.fxManager.setFXContainer(this.layerObjects); // give the fxManager its layer to add fx to\r\n\r\n        this.container.interactive = true;\r\n        this.container.on(\"mousemove\", this.mouseMoveHandler);\r\n        this.container.on(\"mouseup\",this.mouseUpHandler);\r\n        this.container.on(\"mousedown\",this.mouseDownHandler);\r\n\r\n        //Attach event listeners\r\n        window.addEventListener(\r\n        \"keydown\", this.keyDownHandler, false\r\n        );\r\n        window.addEventListener(\r\n        \"keyup\", this.keyUpHandler, false\r\n        );\r\n\r\n        window.addEventListener(\"sailTrimEvent\", this.sailTrimHandler, false);\r\n    }\r\n\r\n    sailTrimHandler = (event:any) => {\r\n        // event.detail contains the data of percent 0->1 of of sail trim.. hadn this down to our boat\r\n        this.selectedBoat.setSailTrim(event.detail);\r\n    }\r\n\r\n    keyDownHandler = (event:any) => {\r\n        //console.log(\"Pressed key: \" + event.keyCode);\r\n        if (event.keyCode === 38) { // up\r\n            this.selectedBoat.increaseSail();\r\n        }\r\n        else if (event.keyCode === 40) { // down\r\n            this.selectedBoat.decreaseSail();\r\n        }\r\n        else if (event.keyCode === 37) { // left\r\n            this.selectedBoat.wheelLarboard();\r\n        }\r\n        else if (event.keyCode === 39) { // right\r\n            this.selectedBoat.wheelStarboard();\r\n        }\r\n    }\r\n\r\n    keyUpHandler = () => {\r\n    }\r\n\r\n    private loadRegion(regionName: string = \"region1\") \r\n    {\r\n        // load the region1 background sea tiles\r\n\r\n        // load the region1 islands\r\n\r\n        // load the island game data \r\n        this.loadJSON(\"./data/region1isles.json\", this.onIslesLoaded)\r\n\r\n        // load the boat data\r\n        this.loadJSON(\"./data/shipdata.json\", this.onBoatsLoaded);\r\n\r\n    }\r\n\r\n    private onBoatsLoaded = (responseText:string) => \r\n    {\r\n        var json_data = JSON.parse(responseText);\r\n        //console.log(json_data);\r\n\r\n        // save the boat data to hand to boast as they are created\r\n        this.boatData = json_data;\r\n\r\n        // run through all entries in the json\r\n        // for (var key in json_data) {\r\n        //     if (json_data.hasOwnProperty(key)) { // \"corvette\" is the only boat so far \r\n        //         if (key == \"corvette\") // we good\r\n        //         {\r\n\r\n        //         } else {\r\n        //             console.log(\"Found unrecognized key: \" + key);\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        this.boatsLoaded = true;\r\n\r\n        this.checkFinishLoad();\r\n    }\r\n\r\n    private onIslesLoaded = (responseText:string) => \r\n    {\r\n        var json_data = JSON.parse(responseText);\r\n        //console.log(json_data);\r\n        //console.log(PIXI.loader.resources);\r\n\r\n        // run through all entries in the json\r\n        for (var key in json_data) {\r\n            if (json_data.hasOwnProperty(key)) {\r\n                // create a sprite for each\r\n                let isle = new Island();\r\n\r\n                let sprite = new PIXI.Sprite(PIXI.Texture.fromFrame(json_data[key].fileName));\r\n                \r\n                // position the sprite according to the data\r\n                sprite.x = json_data[key].x;\r\n                sprite.y = json_data[key].y;\r\n\r\n                // tag each sprite with its name (the key)\r\n                sprite.name = key;\r\n\r\n                // add sprite to the isle, this container, and the tracked object array\r\n                isle.setSprite(sprite);\r\n                this.layerObjects.addChild(sprite);\r\n                this.islandArray.push(isle);\r\n\r\n                // save its polygonal data\r\n                isle.setPolyData(json_data[key].polygonPts);\r\n                isle.setData(json_data[key]); // save out the entire entry for isle's later use\r\n                if (isle.isPort())\r\n                    this.numPorts++;\r\n\r\n                //console.log(\"Adding \" + sprite.name + \" to theSea\");\r\n            }\r\n        }\r\n\r\n        this.islandsLoaded = true;\r\n        this.checkFinishLoad();\r\n    }\r\n\r\n    // make sure all asyncronous loads have completed\r\n    private checkFinishLoad() {\r\n        if (this.boatsLoaded && this.islandsLoaded)\r\n        {\r\n\r\n            // add a boat near guadelupe\r\n            let boat = new Ship();\r\n            boat.init(this.boatData.corvette, this.islandArray);\r\n            boat.setPosition(6200,2600);\r\n            boat.setFXManager(this.fxManager); // so the ship can fire cannonballs!\r\n            this.layerObjects.addChild(boat.getSprite());\r\n            this.shipArray.push(boat);\r\n            \r\n            this.selectedBoat = boat;\r\n            // send a message that we have a new selected boat\r\n            var myEvent = new CustomEvent(\"boatSelected\",\r\n            {\r\n                'detail': this.selectedBoat\r\n            });\r\n    \r\n            window.dispatchEvent(myEvent);\r\n\r\n            // spawn some AI boats to sail about\r\n            this.spawnAIBoats();\r\n\r\n            // give the isle and boats list to the fxmanager\r\n            this.fxManager.setIslesShips(this.islandArray, this.shipArray);\r\n\r\n            // final step in loading process.. can now call loadcallback\r\n            this.loadCallback();\r\n        }\r\n    }\r\n\r\n    private spawnAIBoats()\r\n    {\r\n        // load one AI boat - heading 600 pixels due north\r\n        var NUMBOATS = 20;\r\n        for (var i=0;i<NUMBOATS;i++)\r\n        {\r\n            let boat = new Ship();\r\n            let portPt = this.getRandomPortDest();\r\n            let edgePt = this.getRandomEdgeDest();\r\n            if (NUMBOATS == 1)\r\n            {\r\n                let pos = new PIXI.Point(6200,2600);\r\n                boat.init(this.boatData.corvette, this.islandArray, true, pos, portPt);\r\n            }\r\n            else\r\n            {\r\n                if (theSea.getRandomIntInclusive(0,1) == 1) // potentially flip destination\r\n                    boat.init(this.boatData.corvette, this.islandArray, true, edgePt, portPt);\r\n                else\r\n                    boat.init(this.boatData.corvette, this.islandArray, true, portPt, edgePt);\r\n            }\r\n\r\n            boat.setFXManager(this.fxManager); // so the ship can fire cannonballs!\r\n\r\n            this.layerObjects.addChild(boat.getSprite());\r\n            this.shipArray.push(boat);\r\n        }\r\n    }\r\n\r\n    private loadJSON(jsonFile:string, callback:Function) \r\n    {\r\n        var xobj = new XMLHttpRequest();\r\n            xobj.overrideMimeType(\"application/json\");\r\n        xobj.open('GET', jsonFile, true); \r\n        xobj.onreadystatechange = function () {\r\n            if (xobj.readyState == 4 && xobj.status == 200) {\r\n                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\r\n                callback(xobj.responseText);\r\n            }\r\n        };\r\n        xobj.send(null);  \r\n    }\r\n\r\n    private getRandomEdgeDest()\r\n    {\r\n        // return a point along the edge of the map\r\n        var randx = theSea.getRandomIntInclusive(0,8192);\r\n        var randy = theSea.getRandomIntInclusive(0,8192);\r\n        if (theSea.getRandomIntInclusive(0,1) == 1)\r\n        {\r\n            if (theSea.getRandomIntInclusive(0,1) == 1)\r\n                return new PIXI.Point(0,randy); // left edge\r\n            else\r\n                return new PIXI.Point(8192, randy); // right edge\r\n        }\r\n        else\r\n        {\r\n            if (theSea.getRandomIntInclusive(0,1) == 1)\r\n                return new PIXI.Point(randx,0); // top edge\r\n            else    \r\n                return new PIXI.Point(randx, 8192); // bottom edge\r\n        }\r\n    }\r\n\r\n    private getRandomPortDest()\r\n    {\r\n        // return a random port destination\r\n        var desiredPort = theSea.getRandomIntInclusive(1,this.numPorts);\r\n        var portCount = 0;\r\n        var isle;\r\n\r\n        //console.log(\"DesiredPort: \" + desiredPort +  \" numPorts: \" + this.numPorts);\r\n\r\n        // loop through the island array\r\n        for (let gameObj of this.islandArray)\r\n        {\r\n            if (<Island>gameObj && (<Island>gameObj).isPort())\r\n            {\r\n                portCount++;\r\n                if (portCount == desiredPort)\r\n                {\r\n                    //console.log(\"RandomPort: \" + (<Island>gameObj).getName());\r\n                    return (<Island>gameObj).getPortDest();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public static getRandomIntInclusive(min:number, max:number) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive \r\n    }\r\n\r\n    public getContainer()\r\n    {\r\n        return this.container;\r\n    }\r\n\r\n    //\r\n    // update function called per frame\r\n    //\r\n    public update()\r\n    {\r\n        if (this.deltaX != 0 || this.deltaY != 0)\r\n        {\r\n            this.container.x += this.deltaX;\r\n            this.container.y += this.deltaY;\r\n\r\n            if (this.container.x > 0)\r\n                this.container.x = 0;\r\n            \r\n            if (this.container.y > 0 + 40)\r\n                this.container.y = 0 + 40;  // adjust for top hud\r\n\r\n            if (this.container.x < -(this.container.width - window.innerWidth))\r\n                this.container.x = -(this.container.width - window.innerWidth);\r\n\r\n            if (this.container.y < -(this.container.height - window.innerHeight + 100)) // adjust for bottom hud\r\n                this.container.y = -(this.container.height - window.innerHeight + 100);\r\n\r\n            this.deltaX = 0;\r\n            this.deltaY = 0; // clear the data, await next mousemove\r\n        }\r\n\r\n        // console.log(this.deltaX + \",\" + this.deltaY);\r\n\r\n        this.updateObjectArray();\r\n\r\n        this.fxManager.update();\r\n    }\r\n\r\n    private updateObjectArray()\r\n    {\r\n        // sort the children ascending as the renderer will render sprites in container ordrer\r\n        this.layerObjects.children.sort(this.objSort);\r\n\r\n        var nearPort:boolean = false;\r\n        // loop through our object array and call each element's update function\r\n        for (let gameObj of this.islandArray)\r\n        {\r\n            var boat = SingletonClass.ship;\r\n            gameObj.update();\r\n            if (!nearPort)\r\n            {\r\n                if ((<Island>gameObj).isPort())\r\n                {\r\n                    var isle = <Island>gameObj;\r\n                    // check its port ref against the player boat position\r\n                    var boatPt = boat.getRefPtVictor();\r\n                    var islePt = isle.getPortDestVictor(); // ref math already included here\r\n                    // if close enough, enable the port button on the main hud\r\n                    var dist = Math.abs(boatPt.distance(islePt));\r\n                    if (dist < 150)\r\n                    {\r\n                        nearPort = true;\r\n                        SingletonClass.currentPort = isle.getName();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!nearPort) // not near a port, clear the currentPort string HUD uses to enable anchor button\r\n            SingletonClass.currentPort = \"\";\r\n\r\n        for (let gameObj of this.shipArray)\r\n        {\r\n            gameObj.update();\r\n        }\r\n\r\n        // check for collisions against the playerboat\r\n        this.checkPlayerBoatCollision();\r\n    }\r\n\r\n    private objSort(a:PIXI.DisplayObject, b:PIXI.DisplayObject)\r\n    {\r\n        var aY = a.y + (<PIXI.Sprite>a).height/2;\r\n        var bY = b.y + (<PIXI.Sprite>b).height/2;\r\n\r\n        if (aY < bY)\r\n            return -1;\r\n        else if (aY == bY)\r\n            return 0;\r\n        else if (aY > bY)\r\n            return 1;\r\n        else \r\n            return 0;\r\n    }\r\n\r\n    public getIslandList()\r\n    {\r\n        return this.islandArray;\r\n    }\r\n\r\n    private checkPlayerBoatCollision() {\r\n        // first do a simple box hit test against the player boat and all the islands\r\n        var hit = false;\r\n        for (let entry of this.islandArray) {\r\n            if (entry.getType() == ObjectType.ISLAND) {\r\n                if (theSea.boxHitTest(entry.getSprite(), this.selectedBoat.getSprite())) {\r\n                    //console.log(\"boxHit!\");\r\n                    // sprites overlap, now do a PolyK hittest against all points on the boat with the islands polygonal data\r\n                    if (this.selectedBoat.hitTestByPolygon(entry.getCartPolyData()) == true)\r\n                    {\r\n                        console.log(\"Boat has struck - \" + entry.getSprite().name);\r\n                        this.selectedBoat.allStop();\r\n                        this.selectedBoat.setAground(true);\r\n                        hit = true;\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!hit)\r\n            this.selectedBoat.setAground(false);\r\n\r\n        // if theres a hit, perform the polyk hittest for each point in the boats polykdata against the island polygon\r\n    }\r\n\r\n    public static boxHitTest(s1:PIXI.Sprite, s2:PIXI.Sprite)\r\n    {\r\n        var x1 = s1.x;\r\n        var y1 = s1.y;\r\n        var w1 = s1.width;\r\n        var h1 = s1.height;\r\n\r\n        var x2 = s2.x;\r\n        var y2 = s2.y;\r\n        var w2 = s2.width;\r\n        var h2 = s2.height;\r\n\r\n        if (x1 + w1 > x2)\r\n                if (x1 < x2 + w2)\r\n                    if (y1 + h1 > y2)                \r\n                            if (y1 < y2 + h2)                    \r\n                                return true;    \r\n                                \r\n        return false;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/theSea.ts","//\r\n// GameObject - the root class of all sprites\r\n//\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport const enum ObjectType {\r\n    NONE,\r\n    ISLAND,\r\n    SHIP\r\n}\r\n\r\ndeclare var PolyK: any;\r\n\r\nexport default class GameObject\r\n{\r\n    // the game object's sprite keeps positional information  x,y\r\n\r\n    protected vx:number = 0; // velocity information\r\n    protected vy:number = 0;\r\n\r\n    protected z:number = 0;  // z-sorting if necessary... z sort normally done by y position\r\n\r\n    protected objType:ObjectType = ObjectType.NONE;\r\n\r\n    protected sprite:PIXI.Sprite;\r\n\r\n    protected polyData:any; // use any for ease of use with PolyK\r\n    protected cartPolyData:Array<number> = [];\r\n\r\n    // point within the sprite that is its \"reference point\" \r\n    // z-sorting will be done relative to this point\r\n    // ships cannon balls will fire from this point etc.\r\n    protected refPoint:PIXI.Point; \r\n\r\n    constructor()\r\n    {\r\n        this.refPoint = new PIXI.Point(0,0);    \r\n    }\r\n\r\n    public setRefPoint(x:number, y:number)\r\n    {\r\n        this.refPoint.x = x;\r\n        this.refPoint.y = y;\r\n    }\r\n\r\n    public getType() {\r\n        return this.objType;\r\n    }\r\n\r\n    public setSprite(newSprite:PIXI.Sprite)\r\n    {\r\n        this.sprite = newSprite;\r\n    }\r\n\r\n    public getSprite()\r\n    {\r\n        return this.sprite;\r\n    }\r\n\r\n    public setPolyData(p:any) {\r\n        this.polyData = p;\r\n        // copy the data to the cartPolyDataArray\r\n        for (var i=0; i<p.length; i++)\r\n            this.cartPolyData[i] = p[i]; \r\n        this.convertPolyDataToCartesian();\r\n    }\r\n\r\n    public getCartPolyData() {\r\n        return this.cartPolyData;\r\n    }\r\n\r\n    protected convertPolyDataToCartesian()\r\n    {\r\n        // all data provided is an anti-clockwise polygonal data in local bitmap coordinates \r\n        // relative to the 0,0 top,left of the bitmap\r\n        // PolyK needs this data in cartesian format, with 0,0 at bottom,left of the world\r\n\r\n        //console.log(this.polyData);\r\n        // loop through the array\r\n        for (var i = 0; i<this.polyData.length; i++)\r\n        {\r\n            if (i%2 == 0) // each even index is an \"x\" coordinate\r\n            {\r\n                // x axis is same direction as cartesian\r\n                this.cartPolyData[i] = this.cartPolyData[i] + this.sprite.x; // world coord x\r\n            }\r\n            else // each odd index is a \"y\" coordinate\r\n            {\r\n                // bottom left of our \"world\" is 0,8192\r\n                var cartSpriteY = 8192 - this.sprite.y; \r\n                this.cartPolyData[i] = cartSpriteY - this.cartPolyData[i];\r\n            }   \r\n        }\r\n        //console.log(this.polyData);\r\n    }\r\n\r\n    public cartesianHitTest = (p:PIXI.Point) => {\r\n        //console.log(this.polyData);\r\n        if (this.cartPolyData) {\r\n            // point assumed to be in cartesian coords... compare this to our polyData via PolyK library\r\n            return PolyK.ContainsPoint(this.cartPolyData, p.x, p.y);\r\n        } else {\r\n            console.log(\"polyData not yet defined\");\r\n        }\r\n    }\r\n\r\n    update()\r\n    {\r\n        // NOP for base class functionality\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/gameobject.ts","exports = module.exports = Victor;\n\n/**\n * # Victor - A JavaScript 2D vector class with methods for common vector operations\n */\n\n/**\n * Constructor. Will also work without the `new` keyword\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = Victor(42, 1337);\n *\n * @param {Number} x Value of the x axis\n * @param {Number} y Value of the y axis\n * @return {Victor}\n * @api public\n */\nfunction Victor (x, y) {\n\tif (!(this instanceof Victor)) {\n\t\treturn new Victor(x, y);\n\t}\n\n\t/**\n\t * The X axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.x;\n\t *     // => 42\n\t *\n\t * @api public\n\t */\n\tthis.x = x || 0;\n\n\t/**\n\t * The Y axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.y;\n\t *     // => 21\n\t *\n\t * @api public\n\t */\n\tthis.y = y || 0;\n};\n\n/**\n * # Static\n */\n\n/**\n * Creates a new instance from an array\n *\n * ### Examples:\n *     var vec = Victor.fromArray([42, 21]);\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromArray\n * @param {Array} array Array with the x and y values at index 0 and 1 respectively\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromArray = function (arr) {\n\treturn new Victor(arr[0] || 0, arr[1] || 0);\n};\n\n/**\n * Creates a new instance from an object\n *\n * ### Examples:\n *     var vec = Victor.fromObject({ x: 42, y: 21 });\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromObject\n * @param {Object} obj Object with the values for x and y\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromObject = function (obj) {\n\treturn new Victor(obj.x || 0, obj.y || 0);\n};\n\n/**\n * # Manipulation\n *\n * These functions are chainable.\n */\n\n/**\n * Adds another vector's X axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addX(vec2);\n *     vec1.toString();\n *     // => x:30, y:10\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addX = function (vec) {\n\tthis.x += vec.x;\n\treturn this;\n};\n\n/**\n * Adds another vector's Y axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addY(vec2);\n *     vec1.toString();\n *     // => x:10, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addY = function (vec) {\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds another vector to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.add(vec2);\n *     vec1.toString();\n *     // => x:30, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.add = function (vec) {\n\tthis.x += vec.x;\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to both vector axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalar(2);\n *     vec.toString();\n *     // => x: 3, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalar = function (scalar) {\n\tthis.x += scalar;\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the X axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarX(2);\n *     vec.toString();\n *     // => x: 3, y: 2\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarX = function (scalar) {\n\tthis.x += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarY(2);\n *     vec.toString();\n *     // => x: 1, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarY = function (scalar) {\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the X axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractX(vec2);\n *     vec1.toString();\n *     // => x:80, y:50\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractX = function (vec) {\n\tthis.x -= vec.x;\n\treturn this;\n};\n\n/**\n * Subtracts the Y axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractY(vec2);\n *     vec1.toString();\n *     // => x:100, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractY = function (vec) {\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtract(vec2);\n *     vec1.toString();\n *     // => x:80, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtract = function (vec) {\n\tthis.x -= vec.x;\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalar(20);\n *     vec.toString();\n *     // => x: 80, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalar = function (scalar) {\n\tthis.x -= scalar;\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarX(20);\n *     vec.toString();\n *     // => x: 80, y: 200\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarX = function (scalar) {\n\tthis.x -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarY(20);\n *     vec.toString();\n *     // => x: 100, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarY = function (scalar) {\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Divides the X axis by the x component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.divideX(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideX = function (vector) {\n\tthis.x /= vector.x;\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.divideY(vec2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideY = function (vector) {\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by a axis values of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.divide(vec2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Victor} vector The vector to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divide = function (vector) {\n\tthis.x /= vector.x;\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalar(2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalar = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\treturn this;\n};\n\n/**\n * Divides the X axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarX(2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarX = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarY(2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarY = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.y = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Inverts the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertX();\n *     vec.toString();\n *     // => x:-100, y:50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertX = function () {\n\tthis.x *= -1;\n\treturn this;\n};\n\n/**\n * Inverts the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertY();\n *     vec.toString();\n *     // => x:100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertY = function () {\n\tthis.y *= -1;\n\treturn this;\n};\n\n/**\n * Inverts both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invert();\n *     vec.toString();\n *     // => x:-100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invert = function () {\n\tthis.invertX();\n\tthis.invertY();\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by X component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyX = function (vector) {\n\tthis.x *= vector.x;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by Y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyY = function (vector) {\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by values from a given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.multiply(vec2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Victor} vector The vector to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiply = function (vector) {\n\tthis.x *= vector.x;\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalar(2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Number} The scalar to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalar = function (scalar) {\n\tthis.x *= scalar;\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarX(2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarX = function (scalar) {\n\tthis.x *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarY(2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarY = function (scalar) {\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Normalize\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.normalize = function () {\n\tvar length = this.length();\n\n\tif (length === 0) {\n\t\tthis.x = 1;\n\t\tthis.y = 0;\n\t} else {\n\t\tthis.divide(Victor(length, length));\n\t}\n\treturn this;\n};\n\nVictor.prototype.norm = Victor.prototype.normalize;\n\n/**\n * If the absolute vector axis is greater than `max`, multiplies the axis by `factor`\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.limit(80, 0.9);\n *     vec.toString();\n *     // => x:90, y:50\n *\n * @param {Number} max The maximum value for both x and y axis\n * @param {Number} factor Factor by which the axis are to be multiplied with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.limit = function (max, factor) {\n\tif (Math.abs(this.x) > max){ this.x *= factor; }\n\tif (Math.abs(this.y) > max){ this.y *= factor; }\n\treturn this;\n};\n\n/**\n * Randomizes both vector axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomize(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:67, y:73\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomize = function (topLeft, bottomRight) {\n\tthis.randomizeX(topLeft, bottomRight);\n\tthis.randomizeY(topLeft, bottomRight);\n\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeX(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:55, y:50\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeX = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.x, bottomRight.x);\n\tvar max = Math.max(topLeft.x, bottomRight.x);\n\tthis.x = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeY(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:100, y:66\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeY = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.y, bottomRight.y);\n\tvar max = Math.max(topLeft.y, bottomRight.y);\n\tthis.y = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomly randomizes either axis between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeAny(new Victor(50, 60), new Victor(70, 80));\n *     vec.toString();\n *     // => x:100, y:77\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeAny = function (topLeft, bottomRight) {\n\tif (!! Math.round(Math.random())) {\n\t\tthis.randomizeX(topLeft, bottomRight);\n\t} else {\n\t\tthis.randomizeY(topLeft, bottomRight);\n\t}\n\treturn this;\n};\n\n/**\n * Rounds both axis to an integer value\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.unfloat = function () {\n\tthis.x = Math.round(this.x);\n\tthis.y = Math.round(this.y);\n\treturn this;\n};\n\n/**\n * Rounds both axis to a certain precision\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @param {Number} Precision (default: 8)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.toFixed = function (precision) {\n\tif (typeof precision === 'undefined') { precision = 8; }\n\tthis.x = this.x.toFixed(precision);\n\tthis.y = this.y.toFixed(precision);\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the X axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixX(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:100\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixX = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.x = (1 - amount) * this.x + amount * vec.x;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the Y axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixY(vec2, 0.5);\n *     vec.toString();\n *     // => x:100, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixY = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.y = (1 - amount) * this.y + amount * vec.y;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mix(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mix = function (vec, amount) {\n\tthis.mixX(vec, amount);\n\tthis.mixY(vec, amount);\n\treturn this;\n};\n\n/**\n * # Products\n */\n\n/**\n * Creates a clone of this vector\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = vec1.clone();\n *\n *     vec2.toString();\n *     // => x:10, y:10\n *\n * @return {Victor} A clone of the vector\n * @api public\n */\nVictor.prototype.clone = function () {\n\treturn new Victor(this.x, this.y);\n};\n\n/**\n * Copies another vector's X component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyX(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:10\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyX = function (vec) {\n\tthis.x = vec.x;\n\treturn this;\n};\n\n/**\n * Copies another vector's Y component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyY(vec1);\n *\n *     vec2.toString();\n *     // => x:10, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyY = function (vec) {\n\tthis.y = vec.y;\n\treturn this;\n};\n\n/**\n * Copies another vector's X and Y components in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copy(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copy = function (vec) {\n\tthis.copyX(vec);\n\tthis.copyY(vec);\n\treturn this;\n};\n\n/**\n * Sets the vector to zero (0,0)\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *\t\t var1.zero();\n *     vec1.toString();\n *     // => x:0, y:0\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.zero = function () {\n\tthis.x = this.y = 0;\n\treturn this;\n};\n\n/**\n * Calculates the dot product of this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.dot(vec2);\n *     // => 23000\n *\n * @param {Victor} vector The second vector\n * @return {Number} Dot product\n * @api public\n */\nVictor.prototype.dot = function (vec2) {\n\treturn this.x * vec2.x + this.y * vec2.y;\n};\n\nVictor.prototype.cross = function (vec2) {\n\treturn (this.x * vec2.y ) - (this.y * vec2.x );\n};\n\n/**\n * Projects a vector onto another vector, setting itself to the result.\n *\n * ### Examples:\n *     var vec = new Victor(100, 0);\n *     var vec2 = new Victor(100, 100);\n *\n *     vec.projectOnto(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want to project this vector onto\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.projectOnto = function (vec2) {\n    var coeff = ( (this.x * vec2.x)+(this.y * vec2.y) ) / ((vec2.x*vec2.x)+(vec2.y*vec2.y));\n    this.x = coeff * vec2.x;\n    this.y = coeff * vec2.y;\n    return this;\n};\n\n\nVictor.prototype.horizontalAngle = function () {\n\treturn Math.atan2(this.y, this.x);\n};\n\nVictor.prototype.horizontalAngleDeg = function () {\n\treturn radian2degrees(this.horizontalAngle());\n};\n\nVictor.prototype.verticalAngle = function () {\n\treturn Math.atan2(this.x, this.y);\n};\n\nVictor.prototype.verticalAngleDeg = function () {\n\treturn radian2degrees(this.verticalAngle());\n};\n\nVictor.prototype.angle = Victor.prototype.horizontalAngle;\nVictor.prototype.angleDeg = Victor.prototype.horizontalAngleDeg;\nVictor.prototype.direction = Victor.prototype.horizontalAngle;\n\nVictor.prototype.rotate = function (angle) {\n\tvar nx = (this.x * Math.cos(angle)) - (this.y * Math.sin(angle));\n\tvar ny = (this.x * Math.sin(angle)) + (this.y * Math.cos(angle));\n\n\tthis.x = nx;\n\tthis.y = ny;\n\n\treturn this;\n};\n\nVictor.prototype.rotateDeg = function (angle) {\n\tangle = degrees2radian(angle);\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateTo = function(rotation) {\n\treturn this.rotate(rotation-this.angle());\n};\n\nVictor.prototype.rotateToDeg = function(rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateTo(rotation);\n};\n\nVictor.prototype.rotateBy = function (rotation) {\n\tvar angle = this.angle() + rotation;\n\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateByDeg = function (rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateBy(rotation);\n};\n\n/**\n * Calculates the distance of the X axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceX(vec2);\n *     // => -100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceX = function (vec) {\n\treturn this.x - vec.x;\n};\n\n/**\n * Same as `distanceX()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.absDistanceX(vec2);\n *     // => 100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceX = function (vec) {\n\treturn Math.abs(this.distanceX(vec));\n};\n\n/**\n * Calculates the distance of the Y axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => -10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceY = function (vec) {\n\treturn this.y - vec.y;\n};\n\n/**\n * Same as `distanceY()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => 10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceY = function (vec) {\n\treturn Math.abs(this.distanceY(vec));\n};\n\n/**\n * Calculates the euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distance(vec2);\n *     // => 100.4987562112089\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distance = function (vec) {\n\treturn Math.sqrt(this.distanceSq(vec));\n};\n\n/**\n * Calculates the squared euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceSq(vec2);\n *     // => 10100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceSq = function (vec) {\n\tvar dx = this.distanceX(vec),\n\t\tdy = this.distanceY(vec);\n\n\treturn dx * dx + dy * dy;\n};\n\n/**\n * Calculates the length or magnitude of the vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.length();\n *     // => 111.80339887498948\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.length = function () {\n\treturn Math.sqrt(this.lengthSq());\n};\n\n/**\n * Squared length / magnitude\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.lengthSq();\n *     // => 12500\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.lengthSq = function () {\n\treturn this.x * this.x + this.y * this.y;\n};\n\nVictor.prototype.magnitude = Victor.prototype.length;\n\n/**\n * Returns a true if vector is (0, 0)\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     vec.zero();\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isZero = function() {\n\treturn this.x === 0 && this.y === 0;\n};\n\n/**\n * Returns a true if this vector is the same as another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(100, 50);\n *     vec1.isEqualTo(vec2);\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isEqualTo = function(vec2) {\n\treturn this.x === vec2.x && this.y === vec2.y;\n};\n\n/**\n * # Utility Methods\n */\n\n/**\n * Returns an string representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toString();\n *     // => x:10, y:20\n *\n * @return {String}\n * @api public\n */\nVictor.prototype.toString = function () {\n\treturn 'x:' + this.x + ', y:' + this.y;\n};\n\n/**\n * Returns an array representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toArray();\n *     // => [10, 20]\n *\n * @return {Array}\n * @api public\n */\nVictor.prototype.toArray = function () {\n\treturn [ this.x, this.y ];\n};\n\n/**\n * Returns an object representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toObject();\n *     // => { x: 10, y: 20 }\n *\n * @return {Object}\n * @api public\n */\nVictor.prototype.toObject = function () {\n\treturn { x: this.x, y: this.y };\n};\n\n\nvar degrees = 180 / Math.PI;\n\nfunction random (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction radian2degrees (rad) {\n\treturn rad * degrees;\n}\n\nfunction degrees2radian (deg) {\n\treturn deg / degrees;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/victor/index.js\n// module id = 6\n// module chunks = 0","//\r\n// EconomyItem - structure public class to store data of player items\r\n//\r\n\r\nimport theSea from './theSea';\r\nimport SingletonClass from './singleton';\r\n\r\nexport default class EconomyItem\r\n{\r\n    public static jsonData:any;\r\n    public static maxItems:number = 56;  // there are 56 economy items currently\r\n    public type:number;    // the id into the json data for this item\r\n    public rarity:number;  // 0=grey(common), 1=green(uncommon), 2=blue(rare), 3=ltblue(consumable)\r\n    public maxStack:number = 1; // how many can stack in one unit\r\n    public size:number;    // how many squares this item consumes ion the inventory grid\r\n    public value:number;\r\n\r\n    constructor(type:number, rarity?:number)\r\n    {\r\n        this.type = type;\r\n        if (rarity)\r\n        {\r\n            this.rarity = rarity;\r\n        }\r\n        else // 85% common, 10% uncommon, 5% rare\r\n        {\r\n            var rand = theSea.getRandomIntInclusive(1,100);\r\n            if (rand <= 85)\r\n                this.rarity = 0;\r\n            else if (rand <= 95)\r\n                this.rarity = 1;\r\n            else\r\n                this.rarity = 2;\r\n        }\r\n\r\n        if (EconomyItem.jsonData)\r\n        {\r\n            this.size = EconomyItem.jsonData[this.type].size;\r\n            this.value = EconomyItem.jsonData[this.type].value;\r\n        }\r\n    }\r\n\r\n    public static setEconomyData(jsonData:any)\r\n    {\r\n        this.jsonData = jsonData;\r\n    }\r\n\r\n    public getMarketPrice()\r\n    {\r\n        var marketPrice,value;\r\n        // item price is in in the item data\r\n        value = EconomyItem.jsonData[this.type].value;\r\n        // modify this by the market rate at the current port\r\n        var port = SingletonClass.currentPort;\r\n        var marketData = SingletonClass.getPortMarketData(port);\r\n        //console.log(\"econItem getMarketPrice: value: \" + value + \" type: \" + this.type + \" marketData: \" + marketData);\r\n        marketPrice = Math.floor(value + Math.ceil(value *  marketData[this.type].rate / 100));\r\n        // return the modified price\r\n        return marketPrice;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/economyitem.ts","//\r\n// EconomyIcon class to override Sprite and provide visuals for the economic icons in the game\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport Victor = require('victor');\r\nimport theSea from './theSea';\r\nimport CompassRose from './compassrose';\r\nimport EconomyItem from './economyitem';\r\nimport * as filters from 'pixi-filters';\r\n\r\n//import {TweenMax, Linear} from 'gsap';\r\n\r\ndeclare var TweenMax:any;\r\ndeclare var Linear:any;\r\ndeclare var Power2:any;\r\ndeclare var Circ:any;\r\n\r\nexport const enum EcoType {\r\n    ANCHOR,\r\n    ANIMALHIDES,\r\n    BARREL\r\n}\r\n\r\nexport default class EconomyIcon extends PIXI.Container\r\n{\r\n    private type:number = 0;\r\n    private id:number;\r\n    private icon:PIXI.Sprite;   // the icon\r\n    private bg:PIXI.Sprite;     // background sprite: none(default), grey, green, blue \r\n    private rarity:number;      // 0 = grey, 1 = green, 2 = blue (common, uncommon, rare)\r\n    private barreled:boolean = false;\r\n    private glow:filters.GlowFilter;\r\n    private glowing:boolean=false;\r\n\r\n    constructor(type:EcoType,id:number,barreled:boolean=false,rarity:number)\r\n    {\r\n        super();\r\n        // create a sprite with the indicated type\r\n        this.type = type;\r\n        //this.texture = PIXI.Texture.fromFrame(EconomyIcon.jsonData[this.type].fileName);\r\n        this.icon = new PIXI.Sprite(PIXI.Texture.fromFrame(\"icon_Barrel.png\"));\r\n        this.addChild(this.icon);\r\n        this.pivot.x = 21;\r\n        this.pivot.y = 21;\r\n        this.id=id;\r\n        this.rarity = rarity;\r\n        if (!barreled)\r\n            this.loadImageByID(); // load a background and icon else will default to a barrel with no background\r\n        else\r\n            this.barreled = true;\r\n\r\n        this.glow = new filters.GlowFilter(10, 1, 1, 0x00FF00);\r\n    }\r\n\r\n    public getType()\r\n    {\r\n        return this.type;\r\n    }\r\n\r\n    public unBarrel()\r\n    {\r\n        if (this.barreled)\r\n        {\r\n            this.loadImageByID(); // create the proper icon and background\r\n            this.barreled = false;\r\n        }\r\n    }\r\n\r\n    private loadImageByID()\r\n    {\r\n        // our type is the index into the json data\r\n        if (EconomyItem.jsonData)\r\n        {\r\n            var s = EconomyItem.jsonData[this.type].fileName;\r\n            this.icon.texture = PIXI.Texture.fromFrame(s);\r\n            if (this.rarity == 0)\r\n                this.bg = new PIXI.Sprite(PIXI.Texture.fromFrame(\"iconBGgrey.png\"));\r\n            else if (this.rarity == 1)\r\n                this.bg = new PIXI.Sprite(PIXI.Texture.fromFrame(\"iconBGgreen.png\"));\r\n            else\r\n                this.bg = new PIXI.Sprite(PIXI.Texture.fromFrame(\"iconBGblue.png\"));\r\n            this.addChildAt(this.bg,0);\r\n        }\r\n    }\r\n\r\n    public getName()\r\n    {\r\n        return EconomyItem.jsonData[this.type].displayName;\r\n    }\r\n\r\n    public getPrice()\r\n    {\r\n        return EconomyItem.jsonData[this.type].value;\r\n    }\r\n\r\n    public throwOutAndBob()\r\n    {\r\n        // effect to throw the item out a bit on a curved path, random angle\r\n        // upon reaching destination it will bob (up and down) and rotate slightly back and forth\r\n        // simulating bobbing in water\r\n        var dir = new Victor(1,0); // straight right\r\n        var rand = theSea.getRandomIntInclusive(0,1);\r\n        var randDir;\r\n        var dirRads;\r\n        var x,y, midX, midY;\r\n\r\n        if (rand == 1) // throw right\r\n        {\r\n            dir.x = 1;\r\n            dir.y = -0.5; // down and right, then rottate ccw by rand point\r\n        }\r\n        else // throw left\r\n        {\r\n            dir.x = -1;\r\n            dir.y = 0.5; // up and left\r\n        }\r\n\r\n        randDir = theSea.getRandomIntInclusive(0,4) * 11.25; // random compass point\r\n        dirRads = CompassRose.getRads(randDir);\r\n        dir.rotate(dirRads);\r\n\r\n        x = this.x + dir.x * 115;\r\n        y = this.y + -dir.y * 115; \r\n\r\n        if (rand == 1)\r\n            midX = this.x + 57;\r\n        else    \r\n            midX = this.x - 57;\r\n            \r\n        midY = this.y - 115;\r\n\r\n        // move our position to this new x,y in an curve\r\n        TweenMax.to(this, \r\n                    1, \r\n                    {bezier:{type: \"thru\", curviness:1.5, values:[{x:this.x, y:this.y}, {x:midX,y:midY}, {x:x, y:y}]}, \r\n                    ease:Linear.easeOut,\r\n                    onComplete:this.bezierDone}\r\n                    );\r\n    }\r\n\r\n    public bezierDone = () => {\r\n        // when bezier done, bob in the water til clicked\r\n        console.log(\"bezierDone!\");\r\n        // now animate y up and down yoyo style\r\n        TweenMax.to(this,\r\n                    1.25,\r\n                    {y: this.y + 30,\r\n                     yoyo:true,\r\n                     repeat:-1,\r\n                     ease: Linear.easeInOut});\r\n        // and the rotate \r\n        TweenMax.to(this,\r\n            1.5,\r\n            {rotation: 0.523599,\r\n             yoyo: true,\r\n             repeat: -1,\r\n             ease: Linear.easeInOut});\r\n\r\n        this.interactive = true;\r\n        this.on(\"click\", this.clickHandler);\r\n    }\r\n\r\n    clickHandler = () => {\r\n        // send a note to the hud to collect us\r\n        var myEvent = new CustomEvent(\"floatingIconClick\",\r\n        {\r\n            'detail': this.id\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    public lootIcon(xp:number, yp:number)\r\n    {\r\n        console.log(\"lootIcon to: \" + xp + \",\" + yp);\r\n        TweenMax.killTweensOf(this);\r\n        TweenMax.to(this,1,{x:xp, y:yp,onComplete:this.lootDone});\r\n        TweenMax.to(this.scale, 1, {x:0,y:0})\r\n    }\r\n\r\n    lootDone = () => {\r\n        TweenMax.killTweensOf(this);\r\n        this.interactive = false;\r\n        // send a note to the hud to collect us\r\n        var myEvent = new CustomEvent(\"lootDone\",\r\n        {\r\n            'detail': this.id\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    public glowToggle()\r\n    {\r\n        if (!this.glowing)\r\n        {\r\n            this.filters = [this.glow];\r\n            this.glowing = true;\r\n        }\r\n        else\r\n        {\r\n            this.filters = [];\r\n            this.glowing = false;\r\n        }\r\n    }\r\n\r\n    public isGlowing()\r\n    {\r\n        return this.glowing;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/economyicon.ts","//\r\n// CompassRose class widget \r\n//  displays ship heading, cannon angle, and wind direction\r\n//  ship heading is interactive and allows the player to change the heading\r\n//  allows the player to adjust the cannon angle as well\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport Ship from './ship';\r\nimport Watch from './watch';\r\nimport Victor = require('victor');\r\n\r\nexport default class CompassRose extends PIXI.Container\r\n{\r\n    private compassBase:PIXI.Sprite; // base with 32 headings\r\n    private starCap:PIXI.Sprite;     // star cap to hide the bases of the layered needles beneath it\r\n    private needleHeading:PIXI.Sprite; // ship heading needle\r\n    private needleGhostHeading:PIXI.Sprite; // ghost needle for user to move to proposed new heading\r\n    private needleCannon:PIXI.Sprite; // cannon needle\r\n    private windIndicator:PIXI.Sprite;  // wind direction indicator\r\n    private static windDirection:number = 0;;       // direction wind is coming from (in degrees - 0 is due North)\r\n    private noGoArc:PIXI.Graphics;      // arc around wind direction for where boats cannot sail to\r\n    private lastWindChange:number;      // time stamp of last windchange\r\n    private periodWindChange:number;    // change the wind every priod (in milliseconds)\r\n    private trackingShip:Ship;\r\n    private animRot:number = 0;\r\n    private mouseDown:boolean = false;\r\n    private trackedNewHeading:number = 0;\r\n\r\n    public static getWindDirection()\r\n    {\r\n        return CompassRose.windDirection;\r\n    }\r\n\r\n    // init assumes it has its sprite assets available\r\n    public init()\r\n    {\r\n        this.compassBase = new PIXI.Sprite(PIXI.Texture.fromFrame(\"compassBase.png\"));\r\n        this.starCap = new PIXI.Sprite(PIXI.Texture.fromFrame(\"starRotate.png\"));\r\n        this.starCap.x = (this.compassBase.width - this.starCap.width) / 2;\r\n        this.starCap.y = (this.compassBase.height - this.starCap.height) / 2; // centered\r\n        \r\n        this.needleHeading = new PIXI.Sprite(PIXI.Texture.fromFrame(\"needleShip.png\"));\r\n        // this.needleHeading.pivot.x = this.needleHeading.width / 2;\r\n        // this.needleHeading.pivot.y = this.needleHeading.height;  // bottom center of sprite\r\n        this.needleHeading.anchor.x = 0.5;\r\n        this.needleHeading.anchor.y = 1;   // anchor at center bottom\r\n        this.needleHeading.x = 66;\r\n        this.needleHeading.y = 66;\r\n        this.needleHeading.rotation = CompassRose.getRads(15);\r\n\r\n        // the ghost heading needle\r\n        this.needleGhostHeading = new PIXI.Sprite(PIXI.Texture.fromFrame(\"needleShip.png\"));\r\n        this.needleGhostHeading.anchor.x = 0.5;\r\n        this.needleGhostHeading.anchor.y = 1;   // anchor at center bottom\r\n        this.needleGhostHeading.x = 66;\r\n        this.needleGhostHeading.y = 66;\r\n        this.needleGhostHeading.rotation = CompassRose.getRads(15);\r\n        this.needleGhostHeading.visible = false;\r\n        this.needleGhostHeading.alpha = 0.67;\r\n\r\n        this.needleCannon = new PIXI.Sprite(PIXI.Texture.fromFrame(\"needleCannon.png\"));\r\n        // this.needleCannon.pivot.x = this.needleCannon.width / 2;\r\n        // this.needleCannon.pivot.y = this.needleCannon.height;  // bottom center of sprite\r\n        this.needleCannon.anchor.x = 0.5;\r\n        this.needleCannon.anchor.y = 1;   // anchor at center bottom\r\n        this.needleCannon.x = 66;\r\n        this.needleCannon.y = 66; // centered on compass base\r\n        this.needleCannon.rotation = CompassRose.getRads(105);\r\n\r\n        this.windIndicator = new PIXI.Sprite(PIXI.Texture.fromFrame(\"WindIndicator.png\"));\r\n        // this.windDirection.pivot.x = 29;\r\n        // this.windDirection.pivot.y = 183;  // will rotate around this point against the compass base background\r\n        this.windIndicator.anchor.x = 0.5;\r\n        this.windIndicator.anchor.y = 2.5;\r\n        this.windIndicator.x = 66; //this.compassBase.width / 2 - this.windDirection.width / 2;\r\n        this.windIndicator.y = 66; //17; // magic number\r\n\r\n        CompassRose.windDirection = 0; // due north\r\n\r\n\r\n\r\n        this.addChild(this.compassBase);    // z order will be in child order, back to front\r\n        this.setNoGo(60);\r\n        this.addChild(this.windIndicator);\r\n        this.addChild(this.needleHeading);\r\n        this.addChild(this.needleGhostHeading);\r\n        this.addChild(this.needleCannon);\r\n        this.addChild(this.starCap);\r\n\r\n        this.needleHeading.interactive = true;\r\n        this.needleHeading.on(\"mousedown\", this.mouseDownHandler);\r\n\r\n        this.needleHeading.on(\"mousemove\", this.mouseMoveHandler);\r\n        this.needleHeading.on(\"mouseup\", this.mouseUpHandler);\r\n\r\n        this.pivot.x = this.compassBase.x  + this.compassBase.width/2;\r\n        this.pivot.y = this.compassBase.y  + this.compassBase.height/2;\r\n    }\r\n\r\n    private endSetHeading() {\r\n        if (this.mouseDown == true) {\r\n            this.mouseDown = false;\r\n\r\n            //console.log(\"CompassRose: END ghost heading\");\r\n            var myEvent = new CustomEvent(\"changeHeading\",\r\n            {\r\n                'detail': this.trackedNewHeading\r\n            });\r\n    \r\n            window.dispatchEvent(myEvent);\r\n\r\n        }\r\n        // else ignore - might be called as mouse moves without mousedown\r\n    }\r\n\r\n    //\r\n    // angleToWind: in degrees - specifies angle off the wind a ship can point at maximum\r\n    // trackedHeading: in degrees (Cartesian) to check for validity\r\n    // \r\n    public static isValidHeading(angleToWind:number, trackedHeading:number)\r\n    {\r\n        // heading is valid if it is not within angleToWind degrees of the current wind direction\r\n        var maxWind = CompassRose.windDirection + angleToWind;\r\n        var minWind = CompassRose.windDirection - angleToWind;\r\n        var tracked = CompassRose.convertCartToCompass(trackedHeading);\r\n        \r\n        // valid angles are 0 -> 360\r\n        if (maxWind > 0 && minWind > 0 && maxWind < 360)\r\n        {\r\n            //console.log(\"minWind: \" + minWind + \" maxWind: \" + maxWind + \" tracked: \" + tracked.toFixed(2));\r\n            if (tracked >= minWind && tracked <= maxWind)\r\n                return true;\r\n            else\r\n                return false;\r\n        }\r\n        else\r\n        {\r\n            // one has crossed the zero degree threshold, convert and do some shenanigans\r\n            if (minWind < 0)\r\n                minWind = 360 + minWind; // ie -15 would become 345\r\n            if (maxWind > 360)\r\n                maxWind = maxWind - 360; // ie 375 would become 15\r\n\r\n            if (minWind > maxWind)\r\n            {\r\n                var temp = maxWind;\r\n                maxWind = minWind;\r\n                minWind = temp;\r\n            }\r\n\r\n            //console.log(\"minWind: \" + minWind + \" maxWind: \" + maxWind + \" tracked: \" + tracked.toFixed(2));\r\n\r\n            if (tracked >= minWind && tracked <= maxWind)\r\n                return true;\r\n            else\r\n                return false;  \r\n        }\r\n    }\r\n\r\n    mouseMoveHandler = (e:any) => {\r\n        \r\n        if (e.data.buttons == 0)\r\n            this.endSetHeading();\r\n\r\n        // mouse has moved, find the angle relative to the center of the compass and rotate the ghost image there\r\n        if (this.mouseDown) {\r\n            this.needleGhostHeading.visible = true;\r\n            this.noGoArc.visible = true;\r\n            // get local coords from mouse coords\r\n            let locPt = this.toLocal(new PIXI.Point(e.data.global.x,e.data.global.y));\r\n            // get a vector from these coords\r\n            let vic = new Victor(locPt.x - this.compassBase.width/2, -(locPt.y - this.compassBase.height/2));\r\n            let angDeg = vic.angleDeg();\r\n            this.needleGhostHeading.rotation = CompassRose.getRads(CompassRose.convertCartToCompass(angDeg));\r\n            //console.log(\"Mouse Degrees: \" + vic.angleDeg());\r\n            this.trackedNewHeading = angDeg;\r\n            if (CompassRose.isValidHeading(this.trackingShip.getAngleToWind(), this.trackedNewHeading))\r\n                this.noGoArc.visible = false;\r\n            else\r\n                this.noGoArc.visible = true;\r\n        }\r\n\r\n    }\r\n\r\n    mouseDownHandler = (e:any) => {\r\n        if (e.target == this.needleHeading)\r\n        {\r\n            this.mouseDown = true;\r\n            //console.log(\"CompassRose: START ghost heading\");\r\n        }\r\n        \r\n    }\r\n\r\n    mouseUpHandler = (e:any) => {\r\n        // release mouse no matter what the e.target was\r\n        this.endSetHeading();\r\n    }\r\n\r\n    // creates the nogo arc\r\n    // degrees is closest point to wind (total arc will be degrees*2)\r\n    private setNoGo(degrees:number)\r\n    {\r\n        // make a circular arc based off percentDone  100 will be no mask.. reveals clockwise as percent increases\r\n        let degs = degrees * 2;\r\n        let rads = CompassRose.getRads(degs);\r\n\r\n        if (this.noGoArc)\r\n        {\r\n            this.removeChild(this.noGoArc);\r\n            this.noGoArc.destroy();\r\n        }\r\n\r\n        var arc = new PIXI.Graphics();\r\n        arc.beginFill(0xff0000);\r\n        arc.moveTo(this.compassBase.width/2, this.compassBase.height/2);\r\n        arc.arc(this.compassBase.width/2, this.compassBase.height/2, this.compassBase.width/2, 0, rads, false); // cx, cy, radius, angle, endAngle, anticlockwise bool\r\n        arc.endFill();\r\n        arc.pivot.x = this.compassBase.width/2;\r\n        arc.pivot.y = this.compassBase.height/2;\r\n        arc.x = this.compassBase.width/2;\r\n        arc.y = this.compassBase.height/2;\r\n        // rotate arc to straddle the wind direction\r\n        arc.rotation = CompassRose.getRads(CompassRose.windDirection - 90 - degrees);\r\n        \r\n        \r\n        this.noGoArc = arc;\r\n        this.noGoArc.alpha = 0.33;\r\n        this.addChildAt(this.noGoArc,1); //1 is just above 0, the compassBase\r\n        this.noGoArc.visible = false;\r\n    }\r\n\r\n    public static getRads(degrees:number)\r\n    {\r\n        return degrees * Math.PI / 180;\r\n    }\r\n\r\n    public static getDegs(rads:number)\r\n    {\r\n        return rads * (180 / Math.PI);     \r\n    }\r\n\r\n    public static convertCartToCompass(degrees:number)\r\n    {\r\n        // take a cartesian heading in degrees (0 is along the x axis \"to the right\" and sweeps counter clockwise)\r\n        // and convert it to compass rotation (0 is along the y axis \"up\" and sweeps clockwise)\r\n\r\n        // cart will be from 0 -> 180 or 0 -> -180 for top or bottom hemisphere\r\n        // compass rotations are just 0 -> 360\r\n\r\n        let compassAngle = 0;\r\n\r\n        if (degrees < 0) \r\n        {\r\n            compassAngle = 90 + Math.abs(degrees);    \r\n        }\r\n        else if (degrees > 90)\r\n        {\r\n            compassAngle = 180 - degrees + 270;\r\n        }\r\n        else\r\n        {\r\n            compassAngle = 90 - degrees;\r\n        }\r\n\r\n        return compassAngle;\r\n    }\r\n\r\n    // set the ship we should track for heading info\r\n    public trackShip(ship:Ship)\r\n    {\r\n        this.trackingShip = ship;\r\n        this.setNoGo(this.trackingShip.getAngleToWind());\r\n    }\r\n\r\n    public update()\r\n    {\r\n        if (this.trackingShip)\r\n            this.needleHeading.rotation = CompassRose.getRads(CompassRose.convertCartToCompass(this.trackingShip.getHeading()));\r\n        // this.animRot += 0.1;\r\n        // this.needleHeading.rotation = this.getRads(this.animRot);\r\n        // console.log(\"HeadingNeedle rotation: \" + this.animRot.toFixed(2));\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/compassrose.ts","//\r\n// popMsgBox class for brief important messages to the user\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport SingletonClass from './singleton';\r\n\r\n\r\nexport default class popMsgBox extends PopUp\r\n{\r\n    private infoGraphic:PIXI.Container; // holds character art and mask, or just the art\r\n    private character:PIXI.Sprite;      // the character to display in the infoGraphic\r\n    private charMask:PIXI.Sprite;       // the mask to apply to the character\r\n    private title:PIXI.Text;\r\n    private body:PIXI.Text;\r\n    private strTitle:string;\r\n    private strBody:string;\r\n    private charNum:number;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public initMsg(character:number, title:string, body:string)\r\n    {\r\n        this.charNum=character;\r\n        this.strTitle = title;\r\n        this.strBody = body;\r\n    }\r\n\r\n    private msgInit()\r\n    {\r\n        // load and position our graphics\r\n        this.bg = new PIXI.Sprite(PIXI.Texture.fromFrame(\"msgBoxBack.png\"));\r\n        this.addChild(this.bg);\r\n        this.btnX = new Button( PIXI.Texture.fromFrame(\"Btn_Ex.png\"));\r\n        this.btnX.anchor.x = this.btnX.anchor.y = 0.5;\r\n\r\n        this.btnX.x = 374;\r\n        this.btnX.y = 133;\r\n        this.btnX.width = 30;\r\n        this.btnX.height = 28; // slightly smaller btnX\r\n\r\n        this.addChild(this.btnX);\r\n        this.btnX.on('click', this.btnXClick);\r\n    }\r\n\r\n    public init()\r\n    {\r\n        // do not call the super init, instead do our own init\r\n        this.msgInit();\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 18,\r\n            fill: 'black',\r\n            wordWrap: true,\r\n            wordWrapWidth: 239\r\n        });\r\n\r\n        this.body = new PIXI.Text(this.strBody, styleb);\r\n        this.body.x = 147;\r\n        this.body.y = 43;\r\n        this.addChild(this.body);\r\n\r\n        this.title = new PIXI.Text(this.strTitle, style);\r\n        this.title.x = this.body.x + this.body.width / 2 - this.title.width / 2;\r\n        this.title.y = 11;\r\n        this.addChild(this.title);\r\n\r\n        // now add the infoGraphic\r\n        this.infoGraphic = new PIXI.Container();\r\n        // switch on character, for now just load female\r\n        this.character = new PIXI.Sprite(PIXI.Texture.fromFrame(\"charPirateFemale.png\"));\r\n        this.charMask = new PIXI.Sprite(PIXI.Texture.fromFrame(\"mask2.png\"));\r\n        this.infoGraphic.addChild(this.character);\r\n        this.infoGraphic.addChild(this.charMask);\r\n        this.character.x = this.charMask.width / 2 - this.character.width/2; // center under mask\r\n        this.character.y = -20;\r\n        this.infoGraphic.x = 14;\r\n        this.infoGraphic.y = 28;\r\n        this.addChild(this.infoGraphic);\r\n\r\n        this.infoGraphic.mask = this.charMask; // set the mask\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popmsgbox.ts","//\r\n// ship class to handle all things... boat!\r\n//\r\n\r\nimport GameObject from './gameobject';\r\nimport { ObjectType } from './gameobject';\r\nimport Victor = require('victor');\r\nimport CompassRose from './compassrose';\r\nimport Island from './island';\r\nimport theSea from './theSea';\r\nimport FXManager from './fxmanager';\r\nimport CannonBall from './cannonball';\r\nimport { BallType } from './cannonball';\r\nimport EconomyItem from './economyitem';\r\n\r\nexport const enum ShipType {\r\n    SLOOP,\r\n    SCHOONER,\r\n    XEBEC,\r\n    BRIG,\r\n    CORVETTE\r\n}\r\n\r\ndeclare var PolyK: any;\r\ndeclare var TweenMax:any;\r\ndeclare var Linear:any;\r\n\r\nexport default class Ship extends GameObject\r\n{\r\n    private heading:Victor; // normalized ship direction\r\n    private degreeHeading:number; // heading expressed as Cartesian degrees\r\n    private targetHeading:number;\r\n    private toLarboard:boolean = false; // which direction to turn to targetHeading\r\n    private headingTicks:number = 0;\r\n    \r\n    private lastTime:number; // record last timestamp\r\n\r\n    private speed:number;       // scalar for speed, expressed as pixels/second\r\n    private targetSpeed:number; // target speed also in pixels per second\r\n    private maxSpeed:number;    // ship characteristic read from data, in pixels/second\r\n\r\n    private shipName:string;    // all boats must have a name! ;)\r\n    private sailState:number; // 0 = down, 1 = full sail, 2 = half sail\r\n    private polyNum:number= 0; // current heading corresponds to which index in the polyData array?\r\n\r\n    private shipType:ShipType;\r\n\r\n    private usingFrame:number; // frame number in use, cached to prevent texture swap spam\r\n    private cartPolyData8:Array<Array<number>> = []; // an array of 8 arrays converted to cartesian\r\n    private cartKeelData:Array<number> = [];\r\n    private jsonData:any;      // object handed to us from the json loader\r\n\r\n    // boat handling characteristics\r\n    private angularSpeed:number = 30;   // turn rate in degrees/second\r\n    private angleToWind:number = 60;    // closest angle to the wind this ship can sail upon\r\n\r\n    private aGround:boolean = false;    // are we aground? set by theSea main loop\r\n    private inIrons:boolean = false;    // are we inIrons? set by compassRose\r\n\r\n    private achtung:PIXI.Sprite;        // exclaimation sprite indicating error condition\r\n    private errorDisplayed:boolean = false;  // is achtung up?\r\n\r\n    private isles:Array<GameObject>;    // reference to theSea island array\r\n    private aiCurrentObstacle:GameObject; // an isle this ship is currently avoiding\r\n    private aiAvoidToLarboard:boolean;    // preferred direction around said obstacle\r\n    private aiDirectObstacles:Array<GameObject>; // list of isles directHeading intersects\r\n\r\n    private isAI:boolean = false;       // is this boat running AI?\r\n    private aiTarget:PIXI.Point;        // the x,y coord of where this AI boat is trying to go\r\n    private aiArrived:boolean = false;  // flag used to determine if ai has arrived at its target destination\r\n    private aiStarted:boolean = false;  // flag for first time update\r\n    private aiTargetSprite:PIXI.Sprite;\r\n    private aiBoatPos:PIXI.Sprite;\r\n    private showTarget:boolean = false;\r\n    private aiLastHeading:number = 0;   // time of last call to aiSetHeading\r\n    private aiRayCastArray:Array<PIXI.Sprite> = []; // 32 dots to display potentially 32 ray casts during aiSetHeading\r\n    private aiNextPlot:number = -1;     // init to -1 to signal initialization on first call\r\n    private refPt:PIXI.Point;\r\n\r\n    private tweenVars:any;\r\n    private fxManager:FXManager;\r\n\r\n    // ship stats\r\n    private statHull:number = 12;\r\n    private statHullMax:number = 12;\r\n    private statSails:number = 0;\r\n    private statSailsMax:number = 0;\r\n    private statCrew:number = 0;            // feature idea, assign bits to crew to index into name index... crew can have name and exp/level waster/able/midshipman etc\r\n    private statCrewMax:number = 0;\r\n    private wrecked:boolean = false;\r\n    private smokeID:number = 0;\r\n\r\n    private shipsHold:Array<EconomyItem> = [];        // just an array of item ids EconomyIcon carries the data\r\n    private coins:number;                       // number of treasure doubloons\r\n    private shipsHoldCapacity:number = 40;       // in \"squares\" ex Corvette is 10x4 hold so 40 icons\r\n\r\n    private magBall:number;                 // how many ball shoit the ship has left\r\n    private magBallMax:number = 15;         // maximum number of ball shot ship can carry\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n        this.objType = ObjectType.SHIP;\r\n        this.shipType = ShipType.CORVETTE; \r\n        this.sailState = 0; // down\r\n        this.speed = 0;\r\n        this.targetSpeed = 0;\r\n        this.heading = new Victor(1,0); // east\r\n        this.degreeHeading = this.heading.angleDeg(); \r\n        this.targetHeading = this.degreeHeading;\r\n        this.lastTime = 0;\r\n        this.refPt = new PIXI.Point();\r\n        this.tweenVars = { speed: 0 };\r\n        this.aiDirectObstacles = []; // empty array\r\n\r\n        for (var i=0; i<8; i++) {\r\n            this.cartPolyData8.push(new Array<number>());\r\n        }\r\n\r\n        this.magBall = this.magBallMax;\r\n    }\r\n\r\n    public setFXManager(fxman:FXManager)\r\n    {\r\n        this.fxManager = fxman;\r\n    }\r\n\r\n    // args:\r\n    // p - polygonal data of type any for collisions with PolyK library\r\n    // ai - flag if this boat is ai\r\n    public init(p:any, isles:Array<GameObject>, isAI:boolean=false, pos?:PIXI.Point, aiTarget?:PIXI.Point)\r\n    {\r\n        this.sprite = new PIXI.Sprite(); // an empty sprite\r\n        this.setPolyData(p);\r\n        this.matchHeadingToSprite(); // initialize the texture its using\r\n        this.shipName = \"Nutmeg of Consolation\"; \r\n        this.achtung = new PIXI.Sprite(PIXI.Texture.fromFrame(\"achtung.png\"));\r\n        // do not add achtung until needed\r\n        this.aiTargetSprite = new PIXI.Sprite(PIXI.Texture.fromFrame(\"PointRed.png\"));\r\n        this.aiTargetSprite.anchor.x = this.aiTargetSprite.anchor.y = 0.5;\r\n\r\n        // create AI ray cast visuals\r\n        for (var i=0; i<32; i++)\r\n            this.aiRayCastArray.push(new PIXI.Sprite(PIXI.Texture.fromFrame(\"PointRed.png\")));\r\n\r\n        this.aiBoatPos = new PIXI.Sprite(PIXI.Texture.fromFrame(\"PointRed.png\"));\r\n        this.aiBoatPos.anchor.x = this.aiBoatPos.anchor.y = 0.5;\r\n        \r\n        // set position if given\r\n        if (pos) {\r\n            this.sprite.x = pos.x - this.refPt.x;\r\n            this.sprite.y = pos.y - this.refPt.y;\r\n        }\r\n\r\n        this.isles = isles; // set the island array for AI use\r\n        this.isAI = isAI; \r\n        if (isAI) // set the destination for this AI boat\r\n        {\r\n            if (aiTarget)\r\n                this.aiTarget = new PIXI.Point(aiTarget.x, aiTarget.y);\r\n            else\r\n                this.aiTarget = new PIXI.Point(6200,2600); // water north of guadalupe\r\n        }\r\n    }\r\n\r\n    private plotPoint(x:number, y:number)\r\n    {\r\n        var debug = 0;\r\n        if (debug==0)\r\n            return; // stop displaying debug info TODO: make this switchable with debug switch mayhap\r\n\r\n        if (this.aiNextPlot >= 32)\r\n        {\r\n            console.log(\"out of Plot Points!\");\r\n            return;\r\n        }\r\n\r\n        this.aiRayCastArray[this.aiNextPlot].x = x;\r\n        this.aiRayCastArray[this.aiNextPlot].y = y;\r\n        this.aiRayCastArray[this.aiNextPlot].visible = true;\r\n        this.aiNextPlot++;\r\n        //console.log(\"plotPont: \" + x.toFixed(0) + \",\" + y.toFixed(0));\r\n    }\r\n\r\n    private resetPlots()\r\n    {\r\n        if (this.aiNextPlot = -1) // first time in reset, add all sprites to parent\r\n        {\r\n            for (var k=0;k<32;k++) {\r\n                this.sprite.parent.addChild(this.aiRayCastArray[k]);\r\n                this.aiRayCastArray[k].anchor.x = this.aiRayCastArray[k].anchor.y = 0.5;\r\n            }\r\n        }\r\n        this.aiNextPlot = 0;\r\n        for (var i=0; i<32; i++)\r\n            this.aiRayCastArray[i].visible = false;\r\n    }\r\n\r\n    private calcNewHeading(original:Victor, offset:number)\r\n    {\r\n        var newVic:Victor = original.clone();\r\n        newVic.rotate(CompassRose.getRads(offset));\r\n        newVic.normalize();\r\n        return newVic;\r\n    }\r\n\r\n    private getVectorAngleDegs(p1:Victor, p2:Victor)\r\n    {\r\n        // angle in degrees\r\n        var angleDeg = Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;\r\n        return angleDeg;\r\n    }\r\n\r\n    private getVectorAngle(p1:Victor, p2:Victor)\r\n    {\r\n        var angleRadians = Math.atan2(p2.y - p1.y, p2.x - p1.x);\r\n        return angleRadians;   \r\n    }\r\n\r\n    private getSignedAngle(source:Victor, compare:Victor)\r\n    {\r\n        var a2 = Math.atan2(source.y, source.x);\r\n        var a1 = Math.atan2(compare.y, compare.x);\r\n        var sign = a1 > a2 ? 1 : -1;\r\n        var angle = a1 - a2;\r\n        var K = -sign * Math.PI * 2;  // adjusts for crossing the 2PI threashold\r\n        var angle = (Math.abs(K + angle) < Math.abs(angle))? K + angle : angle;\r\n\r\n        // still in radians at this point\r\n        return angle;\r\n    }\r\n\r\n    // get new heading around passed in heading that avoids our current obstacle by minAngle degrees at minimum\r\n    private aiGetHeadingAroundThreat(heading:Victor, minAngle:number)\r\n    {\r\n        let newHeading:Victor = new Victor(0,0);\r\n        var goodHeadings:Array<Victor> = [];\r\n        var dropPt = false;\r\n\r\n        // cast rays from heading in chosen direction in one degree increments \r\n        // save all successfull rays into an array\r\n        // use the minAngle-th ray as our heading \r\n        for(var i=0; i<180; i++){\r\n            newHeading = this.calcNewHeading(heading, i); \r\n            if (i%6==0) dropPt = true;\r\n            else dropPt = false;\r\n            if (this.checkHeadingVSObstacle(newHeading, dropPt, false) && \r\n                CompassRose.isValidHeading(this.angleToWind, newHeading.angleDeg())) {\r\n                goodHeadings.push(newHeading);\r\n            }\r\n        }\r\n\r\n        if (goodHeadings.length == 0)\r\n        {\r\n            return null;\r\n        } else {\r\n            // return the minAngle-th element\r\n            if (minAngle > goodHeadings.length)\r\n                return goodHeadings[goodHeadings.length-1]; // the last element is the best we can do\r\n            else\r\n                return goodHeadings[minAngle];\r\n        }\r\n    }\r\n\r\n    private checkHeadingVSObstacle(heading:Victor, dropPoint:boolean=false, useMinDist:boolean=true)\r\n    {\r\n        var x,y,px,py;\r\n        let iscc = {dist:0, edge:0, norm:{x:0, y:0}, refl:{x:0, y:0}};\r\n        x = this.sprite.x + this.refPt.x;\r\n        y = this.sprite.y + this.refPt.y;\r\n        px = x;\r\n        py = y;\r\n        y = 8192 - y;\r\n        var DIST = 300;\r\n\r\n        let retObj = PolyK.Raycast(this.aiCurrentObstacle.getCartPolyData(), x, y, heading.x, heading.y, iscc);\r\n        if (!retObj) iscc.dist = 10000;\r\n        if (useMinDist == true && iscc.dist < DIST) {   \r\n            if (dropPoint == true) {\r\n                px += heading.x * iscc.dist;\r\n                py += -heading.y * iscc.dist;\r\n                this.plotPoint(px,py);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        if (useMinDist == false) { // return hit at any distance less than 10000\r\n            if (iscc.dist < 10000)\r\n            {\r\n                if (dropPoint == true) {\r\n                    px += heading.x * iscc.dist;\r\n                    py += -heading.y * iscc.dist;\r\n                    this.plotPoint(px,py);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // no hit\r\n        if (dropPoint == true)\r\n        {\r\n            this.plotPoint(px,py);        \r\n            px += this.heading.x * DIST;\r\n            py += -this.heading.y * DIST;\r\n        }\r\n\r\n        return true;        \r\n    }\r\n\r\n    private checkCurrentHeading(directDist:number, dropPoint:boolean=false)\r\n    {\r\n        var x,y,px,py;\r\n        let iscc = {dist:0, edge:0, norm:{x:0, y:0}, refl:{x:0, y:0}};\r\n        x = this.sprite.x + this.refPt.x;\r\n        y = this.sprite.y + this.refPt.y;\r\n        px = x;\r\n        py = y;\r\n        y = 8192 - y;\r\n        var DIST = 300;\r\n\r\n        // loop thru the isles... see if we hit\r\n        for (let isle of this.isles)\r\n        {\r\n            //console.log(\"isle data contains: \" + isle.getCartPolyData().length + \" entries\" ); \r\n            let retObj = PolyK.Raycast(isle.getCartPolyData(), x, y, this.heading.x, this.heading.y, iscc);\r\n            if (!retObj) iscc.dist = 10000;\r\n            if (iscc.dist < DIST && iscc.dist < directDist) { // if our direct route is shorter, not a problem   \r\n                // set this isle as our current threat\r\n                this.aiCurrentObstacle = isle;\r\n                \r\n                if (dropPoint == true) {\r\n                    px += this.heading.x * iscc.dist;\r\n                    py += -this.heading.y * iscc.dist;\r\n                    this.plotPoint(px,py);\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }  \r\n\r\n        // no hit\r\n        if (dropPoint == true)\r\n        {\r\n            this.plotPoint(px,py);        \r\n            px += this.heading.x * DIST;\r\n            py += -this.heading.y * DIST;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // populate list of isles that intersect our direct heading\r\n    private checkDirectHeading(dropPoint:boolean=false)\r\n    {\r\n        // step 0 - calculate our direct heading to aiTarget\r\n        let diffX = this.aiTarget.x - (this.sprite.x + this.refPt.x);\r\n        let diffY = ((8192 - this.aiTarget.y) - (8192 - (this.sprite.y + this.refPt.y))); // y is flipped in cartesian\r\n        let directHeading = new Victor( diffX, diffY );\r\n        let directDist = directHeading.magnitude();\r\n        directHeading.normalize();\r\n\r\n        var x,y,px,py;\r\n        let iscc = {dist:0, edge:0, norm:{x:0, y:0}, refl:{x:0, y:0}};\r\n        x = this.sprite.x + this.refPt.x;\r\n        y = this.sprite.y + this.refPt.y;\r\n        px = x;\r\n        py = y;\r\n        y = 8192 - y;\r\n\r\n        // clear our stored array\r\n        delete this.aiDirectObstacles;\r\n        this.aiDirectObstacles = [];\r\n\r\n        // loop thru the isles... see if we hit\r\n        for (let isle of this.isles)\r\n        {\r\n            //console.log(\"isle data contains: \" + isle.getCartPolyData().length + \" entries\" ); \r\n            let retObj = PolyK.Raycast(isle.getCartPolyData(), x, y, directHeading.x, directHeading.y, iscc);\r\n            if (!retObj) iscc.dist = 10000;\r\n            if (iscc.dist < 10000) {   \r\n                // set this isle as our current threat\r\n\r\n                // if distance to our target is less than distance to obstruction, then we have hit an island behind our targt, dont add\r\n                if (iscc.dist < directDist)\r\n                    this.aiDirectObstacles.push(isle);\r\n\r\n                if (dropPoint == true) {\r\n                    px += this.heading.x * iscc.dist;\r\n                    py += -this.heading.y * iscc.dist;\r\n                    this.plotPoint(px,py);\r\n                }\r\n            }\r\n        } \r\n    }\r\n\r\n    private aiSetHeading ()\r\n    {\r\n        // step 0 - calculate our direct heading to aiTarget\r\n        let diffX = this.aiTarget.x - (this.sprite.x + this.refPt.x);\r\n        let diffY = ((8192 - this.aiTarget.y) - (8192 - (this.sprite.y + this.refPt.y))); // y is flipped in cartesian\r\n        let directHeading = new Victor( diffX, diffY );\r\n        let directDist = directHeading.magnitude();\r\n        directHeading.normalize();\r\n        var newHeading;\r\n        var newHeadingAng;\r\n        var up:Victor = new Victor(0,1);\r\n        var angleOffDirect = this.getSignedAngle(up, directHeading);\r\n\r\n        //console.log(\"Beging aiSetHeading\");\r\n\r\n        if (angleOffDirect >= 0)\r\n            this.aiAvoidToLarboard = true;\r\n        else\r\n            this.aiAvoidToLarboard = false;\r\n\r\n        this.resetPlots();\r\n\r\n        // step 1\r\n        // raycast our current heading\r\n        // if obstacle within minDistance, make this obstacle our current threat\r\n        if (this.checkCurrentHeading(directDist) == false)\r\n        {\r\n            // our direct heading has struck an island, aiCurrentObstacle has been set\r\n\r\n            // find heading around this obstacle in given direction around our current heading\r\n            // with a minimum of 5 degrees of clearance\r\n            newHeading = this.aiGetHeadingAroundThreat(directHeading, 10);\r\n            //console.log(\"Current heading hit obstacle, avoiding!\");\r\n        } else {\r\n            //console.log(\"Current heading fine, trying direct heading...\");\r\n            // step 2\r\n            // raycast our direct heading and determine if anything blocks our course\r\n            this.checkDirectHeading();\r\n            if (this.aiDirectObstacles.length == 0)\r\n            {\r\n                // set directHeading\r\n                newHeading = directHeading;\r\n                //console.log(\"direct heading clear, setting directHeading\");\r\n            } else { // we have isles in the obstacle list\r\n                // if yes, see if our aiObstacle is in the list\r\n                var islefound = false;\r\n                for(var i=0; i<this.aiDirectObstacles.length; i++)\r\n                    if (this.aiDirectObstacles[i] == this.aiCurrentObstacle){\r\n                        islefound=true;\r\n                        break;\r\n                    }\r\n                // if no, set directHeading\r\n                if (islefound)\r\n                {\r\n                    //console.log(\"aiObstacle still between us and target, continue to avoid\");\r\n                    // our aiobstacle is still between us and our target, continue to avoid it\r\n                    newHeading = this.aiGetHeadingAroundThreat(directHeading, 10);\r\n                }\r\n                else // it is no longer in our way set direct heading\r\n                {\r\n                    //console.log(\"aiObstacle cleared, setting directHeading\");\r\n                    newHeading = directHeading;\r\n                    this.aiCurrentObstacle = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (newHeading == null){\r\n            // couldnt find heading.. put up achtung\r\n            //console.log(\"Could not find good heading, stopping!\");\r\n            this.showAchtung();\r\n            this.allStop();\r\n            this.aiArrived = true;\r\n        } else {\r\n            newHeadingAng = newHeading.angleDeg();\r\n            if (!CompassRose.isValidHeading(this.angleToWind, newHeadingAng))\r\n            {\r\n                //console.log(\"newHeading into Wind! Laying to off wind angle!\");\r\n                newHeading = this.getSmallestHeadingOffwind(newHeading);\r\n                newHeadingAng = newHeading.angleDeg();\r\n                this.changeHeading(newHeadingAng);\r\n            }\r\n            else {\r\n                this.changeHeading(newHeadingAng); // changes targetHeading inside function\r\n            }\r\n            //console.log(\"aiSetHeading to: \" + CompassRose.convertCartToCompass(this.targetHeading).toFixed(2));\r\n            this.matchHeadingToSprite(); \r\n        }\r\n    }\r\n\r\n    private getSmallestHeadingOffwind(heading:Victor)\r\n    {\r\n        // heading is into the wind, return the smallest vector laying off the wind\r\n        var rVector = new Victor(0,0);\r\n        var lVector = new Victor(0,0);\r\n        var angle = 90; // ask compass rose for a cartesian wind angle\r\n        var rAngle, lAngle, hAngle;\r\n\r\n        // get angle of wind to starboard\r\n        angle = 90 - this.angleToWind - 1;\r\n        rVector.x=Math.cos(CompassRose.getRads(angle));\r\n        rVector.y=Math.sin(CompassRose.getRads(angle));\r\n        rAngle = this.getVectorAngleDegs(rVector,heading);\r\n\r\n        // get angle of wind to larboard\r\n        angle = 90 + this.angleToWind + 1;\r\n        lVector.x=Math.cos(CompassRose.getRads(angle));\r\n        lVector.y=Math.sin(CompassRose.getRads(angle));\r\n        lAngle = this.getVectorAngleDegs(lVector,heading);\r\n\r\n        hAngle = CompassRose.convertCartToCompass(heading.angleDeg());\r\n        var rA, lA;\r\n        rA = CompassRose.convertCartToCompass(rVector.angleDeg());\r\n        lA = CompassRose.convertCartToCompass(lVector.angleDeg());\r\n\r\n        //console.log(\"smallestAngOffWind: heading: \" + hAngle.toFixed(2) + \" rAngle: \" + rVector.angleDeg().toFixed(2) + \" lAngle: \" + lA.toFixed(2) + \"rDiff: \" + rAngle.toFixed(2) + \" lDiff: \" + lAngle.toFixed(2));\r\n        if (Math.abs(rAngle) < Math.abs(lAngle))\r\n            return rVector;\r\n        else\r\n            return lVector;\r\n\r\n    }\r\n\r\n    public setPolyData(p:any) {\r\n        // p is the ship record from shipdata.json\r\n        this.jsonData = p;\r\n        this.sprite.name = this.jsonData[\"fileName\"];\r\n        this.maxSpeed = this.jsonData[\"maxHullSpeed\"];\r\n    }\r\n\r\n    public setIslandArray(islands:Array<GameObject>)\r\n    {\r\n        this.isles = islands;\r\n    }\r\n\r\n    // ships move so they must convert their polyData each time it is referenced\r\n    protected convertPolyDataToCartesian()\r\n    {\r\n        if (!this.jsonData)\r\n            return;\r\n        let root = this.jsonData[\"fileName\"]; // root filename for subsequent polyData keys\r\n        // extract the 8-way polydata arrays in each subobject in this data\r\n        var key = root + \"000\" + (this.polyNum + 1) + \".png\"; // polynum is zero based, frames are 1 based\r\n        if (this.jsonData.hasOwnProperty(key)) {\r\n            for (var k=0; k<this.jsonData[key].polygonPts.length; k++)\r\n            {\r\n                if (k%2 == 0) // each even index is an \"x\" coordinate\r\n                {\r\n                    // x axis is same direction as cartesian\r\n                    this.cartPolyData8[this.polyNum][k] = this.jsonData[key].polygonPts[k] + this.sprite.x; // world coord x\r\n                }\r\n                else // each odd index is a \"y\" coordinate\r\n                {\r\n                    // bottom left of our \"world\" is 0,8192\r\n                    var cartSpriteY = 8192 - this.sprite.y; \r\n                    this.cartPolyData8[this.polyNum][k] = cartSpriteY - this.jsonData[key].polygonPts[k];\r\n                }   \r\n            }\r\n\r\n            this.cartKeelData = []; // clear the array\r\n            for (k=0; k<this.jsonData[key].keelPts.length; k++)\r\n            {\r\n                if (k%2 == 0) // each even index is an \"x\" coordinate\r\n                {\r\n                    // x axis is same direction as cartesian\r\n                    this.cartKeelData[k] = this.jsonData[key].keelPts[k] + this.sprite.x; // world coord x\r\n                }\r\n                else // each odd index is a \"y\" coordinate\r\n                {\r\n                    // bottom left of our \"world\" is 0,8192\r\n                    var cartSpriteY = 8192 - this.sprite.y; \r\n                    this.cartKeelData[k] = cartSpriteY - this.jsonData[key].keelPts[k];\r\n                }                 \r\n            }\r\n        } else {\r\n            console.log(\"Failed to find key: \" + key + \" in ship data!\");\r\n        }\r\n    }\r\n\r\n    public cartesianHitTest = (p:PIXI.Point) => {\r\n        //console.log(this.polyData);\r\n        if (this.cartPolyData8[this.polyNum]) {\r\n            // calculate the polygonal data for the ships position and its current sprite/heading\r\n            this.convertPolyDataToCartesian();\r\n            // point assumed to be in cartesian coords... compare this to our polyData via PolyK library\r\n            return PolyK.ContainsPoint(this.cartPolyData8[this.polyNum], p.x, p.y);\r\n        } else {\r\n            console.log(\"polyData not yet defined\");\r\n        }\r\n    }\r\n\r\n    // return true if passed point is contained in our polygon\r\n    public hitTestByPoint(x:number, y:number)\r\n    {\r\n        //console.log(\"ship.hitTestByPoint\");\r\n        // convert our polygonal data relative to our position\r\n        this.convertPolyDataToCartesian();\r\n        if (PolyK.ContainsPoint(this.cartPolyData8[this.polyNum], x, y)) {\r\n            console.log(\"ship HIT by point!\");\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public hitTestByPolygon(polygonPts:any)\r\n    {\r\n        // convert our polygonal data relative to our position\r\n        this.convertPolyDataToCartesian();\r\n\r\n        var x, y;\r\n\r\n        // console.log(\"Island polygon: \" + polygonPts);\r\n        // console.log(\"Boat Pts: \" + this.cartPolyData8[this.polyNum]);\r\n\r\n        for(var i=0; i<this.cartPolyData8[this.polyNum].length; i+=2)\r\n        {\r\n            x = this.cartPolyData8[this.polyNum][i];\r\n            y = this.cartPolyData8[this.polyNum][i+1];\r\n            // for each point in our polygon, do a polyK hittest on the passed in polygon\r\n            if (PolyK.ContainsPoint(polygonPts, x, y)) {\r\n                console.log(\"hit!\");\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hitTestByKeel(polygonPts:any)\r\n    {\r\n        // convert our polygonal data relative to our position\r\n        this.convertPolyDataToCartesian();\r\n\r\n        var x, y;\r\n\r\n        // console.log(\"Island polygon: \" + polygonPts);\r\n        // console.log(\"Boat Pts: \" + this.cartPolyData8[this.polyNum]);\r\n\r\n        for(var i=0; i<this.cartKeelData.length; i+=2)\r\n        {\r\n            x = this.cartKeelData[i];\r\n            y = this.cartKeelData[i+1];\r\n            // for each point in our polygon, do a polyK hittest on the passed in polygon\r\n            if (PolyK.ContainsPoint(polygonPts, x, y)) {\r\n                console.log(\"hit!\");\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public allStop() {\r\n        this.sailState = 0; // lower the sails!\r\n        this.speed = 0;\r\n        this.targetSpeed = 0;\r\n        this.tweenVars.speed = 0;\r\n        //TweenLite.killTweensOf(this.tweenVars);\r\n    }\r\n\r\n    public isAground()\r\n    {\r\n        return this.aGround;\r\n    }\r\n    public setAground(aground:boolean)\r\n    {\r\n        this.aGround = aground;\r\n    }\r\n\r\n    public setInIrons(inIrons:boolean)\r\n    {\r\n        this.inIrons = inIrons;\r\n    }\r\n\r\n    public setPosition(x:number, y: number) \r\n    {\r\n        this.sprite.x = x;\r\n        this.sprite.y = y;\r\n    }\r\n\r\n    private matchHeadingToSprite() {\r\n        // pick the sprite that is closest to ships heading... \r\n        // we have 8 directional sprites\r\n        let a = this.heading.angleDeg();\r\n        let s = this.getSprite();\r\n        let modFrame = 0;\r\n        let frameName = \"\";\r\n\r\n        if (this.sailState == 0) // if sails down, offset frame num by 8  ie 0003 will become 00011\r\n            modFrame = 8;\r\n        \r\n        if (this.shipType == ShipType.CORVETTE)\r\n            frameName = \"Corvette2\";\r\n        else    \r\n            frameName = \"Corvette2\"; // add other ship sprites here as they are added\r\n\r\n        let frameNum = 0;\r\n\r\n        if (a <= 22.5 && a > -22.5 ) { // the right facing image\r\n            frameNum = 3;\r\n            this.polyNum = frameNum - 1; // polynum 0 based, used later as index into polygonData8\r\n        } else if (a <= 67.5 && a > 22.5) { // the up and right image\r\n            frameNum = 2;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= 112.5 && a > 67.5) { // the up facing image\r\n            frameNum = 1;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= 157.5 && a > 112.5) { // the up and right image\r\n            frameNum = 8;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= -157.5 || a > 157.5) {  // the left facing image\r\n            frameNum = 7;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= -112.5 && a > -157.5) {  // the left and down image\r\n            frameNum = 6;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= -67.5 && a > -112.5) {  // the down image\r\n            frameNum = 5;\r\n            this.polyNum = frameNum - 1;\r\n        } else if (a <= -22.5 && a > -67.5) { // the down and right image\r\n            frameNum = 4;\r\n            this.polyNum = frameNum - 1;\r\n        } else    \r\n            console.log(\"Ship class has invalid angle, texture could not be set\");\r\n\r\n        if (this.usingFrame != frameNum + modFrame) {\r\n            // replace our texture with the appropriate facing\r\n            s.texture = PIXI.Texture.fromFrame(frameName + this.getFrameString(frameNum, modFrame) + \".png\");\r\n            //console.log(\"replacing texture with frame: \" + (frameNum + modFrame));\r\n            //console.log(\"heading:\" + a.toFixed(0) + \" frameDirection: \" + frameNum)\r\n            this.usingFrame = frameNum + modFrame;\r\n\r\n            // set pivot point from data\r\n            if (this.jsonData)\r\n            {\r\n                var frameStr = frameName + this.getFrameString(frameNum, 0) + \".png\";\r\n                // this.sprite.pivot.x = this.jsonData[frameStr].refPt[0];\r\n                // this.sprite.pivot.y = this.jsonData[frameStr].refPt[1];\r\n                // this.sprite.anchor.x = this.jsonData[frameStr].refPt[0] / this.sprite.width;\r\n                // this.sprite.anchor.y = this.jsonData[frameStr].refPt[1] / this.sprite.height;\r\n                this.refPt.x = this.jsonData[frameStr].refPt[0];\r\n                this.refPt.y = this.jsonData[frameStr].refPt[1];\r\n            }\r\n        }\r\n    }\r\n\r\n    public getRefPt()\r\n    {\r\n        var p = new Victor(this.refPt.x, this.refPt.y);\r\n        return p;\r\n    }\r\n\r\n    public getRefPtVictor()\r\n    {\r\n        var p = new Victor(this.sprite.x + this.refPt.x, this.sprite.y + this.refPt.y);\r\n        return p;\r\n    }\r\n\r\n    private getFrameString(frameNum:number, mod:number)\r\n    {\r\n        let n:number = frameNum;\r\n\r\n        if (mod != 0)\r\n            n += mod;\r\n\r\n        return Ship.zeroPad(n, 4);\r\n    }\r\n\r\n    public static zeroPad (num:number, numZeros:number) {\r\n        if (num == 0)\r\n        {\r\n            var retStr = \"\";\r\n            for (var i = 0; i< numZeros; i++)\r\n                retStr = retStr + \"0\";\r\n            return retStr;\r\n        }\r\n        var an = Math.abs (num);\r\n        var digitCount = 1 + Math.floor (Math.log (an) / Math.LN10);\r\n        if (digitCount >= numZeros) {\r\n            return num.toString();\r\n        }\r\n        var zeroString = Math.pow (10, numZeros - digitCount).toString ().substr (1);\r\n        return num < 0 ? '-' + zeroString + an : zeroString + an;\r\n    }\r\n\r\n    public increaseSail = () =>  {\r\n        this.sailState = 2; // no support for half sail as yet\r\n        this.targetSpeed = 1; // ramp up to 60 pixels/sec speed is in pixels per frame\r\n        console.log(\"increasing sail Captain!\");\r\n    }\r\n\r\n    public decreaseSail = () => {\r\n        this.sailState = 0; // straight to no sails\r\n        this.targetSpeed = 0; // ramp down to no velocity\r\n        console.log(\"Aye! Decreasing sail!\");\r\n    }\r\n\r\n    public setSailTrim(newTrim:number) {\r\n        // set our speed based off the sail trim... sail trim is 0->1\r\n        this.targetSpeed = newTrim * this.maxSpeed; // data driven per boat type\r\n        if (this.targetSpeed <= 0)\r\n        {\r\n            this.targetSpeed = 0;\r\n            this.sailState = 0;\r\n        } else {\r\n            this.sailState = 2; // sails up\r\n        }\r\n        //console.log(\"setting Sail Trim: \" + newTrim.toFixed(2) + \" TargetSpeed: \" + this.targetSpeed.toFixed(2));\r\n\r\n        // if (!this.aGround && !this.inIrons)\r\n        //     TweenLite.to(this.tweenVars, 2.5, { speed:this.targetSpeed, ease: Power2.easeInOut });\r\n    }\r\n\r\n    public wheelStarboard() {\r\n        this.heading.rotateDeg(-15);\r\n        this.heading.normalize();\r\n        this.degreeHeading = this.heading.angleDeg();\r\n        console.log(\"Aye Starboard wheel! Heading to: \" + this.degreeHeading.toFixed(0));\r\n    }\r\n\r\n    // Victor lib is broken... rotate does what rotateby docs say, rotateby is broken\r\n    public wheelLarboard() {\r\n        this.heading.rotateDeg(15);\r\n        this.heading.normalize();\r\n        this.degreeHeading = this.heading.angleDeg();\r\n\r\n        console.log(\"Wheel a'Larboard Captain! Heading to: \" + this.degreeHeading.toFixed(0) + \" angDeg: \" + this.heading.angleDeg().toFixed(0));\r\n    }\r\n\r\n    private updatePosition() {\r\n        // modify x and y based off heading and speed\r\n        this.sprite.x += this.speed * this.heading.x;\r\n        this.sprite.y += this.speed * -this.heading.y; // y is inverted... heading in cartesean, but our position coords origin is top,left\r\n    }\r\n\r\n    update() {\r\n        // update the sprite position by the speed + heading\r\n        var deltaTime = 0;        \r\n        var now = Date.now();\r\n        var acc = this.maxSpeed / 2.5; // takes 2.5 seconds to accelerate to max speed\r\n        var accMS = acc / 1000;\r\n        var dampMS = accMS/4; // dampening force is half of acceleration force\r\n\r\n        if (this.lastTime != 0) {\r\n            deltaTime = now - this.lastTime;\r\n        }\r\n\r\n        if (this.wrecked)\r\n        {\r\n            // do decay timer perhaps here? cant stay wrecked forever\r\n            // waiting for player to loot, will fade after x minutes\r\n            // no speed, ai or other adjustments needed.. return\r\n            return;\r\n        }\r\n        \r\n        if (!CompassRose.isValidHeading(this.angleToWind, this.degreeHeading)) \r\n        {\r\n            var deltaDamp = dampMS * deltaTime;\r\n\r\n            this.speed -= deltaDamp; // 0.1;\r\n            \r\n            if (this.speed < 0)\r\n                this.speed = 0;\r\n            \r\n            // if (this.targetHeading != this.degreeHeading)\r\n                // console.log(\"Heading: \" + CompassRose.convertCartToCompass(this.degreeHeading).toFixed(2) + \" Speed: \" + this.speed.toFixed(2) + \" TargetSpeed: \" + this.targetSpeed.toFixed(2) + \" DeltaDamp: \" + deltaDamp.toFixed(2));\r\n        } \r\n        else if (this.speed != this.targetSpeed)\r\n        {\r\n            var deltaAcc = accMS * deltaTime;\r\n\r\n            if (this.speed < this.targetSpeed) {\r\n                this.speed += deltaAcc; //0.1;\r\n                if (this.speed >= this.targetSpeed)\r\n                    this.speed = this.targetSpeed;\r\n            } else {\r\n                this.speed -= deltaAcc; //0.1;\r\n                if (this.speed < 0)\r\n                    this.speed = 0;\r\n            }\r\n\r\n            //console.log(\"Speed: \" + this.speed.toFixed(2) + \" TargetSpeed: \" + this.targetSpeed.toFixed(2));\r\n        }\r\n\r\n        var speedMS = this.speed/1000;\r\n        var speedDelta = speedMS * deltaTime;\r\n\r\n        this.sprite.x += speedDelta * this.heading.x;\r\n        this.sprite.y += speedDelta * -this.heading.y;            \r\n        \r\n\r\n        if (this.targetHeading != this.degreeHeading) {\r\n            var deltaAngle = deltaTime * (this.angularSpeed/1000);\r\n            this.headingTicks++;\r\n            var sameSign = true;\r\n            if ((this.degreeHeading < 0 && this.targetHeading > 0) || \r\n                (this.degreeHeading > 0 && this.targetHeading < 0)) {\r\n                sameSign = false;\r\n            }\r\n            // move to the target in the direction indicated by toLarboard\r\n            if (this.toLarboard) // move to target by adding to degree angle\r\n            {\r\n                this.degreeHeading += deltaAngle;\r\n                if (this.degreeHeading > 180)\r\n                    this.degreeHeading -= 360;\r\n                if (sameSign && this.degreeHeading > this.targetHeading)\r\n                {\r\n                    this.degreeHeading = this.targetHeading; // we are done\r\n                }\r\n            }\r\n            else // move to target by subtracting to degree angle\r\n            {\r\n                this.degreeHeading -= deltaAngle;\r\n                if (this.degreeHeading < -180)\r\n                    this.degreeHeading += 360;\r\n                if (sameSign && this.degreeHeading < this.targetHeading)\r\n                {\r\n                    this.degreeHeading = this.targetHeading; // we are done\r\n                }\r\n            }\r\n            \r\n            var xpart = Math.cos(CompassRose.getRads(this.degreeHeading));\r\n            var ypart = Math.sin(CompassRose.getRads(this.degreeHeading));\r\n            \r\n            this.heading.x = xpart; \r\n            this.heading.y = ypart; // y is flipped when applying to sprite in setposition\r\n            this.heading.normalize(); // make sure its normalized\r\n\r\n            // console.log(\"target: \" + CompassRose.convertCartToCompass(this.targetHeading).toFixed(0) + \" heading: \" + CompassRose.convertCartToCompass(this.degreeHeading).toFixed(4) + \" dA: \" + deltaAngle.toFixed(4) + \" dTime: \" +  deltaTime);\r\n        }\r\n\r\n        // update lastTime\r\n        this.lastTime = now; \r\n\r\n        // update its sprite if necessary\r\n        this.matchHeadingToSprite();\r\n\r\n        this.updateAchtung();\r\n\r\n        // ai boat handling\r\n        if (this.isAI)\r\n        {\r\n            if (!this.aiStarted)\r\n            {\r\n                this.resetPlots(); // init the ai plots\r\n                this.aiStarted = true;\r\n                // set sail! all ahead half!\r\n                this.setSailTrim(0.5);\r\n                this.aiSetHeading();\r\n                this.aiLastHeading = now;\r\n            }\r\n\r\n            if (!this.aiArrived)\r\n            {\r\n                if (now - this.aiLastHeading > 1000) // check our heading!\r\n                {\r\n                    this.aiSetHeading();\r\n                    this.aiLastHeading = now;\r\n                }\r\n\r\n                // if we are within the radius of our destination, come to a halt\r\n                var vec1 = new Victor(this.sprite.x + this.refPt.x, this.sprite.y + this.refPt.y);\r\n                var vec2 = new Victor(this.aiTarget.x, this.aiTarget.y);\r\n                var dist = Math.abs(vec1.distance(vec2));\r\n                if (dist < 50) {\r\n                    this.showAchtung();\r\n                    this.setSailTrim(0);\r\n                    this.aiArrived = true;\r\n                }\r\n            }\r\n\r\n            // if (!this.showTarget)\r\n            //     this.showAITarget();\r\n\r\n            this.updateAITarget();\r\n        } else \r\n        {\r\n            // check if we need to display the error icon\r\n            if (this.aGround || this.inIrons)\r\n            {\r\n                this.showAchtung();\r\n            }\r\n            else  // remove achtung if present\r\n            {\r\n                this.hideAchtung();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private showAITarget()\r\n    {\r\n        if (!this.showTarget)\r\n        {\r\n            // put the aiTarget on the parent\r\n            this.aiTargetSprite.x = this.aiTarget.x;\r\n            this.aiTargetSprite.y = this.aiTarget.y;\r\n            this.sprite.parent.addChild(this.aiTargetSprite);\r\n            this.showTarget = true;\r\n\r\n            this.aiBoatPos.x = this.sprite.x;\r\n            this.aiBoatPos.y = this.sprite.y;\r\n            this.sprite.parent.addChild(this.aiBoatPos);\r\n        }\r\n    }\r\n\r\n    private updateAITarget()\r\n    {\r\n        this.aiBoatPos.x = this.sprite.x + this.refPt.x;\r\n        this.aiBoatPos.y = this.sprite.y + this.refPt.y;\r\n    }\r\n\r\n    private showAchtung()\r\n    {\r\n        if (!this.errorDisplayed)\r\n        {\r\n            // add it\r\n            this.achtung.x = this.sprite.x + this.sprite.width/2 - this.achtung.width/2;\r\n            this.achtung.y = this.sprite.y - this.sprite.height;\r\n            var numChildren = this.sprite.parent.children.length;\r\n            this.sprite.parent.addChildAt(this.achtung, numChildren-1);\r\n            this.errorDisplayed = true;\r\n            //console.log(\"adding Achtung\");\r\n        }\r\n    }\r\n\r\n    private updateAchtung()\r\n    {\r\n        if (this.errorDisplayed)\r\n        {\r\n            this.achtung.x = this.sprite.x + this.sprite.width/2 - this.achtung.width/2;\r\n            this.achtung.y = this.sprite.y - this.sprite.height;       \r\n        }\r\n    }\r\n\r\n    private hideAchtung()\r\n    {\r\n        if (this.errorDisplayed) {\r\n            this.sprite.parent.removeChild(this.achtung);\r\n            this.errorDisplayed = false;\r\n            //console.log(\"removing Achtung\");\r\n        }\r\n    }\r\n\r\n    public getHeading()\r\n    {\r\n        return this.degreeHeading;\r\n    }\r\n\r\n    public getAngleToWind()\r\n    {\r\n        return this.angleToWind;\r\n    }\r\n\r\n    // newHeading is a cartesian angle\r\n    public changeHeading(newHeading:number)\r\n    {\r\n        // change our heading to the newHeading\r\n        // we accomplish this over time dictated by the skill of our crew\r\n        // for now use the scale 3000->10000 for good->bad crew skill levels\r\n        \r\n        if (newHeading == this.targetHeading)\r\n            return; // nothing to do, newheading is same as current heading\r\n\r\n        // small heading changes take less time than large ones\r\n        // tacking through the wind adds a time penalty as the force decays then rises\r\n        let deltaDegrees = this.larOrStarboard(newHeading);\r\n        if (Math.abs(deltaDegrees) < 0.1)\r\n            return; // short circuit for small heading changes\r\n        this.targetHeading = newHeading;\r\n        this.headingTicks = 0;\r\n        if (deltaDegrees < 0)\r\n            this.toLarboard = false;\r\n        else    \r\n            this.toLarboard = true;\r\n        \r\n        // reset lastTime\r\n        this.lastTime = 0;\r\n\r\n        // calculate degrees per second, multiply by 1000 to convert to milliseconds\r\n        let timeToTurn = (Math.abs(deltaDegrees) / this.angularSpeed) * 1000;\r\n        //console.log(\"Changing heading of \" + deltaDegrees.toFixed(2) + \" in \" + timeToTurn.toFixed(2) + \" milliseconds\");\r\n        return timeToTurn;\r\n    }\r\n\r\n    // returns -degrees for starboard (subtract from heading until there)\r\n    // return +degrees for larboard (add to heading until there)\r\n    private larOrStarboard(newHeading:number)\r\n    {\r\n        // convert to 360 paradigm (0 being along the positive x axis, sweeping anticlockwise)\r\n        var to;\r\n        var from;\r\n\r\n        var left;\r\n        var right;\r\n\r\n        if (this.degreeHeading < 0)\r\n            from = this.degreeHeading + 360;\r\n        else   \r\n            from = this.degreeHeading;\r\n\r\n        if (newHeading < 0)\r\n            to = newHeading + 360;\r\n        else\r\n            to = newHeading;\r\n\r\n        if (from < to)\r\n        {\r\n            left = to - from;\r\n            right = (360 - to) + from;\r\n        }\r\n        else \r\n        {\r\n            left = (360 - from) + to;\r\n            right = from - to;\r\n            \r\n            //left = to - from;\r\n            //right = (360 - to) + from;\r\n        }\r\n\r\n        if (right < left)\r\n            return -right; // go right, right also contains the degrees needed \r\n        else\r\n            return left; // go left, left contains the degrees needed\r\n\r\n    }\r\n\r\n    // fire battery and return the milliseconds it will take to reload\r\n    public fireCannons(rightBattery:boolean=true)\r\n    {\r\n\r\n        if (this.magBall > 0)\r\n        {\r\n            console.log(\"FIRE!!\");\r\n            this.magBall -= 1; // deduct ammo (for now just one shot)\r\n\r\n            // velocity calculations\r\n            var v:Victor = new Victor(0,0);\r\n            v.x = this.heading.x;\r\n            v.y = -this.heading.y;\r\n            \r\n            // get direction\r\n            if (rightBattery)\r\n                v.rotate(CompassRose.getRads(90));\r\n            else\r\n                v.rotate(CompassRose.getRads(-90));\r\n\r\n            v.normalize();\r\n\r\n            // add speed data - speed expressed as pixels/millisecond\r\n            // var speed = 250 / 1000;\r\n            // v.multiplyScalar(speed);\r\n\r\n            // request a cannonball and give it a velocity\r\n            var ball = this.fxManager.getCannonBall();\r\n            var x = this.sprite.x + this.refPt.x;\r\n            var y = this.sprite.y + this.refPt.y;\r\n            ball.fire(x, y, v, 4, BallType.BALL, this);\r\n            this.fxManager.placeMuzzlePlume(x, y, v);\r\n\r\n            // return the reload speed based off crew ability\r\n            return 2500;\r\n        }\r\n        else\r\n        {\r\n            console.log(\"Captain! The magazine has run dry! We should put into port and reload!\");\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    public getMagBall()\r\n    {\r\n        return this.magBall;\r\n    }\r\n\r\n    public fillMagazine()\r\n    {\r\n        this.magBall = this.magBallMax;\r\n    }\r\n\r\n    public getMagBallMax()\r\n    {\r\n        return this.magBallMax;\r\n    }\r\n\r\n    public receiveFire(weight:number, source:GameObject)\r\n    {\r\n        this.statHull -= weight;\r\n        if (this.statHull <= 0)\r\n        {\r\n            // we are destroyed\r\n            this.wrecked = true;\r\n            this.targetSpeed = 0;\r\n            this.speed = 0;\r\n            // switch our frame to our wrecked frame\r\n            this.switchFrameToWrecked();\r\n            // ask the fx manager for a smoke plume at our reference point\r\n            this.smokeID = this.fxManager.placeSmokePlume(this.sprite.x + this.refPt.x, this.sprite.y+this.refPt.y);\r\n            // wreck frame does not conform.. move sprite by wreck offset.. for now hardcoded\r\n            this.sprite.y += 30;   \r\n        }    \r\n\r\n        console.log(\"took \" + weight + \" damage. Hull: \" + this.statHull);\r\n    }\r\n\r\n    private switchFrameToWrecked()\r\n    {\r\n        let s = this.getSprite();\r\n\r\n        s.texture = PIXI.Texture.fromFrame(\"CorvetteBodyWreck.png\");\r\n\r\n        s.interactive = true;\r\n\r\n        // add listeners to mouse down and up\r\n        s.on(\"mousedown\", this.wreckMouseDown);\r\n        s.on(\"mouseup\", this.wreckMouseUp);\r\n\r\n        this.aiPopulateLoot();\r\n    }\r\n\r\n    public sink()\r\n    {\r\n        // fade the ship out and then remove us from the map\r\n        let s = this.getSprite();\r\n        s.interactive = false;\r\n        // return the smoke to the fxmanager\r\n        this.fxManager.returnSmokeToPool(this.smokeID);\r\n        TweenMax.to(s, 2, {alpha:0,onComplete:this.sunk})\r\n    }\r\n\r\n    private sunk = () =>\r\n    {\r\n        let s = this.getSprite();\r\n        let p =s.parent;\r\n        p.removeChild(s);\r\n    }\r\n\r\n    // mouse handlers, just send a message for the hud to handle the loot mechanic\r\n    wreckMouseDown = (e:any) => {\r\n        var myEvent = new CustomEvent(\"wreckMouseDown\",\r\n        {\r\n            'detail': { \"boat\": this, \"holdLength\": this.shipsHold.length }\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    wreckMouseUp = (e:any) => {\r\n        var myEvent = new CustomEvent(\"wreckMouseUp\",\r\n        {\r\n            'detail': { \"boat\": this, \"holdLength\": this.shipsHold.length }\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    public aiPopulateLoot()\r\n    {\r\n        // fill the hold with random loot items\r\n        var i=0;\r\n        var itemID;\r\n\r\n        for (i=0; i<5; i++)\r\n        {\r\n            // generate a random loot item \r\n            itemID = theSea.getRandomIntInclusive(0,EconomyItem.maxItems-1);\r\n            this.shipsHold[i] = new EconomyItem(itemID,0); // random rarity\r\n        }\r\n\r\n        // randomly generate the coin value treasure this boat may have\r\n        this.coins = theSea.getRandomIntInclusive(1,10);\r\n    }\r\n\r\n    public getCoins()\r\n    {\r\n        return this.coins;\r\n    }\r\n\r\n    // return next itemID from the shipsHold\r\n    public aiPopNextLoot()\r\n    {\r\n        if (this.shipsHold.length == 0)\r\n            return null;\r\n\r\n        return this.shipsHold.pop();\r\n    }\r\n\r\n    public aiNumHoldItems()\r\n    {\r\n        return this.shipsHold.length;\r\n    }\r\n\r\n    public addToHold(itemType:number,rarity:number=0)\r\n    {\r\n        if (this.shipsHold.length < this.shipsHoldCapacity)\r\n        {\r\n            var e = new EconomyItem(itemType,rarity)\r\n            this.shipsHold.push(e);\r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public isHoldFull()\r\n    {\r\n        if (this.shipsHold.length < this.shipsHoldCapacity)\r\n            return false;\r\n        else\r\n            return true;    \r\n    }\r\n\r\n    public getHold()\r\n    {\r\n        return this.shipsHold;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/ship.ts","/*!\n * @pixi/filter-ascii - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:25 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\n\\nuniform vec4 filterArea;\\nuniform float pixelSize;\\nuniform sampler2D uSampler;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= filterArea.xy;\\n    coord += filterArea.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= filterArea.zw;\\n    coord /= filterArea.xy;\\n\\n    return coord;\\n}\\n\\nvec2 pixelate(vec2 coord, vec2 size)\\n{\\n    return floor( coord / size ) * size;\\n}\\n\\nvec2 getMod(vec2 coord, vec2 size)\\n{\\n    return mod( coord , size) / size;\\n}\\n\\nfloat character(float n, vec2 p)\\n{\\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\\n    {\\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\\n    }\\n    return 0.0;\\n}\\n\\nvoid main()\\n{\\n    vec2 coord = mapCoord(vTextureCoord);\\n\\n    // get the rounded color..\\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\\n    pixCoord = unmapCoord(pixCoord);\\n\\n    vec4 color = texture2D(uSampler, pixCoord);\\n\\n    // determine the character to use\\n    float gray = (color.r + color.g + color.b) / 3.0;\\n\\n    float n =  65536.0;             // .\\n    if (gray > 0.2) n = 65600.0;    // :\\n    if (gray > 0.3) n = 332772.0;   // *\\n    if (gray > 0.4) n = 15255086.0; // o\\n    if (gray > 0.5) n = 23385164.0; // &\\n    if (gray > 0.6) n = 15252014.0; // 8\\n    if (gray > 0.7) n = 13199452.0; // @\\n    if (gray > 0.8) n = 11512810.0; // #\\n\\n    // get the mod..\\n    vec2 modd = getMod(coord, vec2(pixelSize));\\n\\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\\n\\n}\",AsciiFilter=function(e){function n(n){void 0===n&&(n=8),e.call(this,vertex,fragment),this.size=n}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.pixelSize},r.size.set=function(e){this.uniforms.pixelSize=e},Object.defineProperties(n.prototype,r),n}(PIXI.Filter);PIXI.filters.AsciiFilter=AsciiFilter;export{AsciiFilter};\n//# sourceMappingURL=filter-ascii.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/ascii/lib/filter-ascii.es.js","/*!\n * @pixi/filter-advanced-bloom - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:25 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main() {\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"\\nuniform sampler2D uSampler;\\nvarying vec2 vTextureCoord;\\n\\nuniform float threshold;\\n\\nvoid main() {\\n    vec4 color = texture2D(uSampler, vTextureCoord);\\n\\n    // A simple & fast algorithm for getting brightness.\\n    // It's inaccuracy , but good enought for this feature.\\n    float _max = max(max(color.r, color.g), color.b);\\n    float _min = min(min(color.r, color.g), color.b);\\n    float brightness = (_max + _min) * 0.5;\\n\\n    if(brightness > threshold) {\\n        gl_FragColor = color;\\n    } else {\\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\\n    }\\n}\\n\",ExtractBrightnessFilter=function(r){function t(t){void 0===t&&(t=.5),r.call(this,vertex,fragment),this.threshold=t}r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t;var e={threshold:{configurable:!0}};return e.threshold.get=function(){return this.uniforms.threshold},e.threshold.set=function(r){this.uniforms.threshold=r},Object.defineProperties(t.prototype,e),t}(PIXI.Filter),vertex$1=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main() {\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment$1=\"uniform sampler2D uSampler;\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D bloomTexture;\\nuniform float bloomScale;\\nuniform float brightness;\\n\\nvoid main() {\\n    vec4 color = texture2D(uSampler, vTextureCoord);\\n    color.rgb *= brightness;\\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\\n    bloomColor.rgb *= bloomScale;\\n    gl_FragColor = color + bloomColor;\\n}\\n\",AdvancedBloomFilter=function(r){function t(t){r.call(this,vertex$1,fragment$1),\"number\"==typeof t&&(t={threshold:t}),t=Object.assign({threshold:.5,bloomScale:1,brightness:1,blur:8,quality:4,resolution:PIXI.settings.RESOLUTION,kernelSize:5},t),this.bloomScale=t.bloomScale,this.brightness=t.brightness;var e=t.blur,o=t.quality,n=t.resolution,i=t.kernelSize,l=PIXI.filters,s=l.BlurXFilter,a=l.BlurYFilter;this._extract=new ExtractBrightnessFilter(t.threshold),this._blurX=new s(e,o,n,i),this._blurY=new a(e,o,n,i)}r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t;var e={threshold:{configurable:!0},blur:{configurable:!0}};return t.prototype.apply=function(r,t,e,o,n){var i=r.getRenderTarget(!0);this._extract.apply(r,t,i,!0,n),this._blurX.apply(r,i,i,!0,n),this._blurY.apply(r,i,i,!0,n),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=i,r.applyFilter(this,t,e,o),r.returnRenderTarget(i)},e.threshold.get=function(){return this._extract.threshold},e.threshold.set=function(r){this._extract.threshold=r},e.blur.get=function(){return this._blurX.blur},e.blur.set=function(r){this._blurX.blur=this._blurY.blur=r},Object.defineProperties(t.prototype,e),t}(PIXI.Filter);PIXI.filters.AdvancedBloomFilter=AdvancedBloomFilter;export{AdvancedBloomFilter};\n//# sourceMappingURL=filter-advanced-bloom.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/advanced-bloom/lib/filter-advanced-bloom.es.js","/*!\n * @pixi/filter-bloom - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:25 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar ref=PIXI.filters,BlurXFilter=ref.BlurXFilter,BlurYFilter=ref.BlurYFilter,AlphaFilter=ref.AlphaFilter,BloomFilter=function(r){function t(t,l,e,i){void 0===t&&(t=2),void 0===l&&(l=4),void 0===e&&(e=PIXI.settings.RESOLUTION),void 0===i&&(i=5),r.call(this);var u,o;\"number\"==typeof t?(u=t,o=t):t instanceof PIXI.Point?(u=t.x,o=t.y):Array.isArray(t)&&(u=t[0],o=t[1]),this.blurXFilter=new BlurXFilter(u,l,e,i),this.blurYFilter=new BlurYFilter(o,l,e,i),this.blurYFilter.blendMode=PIXI.BLEND_MODES.SCREEN,this.defaultFilter=new AlphaFilter}r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t;var l={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return t.prototype.apply=function(r,t,l){var e=r.getRenderTarget(!0);this.defaultFilter.apply(r,t,l),this.blurXFilter.apply(r,t,e),this.blurYFilter.apply(r,e,l),r.returnRenderTarget(e)},l.blur.get=function(){return this.blurXFilter.blur},l.blur.set=function(r){this.blurXFilter.blur=this.blurYFilter.blur=r},l.blurX.get=function(){return this.blurXFilter.blur},l.blurX.set=function(r){this.blurXFilter.blur=r},l.blurY.get=function(){return this.blurYFilter.blur},l.blurY.set=function(r){this.blurYFilter.blur=r},Object.defineProperties(t.prototype,l),t}(PIXI.Filter);PIXI.filters.BloomFilter=BloomFilter;export{BloomFilter};\n//# sourceMappingURL=filter-bloom.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/bloom/lib/filter-bloom.es.js","/*!\n * @pixi/filter-bulge-pinch - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:25 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"uniform float radius;\\nuniform float strength;\\nuniform vec2 center;\\nuniform sampler2D uSampler;\\nvarying vec2 vTextureCoord;\\n\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\nuniform vec2 dimensions;\\n\\nvoid main()\\n{\\n    vec2 coord = vTextureCoord * filterArea.xy;\\n    coord -= center * dimensions.xy;\\n    float distance = length(coord);\\n    if (distance < radius) {\\n        float percent = distance / radius;\\n        if (strength > 0.0) {\\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\\n        } else {\\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\\n        }\\n    }\\n    coord += center * dimensions.xy;\\n    coord /= filterArea.xy;\\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\\n    gl_FragColor = texture2D(uSampler, clampedCoord);\\n    if (coord != clampedCoord) {\\n        gl_FragColor *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n}\\n\",BulgePinchFilter=function(e){function r(r,n,t){e.call(this,vertex,fragment),this.center=r||[.5,.5],this.radius=n||100,this.strength=t||1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var n={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return r.prototype.apply=function(e,r,n){this.uniforms.dimensions[0]=r.sourceFrame.width,this.uniforms.dimensions[1]=r.sourceFrame.height,e.applyFilter(this,r,n)},n.radius.get=function(){return this.uniforms.radius},n.radius.set=function(e){this.uniforms.radius=e},n.strength.get=function(){return this.uniforms.strength},n.strength.set=function(e){this.uniforms.strength=e},n.center.get=function(){return this.uniforms.center},n.center.set=function(e){this.uniforms.center=e},Object.defineProperties(r.prototype,n),r}(PIXI.Filter);PIXI.filters.BulgePinchFilter=BulgePinchFilter;export{BulgePinchFilter};\n//# sourceMappingURL=filter-bulge-pinch.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/bulge-pinch/lib/filter-bulge-pinch.es.js","/*!\n * @pixi/filter-color-replace - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:26 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D texture;\\nuniform vec3 originalColor;\\nuniform vec3 newColor;\\nuniform float epsilon;\\nvoid main(void) {\\n    vec4 currentColor = texture2D(texture, vTextureCoord);\\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\\n    float colorDistance = length(colorDiff);\\n    float doReplace = step(colorDistance, epsilon);\\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\\n}\\n\",ColorReplaceFilter=function(o){function r(r,e,n){void 0===r&&(r=16711680),void 0===e&&(e=0),void 0===n&&(n=.4),o.call(this,vertex,fragment),this.originalColor=r,this.newColor=e,this.epsilon=n}o&&(r.__proto__=o),(r.prototype=Object.create(o&&o.prototype)).constructor=r;var e={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return e.originalColor.set=function(o){var r=this.uniforms.originalColor;\"number\"==typeof o?(PIXI.utils.hex2rgb(o,r),this._originalColor=o):(r[0]=o[0],r[1]=o[1],r[2]=o[2],this._originalColor=PIXI.utils.rgb2hex(r))},e.originalColor.get=function(){return this._originalColor},e.newColor.set=function(o){var r=this.uniforms.newColor;\"number\"==typeof o?(PIXI.utils.hex2rgb(o,r),this._newColor=o):(r[0]=o[0],r[1]=o[1],r[2]=o[2],this._newColor=PIXI.utils.rgb2hex(r))},e.newColor.get=function(){return this._newColor},e.epsilon.set=function(o){this.uniforms.epsilon=o},e.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(r.prototype,e),r}(PIXI.Filter);PIXI.filters.ColorReplaceFilter=ColorReplaceFilter;export{ColorReplaceFilter};\n//# sourceMappingURL=filter-color-replace.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/color-replace/lib/filter-color-replace.es.js","/*!\n * @pixi/filter-convolution - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:26 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying mediump vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform vec2 texelSize;\\nuniform float matrix[9];\\n\\nvoid main(void)\\n{\\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\\n\\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\\n\\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\\n\\n   gl_FragColor =\\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\\n\\n   gl_FragColor.a = c22.a;\\n}\\n\",ConvolutionFilter=function(e){function t(t,r,o){e.call(this,vertex,fragment),this.matrix=t,this.width=r,this.height=o}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return r.matrix.get=function(){return this.uniforms.matrix},r.matrix.set=function(e){this.uniforms.matrix=new Float32Array(e)},r.width.get=function(){return 1/this.uniforms.texelSize[0]},r.width.set=function(e){this.uniforms.texelSize[0]=1/e},r.height.get=function(){return 1/this.uniforms.texelSize[1]},r.height.set=function(e){this.uniforms.texelSize[1]=1/e},Object.defineProperties(t.prototype,r),t}(PIXI.Filter);PIXI.filters.ConvolutionFilter=ConvolutionFilter;export{ConvolutionFilter};\n//# sourceMappingURL=filter-convolution.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/convolution/lib/filter-convolution.es.js","/*!\n * @pixi/filter-cross-hatch - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:26 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\n\\nvoid main(void)\\n{\\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\\n\\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n    if (lum < 1.00)\\n    {\\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\\n        {\\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n        }\\n    }\\n\\n    if (lum < 0.75)\\n    {\\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\\n        {\\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n        }\\n    }\\n\\n    if (lum < 0.50)\\n    {\\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\\n        {\\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n        }\\n    }\\n\\n    if (lum < 0.3)\\n    {\\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\\n        {\\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n        }\\n    }\\n}\\n\",CrossHatchFilter=function(r){function o(){r.call(this,vertex,fragment)}return r&&(o.__proto__=r),o.prototype=Object.create(r&&r.prototype),o.prototype.constructor=o,o}(PIXI.Filter);PIXI.filters.CrossHatchFilter=CrossHatchFilter;export{CrossHatchFilter};\n//# sourceMappingURL=filter-cross-hatch.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/cross-hatch/lib/filter-cross-hatch.es.js","/*!\n * @pixi/filter-dot - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:26 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\nvarying vec4 vColor;\\n\\nuniform vec4 filterArea;\\nuniform sampler2D uSampler;\\n\\nuniform float angle;\\nuniform float scale;\\n\\nfloat pattern()\\n{\\n   float s = sin(angle), c = cos(angle);\\n   vec2 tex = vTextureCoord * filterArea.xy;\\n   vec2 point = vec2(\\n       c * tex.x - s * tex.y,\\n       s * tex.x + c * tex.y\\n   ) * scale;\\n   return (sin(point.x) * sin(point.y)) * 4.0;\\n}\\n\\nvoid main()\\n{\\n   vec4 color = texture2D(uSampler, vTextureCoord);\\n   float average = (color.r + color.g + color.b) / 3.0;\\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\\n}\\n\",DotFilter=function(e){function n(n,t){void 0===n&&(n=1),void 0===t&&(t=5),e.call(this,vertex,fragment),this.scale=n,this.angle=t}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var t={scale:{configurable:!0},angle:{configurable:!0}};return t.scale.get=function(){return this.uniforms.scale},t.scale.set=function(e){this.uniforms.scale=e},t.angle.get=function(){return this.uniforms.angle},t.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(n.prototype,t),n}(PIXI.Filter);PIXI.filters.DotFilter=DotFilter;export{DotFilter};\n//# sourceMappingURL=filter-dot.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/dot/lib/filter-dot.es.js","/*!\n * @pixi/filter-drop-shadow - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:28 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform float alpha;\\nuniform vec3 color;\\nvoid main(void){\\n    vec4 sample = texture2D(uSampler, vTextureCoord);\\n\\n    // Un-premultiply alpha before applying the color\\n    if (sample.a > 0.0) {\\n        sample.rgb /= sample.a;\\n    }\\n\\n    // Premultiply alpha again\\n    sample.rgb = color.rgb * sample.a;\\n\\n    // alpha user alpha\\n    sample *= alpha;\\n\\n    gl_FragColor = sample;\\n}\",DropShadowFilter=function(t){function r(r,e,i,n,o){void 0===r&&(r=45),void 0===e&&(e=5),void 0===i&&(i=2),void 0===n&&(n=0),void 0===o&&(o=.5),t.call(this),this.tintFilter=new PIXI.Filter(vertex,fragment),this.blurFilter=new PIXI.filters.BlurFilter,this.blurFilter.blur=i,this.rotation=r,this.padding=e,this.distance=e,this.alpha=o,this.color=n}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var e={distance:{configurable:!0},rotation:{configurable:!0},blur:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0}};return r.prototype.apply=function(r,e,i){var n=r.getRenderTarget();n.transform=new PIXI.Matrix,n.transform.translate(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle)),this.tintFilter.apply(r,e,n,!0),this.blurFilter.apply(r,n,i),t.prototype.apply.call(this,r,e,i),n.transform=null,r.returnRenderTarget(n)},r.prototype.updatePadding=function(){this.padding=this.distance+2*this.blur},e.distance.get=function(){return this._distance},e.distance.set=function(t){this._distance=t,this.updatePadding()},e.rotation.get=function(){return this.angle/PIXI.DEG_TO_RAD},e.rotation.set=function(t){this.angle=t*PIXI.DEG_TO_RAD},e.blur.get=function(){return this.blurFilter.blur},e.blur.set=function(t){this.blurFilter.blur=t,this.updatePadding()},e.alpha.get=function(){return this.tintFilter.uniforms.alpha},e.alpha.set=function(t){this.tintFilter.uniforms.alpha=t},e.color.get=function(){return PIXI.utils.rgb2hex(this.tintFilter.uniforms.color)},e.color.set=function(t){PIXI.utils.hex2rgb(t,this.tintFilter.uniforms.color)},Object.defineProperties(r.prototype,e),r}(PIXI.Filter);PIXI.filters.DropShadowFilter=DropShadowFilter;export{DropShadowFilter};\n//# sourceMappingURL=filter-drop-shadow.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/drop-shadow/lib/filter-drop-shadow.es.js","/*!\n * @pixi/filter-emboss - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:28 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform float strength;\\nuniform vec4 filterArea;\\n\\n\\nvoid main(void)\\n{\\n\\tvec2 onePixel = vec2(1.0 / filterArea);\\n\\n\\tvec4 color;\\n\\n\\tcolor.rgb = vec3(0.5);\\n\\n\\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\\n\\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\\n\\n\\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\\n\\n\\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\\n\\n\\tgl_FragColor = vec4(color.rgb * alpha, alpha);\\n}\\n\",EmbossFilter=function(e){function t(t){void 0===t&&(t=5),e.call(this,vertex,fragment),this.strength=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={strength:{configurable:!0}};return r.strength.get=function(){return this.uniforms.strength},r.strength.set=function(e){this.uniforms.strength=e},Object.defineProperties(t.prototype,r),t}(PIXI.Filter);PIXI.filters.EmbossFilter=EmbossFilter;export{EmbossFilter};\n//# sourceMappingURL=filter-emboss.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/emboss/lib/filter-emboss.es.js","/*!\n * @pixi/filter-glow - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:28 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"varying vec2 vTextureCoord;\\nvarying vec4 vColor;\\n\\nuniform sampler2D uSampler;\\n\\nuniform float distance;\\nuniform float outerStrength;\\nuniform float innerStrength;\\nuniform vec4 glowColor;\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\nvec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\\n\\nvoid main(void) {\\n    const float PI = 3.14159265358979323846264;\\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\\n    vec4 curColor;\\n    float totalAlpha = 0.0;\\n    float maxTotalAlpha = 0.0;\\n    float cosAngle;\\n    float sinAngle;\\n    vec2 displaced;\\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\\n       cosAngle = cos(angle);\\n       sinAngle = sin(angle);\\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\\n           totalAlpha += (distance - curDistance) * curColor.a;\\n           maxTotalAlpha += (distance - curDistance);\\n       }\\n    }\\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\\n\\n    ownColor.a = max(ownColor.a, 0.0001);\\n    ownColor.rgb = ownColor.rgb / ownColor.a;\\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\\n}\\n\",GlowFilter=function(o){function n(n,t,r,e,l){void 0===n&&(n=10),void 0===t&&(t=4),void 0===r&&(r=0),void 0===e&&(e=16777215),void 0===l&&(l=.1),o.call(this,vertex,fragment.replace(/%QUALITY_DIST%/gi,\"\"+(1/l/n).toFixed(7)).replace(/%DIST%/gi,\"\"+n.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=n,this.color=e,this.outerStrength=t,this.innerStrength=r}o&&(n.__proto__=o),(n.prototype=Object.create(o&&o.prototype)).constructor=n;var t={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return t.color.get=function(){return PIXI.utils.rgb2hex(this.uniforms.glowColor)},t.color.set=function(o){PIXI.utils.hex2rgb(o,this.uniforms.glowColor)},t.distance.get=function(){return this.uniforms.distance},t.distance.set=function(o){this.uniforms.distance=o},t.outerStrength.get=function(){return this.uniforms.outerStrength},t.outerStrength.set=function(o){this.uniforms.outerStrength=o},t.innerStrength.get=function(){return this.uniforms.innerStrength},t.innerStrength.set=function(o){this.uniforms.innerStrength=o},Object.defineProperties(n.prototype,t),n}(PIXI.Filter);PIXI.filters.GlowFilter=GlowFilter;export{GlowFilter};\n//# sourceMappingURL=filter-glow.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/glow/lib/filter-glow.es.js","/*!\n * @pixi/filter-godray - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:28 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",perlin=\"vec3 mod289(vec3 x)\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nvec4 mod289(vec4 x)\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nvec4 permute(vec4 x)\\n{\\n    return mod289(((x * 34.0) + 1.0) * x);\\n}\\nvec4 taylorInvSqrt(vec4 r)\\n{\\n    return 1.79284291400159 - 0.85373472095314 * r;\\n}\\nvec3 fade(vec3 t)\\n{\\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\\n}\\n// Classic Perlin noise, periodic variant\\nfloat pnoise(vec3 P, vec3 rep)\\n{\\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\\n    Pi0 = mod289(Pi0);\\n    Pi1 = mod289(Pi1);\\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\\n    vec4 iz0 = Pi0.zzzz;\\n    vec4 iz1 = Pi1.zzzz;\\n    vec4 ixy = permute(permute(ix) + iy);\\n    vec4 ixy0 = permute(ixy + iz0);\\n    vec4 ixy1 = permute(ixy + iz1);\\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\\n    gx0 = fract(gx0);\\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\\n    vec4 sz0 = step(gz0, vec4(0.0));\\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\\n    gx1 = fract(gx1);\\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\\n    vec4 sz1 = step(gz1, vec4(0.0));\\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n    g000 *= norm0.x;\\n    g010 *= norm0.y;\\n    g100 *= norm0.z;\\n    g110 *= norm0.w;\\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n    g001 *= norm1.x;\\n    g011 *= norm1.y;\\n    g101 *= norm1.z;\\n    g111 *= norm1.w;\\n    float n000 = dot(g000, Pf0);\\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\\n    float n111 = dot(g111, Pf1);\\n    vec3 fade_xyz = fade(Pf0);\\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\\n    return 2.2 * n_xyz;\\n}\\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\\n{\\n    float sum = 0.0;\\n    float sc = 1.0;\\n    float totalgain = 1.0;\\n    for (float i = 0.0; i < 6.0; i++)\\n    {\\n        sum += totalgain * pnoise(P * sc, rep);\\n        sc *= lacunarity;\\n        totalgain *= gain;\\n    }\\n    return abs(sum);\\n}\\n\",main=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform vec4 filterArea;\\nuniform vec2 dimensions;\\n\\nuniform vec2 angleDir;\\nuniform float gain;\\nuniform float lacunarity;\\nuniform float time;\\n\\n${perlin}\\n\\nvoid main(void) {\\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\\n\\n    float xx = angleDir.x;\\n    float yy = angleDir.y;\\n\\n    float d = (xx * coord.x) + (yy * coord.y);\\n    vec3 dir = vec3(d, d, 0.0);\\n\\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\\n    noise = mix(noise, 0.0, 0.3);\\n    //fade vertically.\\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\\n    mist.a = 1.0;\\n    gl_FragColor += mist;\\n}\\n\",GodrayFilter=function(n){function e(e,t,i,o){void 0===e&&(e=30),void 0===t&&(t=.5),void 0===i&&(i=2.5),void 0===o&&(o=0),n.call(this,vertex,main.replace(\"${perlin}\",perlin)),this.angle=e,this.gain=t,this.lacunarity=i,this.time=o}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return e.prototype.apply=function(n,e,t,i){var o=e.sourceFrame.width,r=e.sourceFrame.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=r,this.uniforms.time=this.time,this.uniforms.angleDir[1]=this._angleSin*r/o,n.applyFilter(this,e,t,i)},t.angle.get=function(){return this._angle},t.angle.set=function(n){var e=n*PIXI.DEG_TO_RAD;this._angleCos=Math.cos(e),this._angleSin=Math.sin(e),this.uniforms.angleDir[0]=this._angleCos,this._angle=n},t.gain.get=function(){return this.uniforms.gain},t.gain.set=function(n){this.uniforms.gain=n},t.lacunarity.get=function(){return this.uniforms.lacunarity},t.lacunarity.set=function(n){this.uniforms.lacunarity=n},Object.defineProperties(e.prototype,t),e}(PIXI.Filter);PIXI.filters.GodrayFilter=GodrayFilter;export{GodrayFilter};\n//# sourceMappingURL=filter-godray.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/godray/lib/filter-godray.es.js","/*!\n * @pixi/filter-outline - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:29 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\n\\nuniform float thickness;\\nuniform vec4 outlineColor;\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\nvec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\\n\\nvoid main(void) {\\n    const float PI = 3.14159265358979323846264;\\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\\n    vec4 curColor;\\n    float maxAlpha = 0.;\\n    vec2 displaced;\\n    for (float angle = 0.; angle < PI * 2.; angle += %THICKNESS% ) {\\n        displaced.x = vTextureCoord.x + thickness * px.x * cos(angle);\\n        displaced.y = vTextureCoord.y + thickness * px.y * sin(angle);\\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\\n        maxAlpha = max(maxAlpha, curColor.a);\\n    }\\n    float resultAlpha = max(maxAlpha, ownColor.a);\\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\\n}\\n\",OutlineFilter=function(e){function o(o,r){void 0===o&&(o=1),void 0===r&&(r=0),e.call(this,vertex,fragment.replace(/%THICKNESS%/gi,(1/o).toFixed(7))),this.thickness=o,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=r}e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o;var r={color:{configurable:!0},thickness:{configurable:!0}};return r.color.get=function(){return PIXI.utils.rgb2hex(this.uniforms.outlineColor)},r.color.set=function(e){PIXI.utils.hex2rgb(e,this.uniforms.outlineColor)},r.thickness.get=function(){return this.uniforms.thickness},r.thickness.set=function(e){this.uniforms.thickness=e},Object.defineProperties(o.prototype,r),o}(PIXI.Filter);PIXI.filters.OutlineFilter=OutlineFilter;export{OutlineFilter};\n//# sourceMappingURL=filter-outline.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/outline/lib/filter-outline.es.js","/*!\n * @pixi/filter-multi-color-replace - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:29 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\n\\nuniform float epsilon;\\n\\nconst int MAX_COLORS = %maxColors%;\\n\\nuniform vec3 originalColors[MAX_COLORS];\\nuniform vec3 targetColors[MAX_COLORS];\\n\\nvoid main(void)\\n{\\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\\n\\n    float alpha = gl_FragColor.a;\\n    if (alpha < 0.0001)\\n    {\\n      return;\\n    }\\n\\n    vec3 color = gl_FragColor.rgb / alpha;\\n\\n    for(int i = 0; i < MAX_COLORS; i++)\\n    {\\n      vec3 origColor = originalColors[i];\\n      if (origColor.r < 0.0)\\n      {\\n        break;\\n      }\\n      vec3 colorDiff = origColor - color;\\n      if (length(colorDiff) < epsilon)\\n      {\\n        vec3 targetColor = targetColors[i];\\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\\n        return;\\n      }\\n    }\\n}\\n\",MultiColorReplaceFilter=function(o){function r(r,e,n){void 0===e&&(e=.05),void 0===n&&(n=null),n=n||r.length,o.call(this,vertex,fragment.replace(/%maxColors%/g,n)),this.epsilon=e,this._maxColors=n,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*n),this.uniforms.targetColors=new Float32Array(3*n),this.replacements=r}o&&(r.__proto__=o),(r.prototype=Object.create(o&&o.prototype)).constructor=r;var e={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return e.replacements.set=function(o){var r=this.uniforms.originalColors,e=this.uniforms.targetColors,n=o.length;if(n>this._maxColors)throw\"Length of replacements (\"+n+\") exceeds the maximum colors length (\"+this._maxColors+\")\";r[3*n]=-1;for(var t=0;t<n;t++){var i=o[t],l=i[0];\"number\"==typeof l?l=PIXI.utils.hex2rgb(l):i[0]=PIXI.utils.rgb2hex(l),r[3*t]=l[0],r[3*t+1]=l[1],r[3*t+2]=l[2];var a=i[1];\"number\"==typeof a?a=PIXI.utils.hex2rgb(a):i[1]=PIXI.utils.rgb2hex(a),e[3*t]=a[0],e[3*t+1]=a[1],e[3*t+2]=a[2]}this._replacements=o},e.replacements.get=function(){return this._replacements},r.prototype.refresh=function(){this.replacements=this._replacements},e.maxColors.get=function(){return this._maxColors},e.epsilon.set=function(o){this.uniforms.epsilon=o},e.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(r.prototype,e),r}(PIXI.Filter);PIXI.filters.MultiColorReplaceFilter=MultiColorReplaceFilter;export{MultiColorReplaceFilter};\n//# sourceMappingURL=filter-multi-color-replace.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/multi-color-replace/lib/filter-multi-color-replace.es.js","/*!\n * @pixi/filter-pixelate - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:29 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\n\\nuniform vec2 size;\\nuniform sampler2D uSampler;\\n\\nuniform vec4 filterArea;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= filterArea.xy;\\n    coord += filterArea.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= filterArea.zw;\\n    coord /= filterArea.xy;\\n\\n    return coord;\\n}\\n\\nvec2 pixelate(vec2 coord, vec2 size)\\n{\\n\\treturn floor( coord / size ) * size;\\n}\\n\\nvoid main(void)\\n{\\n    vec2 coord = mapCoord(vTextureCoord);\\n\\n    coord = pixelate(coord, size);\\n\\n    coord = unmapCoord(coord);\\n\\n    gl_FragColor = texture2D(uSampler, coord);\\n}\\n\",PixelateFilter=function(e){function r(r){void 0===r&&(r=10),e.call(this,vertex,fragment),this.size=r}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var o={size:{configurable:!0}};return o.size.get=function(){return this.uniforms.size},o.size.set=function(e){\"number\"==typeof e&&(e=[e,e]),this.uniforms.size=e},Object.defineProperties(r.prototype,o),r}(PIXI.Filter);PIXI.filters.PixelateFilter=PixelateFilter;export{PixelateFilter};\n//# sourceMappingURL=filter-pixelate.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/pixelate/lib/filter-pixelate.es.js","/*!\n * @pixi/filter-rgb-split - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:29 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform vec4 filterArea;\\nuniform vec2 red;\\nuniform vec2 green;\\nuniform vec2 blue;\\n\\nvoid main(void)\\n{\\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\\n}\\n\",RGBSplitFilter=function(e){function r(r,t,n){void 0===r&&(r=[-10,0]),void 0===t&&(t=[0,10]),void 0===n&&(n=[0,0]),e.call(this,vertex,fragment),this.red=r,this.green=t,this.blue=n}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var t={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return t.red.get=function(){return this.uniforms.red},t.red.set=function(e){this.uniforms.red=e},t.green.get=function(){return this.uniforms.green},t.green.set=function(e){this.uniforms.green=e},t.blue.get=function(){return this.uniforms.blue},t.blue.set=function(e){this.uniforms.blue=e},Object.defineProperties(r.prototype,t),r}(PIXI.Filter);PIXI.filters.RGBSplitFilter=RGBSplitFilter;export{RGBSplitFilter};\n//# sourceMappingURL=filter-rgb-split.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/rgb-split/lib/filter-rgb-split.es.js","/*!\n * @pixi/filter-shockwave - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:31 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\n\\nuniform vec2 center;\\n\\nuniform float amplitude;\\nuniform float wavelength;\\n// uniform float power;\\nuniform float brightness;\\nuniform float speed;\\nuniform float radius;\\n\\nuniform float time;\\n\\nconst float PI = 3.14159;\\n\\nvoid main()\\n{\\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\\n    float maxRadius = radius / filterArea.x;\\n    float currentRadius = time * speed / filterArea.x;\\n\\n    float fade = 1.0;\\n\\n    if (maxRadius > 0.0) {\\n        if (currentRadius > maxRadius) {\\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\\n            return;\\n        }\\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\\n    }\\n\\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\\n    dir.y *= filterArea.y / filterArea.x;\\n    float dist = length(dir);\\n\\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\\n        return;\\n    }\\n\\n    vec2 diffUV = normalize(dir);\\n\\n    float diff = (dist - currentRadius) / halfWavelength;\\n\\n    float p = 1.0 - pow(abs(diff), 2.0);\\n\\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\\n\\n    vec2 offset = diffUV * powDiff / filterArea.xy;\\n\\n    // Do clamp :\\n    vec2 coord = vTextureCoord + offset;\\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\\n    gl_FragColor = texture2D(uSampler, clampedCoord);\\n    if (coord != clampedCoord) {\\n        gl_FragColor *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n\\n    // No clamp :\\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\\n\\n    gl_FragColor.rgb *= 1.0 + (brightness - 1.0) * p * fade;\\n}\\n\",ShockwaveFilter=function(e){function t(t,n,r){void 0===t&&(t=[0,0]),void 0===n&&(n={}),void 0===r&&(r=0),e.call(this,vertex,fragment),this.center=t,Array.isArray(n)&&(console.warn(\"Deprecated Warning: ShockwaveFilter params Array has been changed to options Object.\"),n={}),n=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},n),this.amplitude=n.amplitude,this.wavelength=n.wavelength,this.brightness=n.brightness,this.speed=n.speed,this.radius=n.radius,this.time=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return t.prototype.apply=function(e,t,n){this.uniforms.time=this.time,e.applyFilter(this,t,n)},n.center.get=function(){return this.uniforms.center},n.center.set=function(e){this.uniforms.center=e},n.amplitude.get=function(){return this.uniforms.amplitude},n.amplitude.set=function(e){this.uniforms.amplitude=e},n.wavelength.get=function(){return this.uniforms.wavelength},n.wavelength.set=function(e){this.uniforms.wavelength=e},n.brightness.get=function(){return this.uniforms.brightness},n.brightness.set=function(e){this.uniforms.brightness=e},n.speed.get=function(){return this.uniforms.speed},n.speed.set=function(e){this.uniforms.speed=e},n.radius.get=function(){return this.uniforms.radius},n.radius.set=function(e){this.uniforms.radius=e},Object.defineProperties(t.prototype,n),t}(PIXI.Filter);PIXI.filters.ShockwaveFilter=ShockwaveFilter;export{ShockwaveFilter};\n//# sourceMappingURL=filter-shockwave.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/shockwave/lib/filter-shockwave.es.js","/*!\n * @pixi/filter-simple-lightmap - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:31 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform sampler2D uLightmap;\\nuniform vec4 filterArea;\\nuniform vec2 dimensions;\\nuniform vec4 ambientColor;\\nvoid main() {\\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\\n    vec4 light = texture2D(uLightmap, lightCoord);\\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\\n    vec3 intensity = ambient + light.rgb;\\n    vec3 finalColor = diffuseColor.rgb * intensity;\\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\\n}\\n\",SimpleLightmapFilter=function(e){function t(t,r,o){void 0===r&&(r=0),void 0===o&&(o=1),e.call(this,vertex,fragment),this.uniforms.ambientColor=new Float32Array([0,0,0,o]),this.texture=t,this.color=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return t.prototype.apply=function(e,t,r,o){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,r,o)},r.texture.get=function(){return this.uniforms.uLightmap},r.texture.set=function(e){this.uniforms.uLightmap=e},r.color.set=function(e){var t=this.uniforms.ambientColor;\"number\"==typeof e?(PIXI.utils.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this._color=PIXI.utils.rgb2hex(t))},r.color.get=function(){return this._color},r.alpha.get=function(){return this.uniforms.ambientColor[3]},r.alpha.set=function(e){this.uniforms.ambientColor[3]=e},Object.defineProperties(t.prototype,r),t}(PIXI.Filter);PIXI.filters.SimpleLightmapFilter=SimpleLightmapFilter;export{SimpleLightmapFilter};\n//# sourceMappingURL=filter-simple-lightmap.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/simple-lightmap/lib/filter-simple-lightmap.es.js","/*!\n * @pixi/filter-tilt-shift - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:31 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform float blur;\\nuniform float gradientBlur;\\nuniform vec2 start;\\nuniform vec2 end;\\nuniform vec2 delta;\\nuniform vec2 texSize;\\n\\nfloat random(vec3 scale, float seed)\\n{\\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\n}\\n\\nvoid main(void)\\n{\\n    vec4 color = vec4(0.0);\\n    float total = 0.0;\\n\\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\\n\\n    for (float t = -30.0; t <= 30.0; t++)\\n    {\\n        float percent = (t + offset - 0.5) / 30.0;\\n        float weight = 1.0 - abs(percent);\\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\\n        sample.rgb *= sample.a;\\n        color += sample * weight;\\n        total += weight;\\n    }\\n\\n    gl_FragColor = color / total;\\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\n}\\n\",TiltShiftAxisFilter=function(t){function i(i,r,e,n){void 0===i&&(i=100),void 0===r&&(r=600),void 0===e&&(e=null),void 0===n&&(n=null),t.call(this,vertex,fragment),this.uniforms.blur=i,this.uniforms.gradientBlur=r,this.uniforms.start=e||new PIXI.Point(0,window.innerHeight/2),this.uniforms.end=n||new PIXI.Point(600,window.innerHeight/2),this.uniforms.delta=new PIXI.Point(30,30),this.uniforms.texSize=new PIXI.Point(window.innerWidth,window.innerHeight),this.updateDelta()}t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var r={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return i.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},r.blur.get=function(){return this.uniforms.blur},r.blur.set=function(t){this.uniforms.blur=t},r.gradientBlur.get=function(){return this.uniforms.gradientBlur},r.gradientBlur.set=function(t){this.uniforms.gradientBlur=t},r.start.get=function(){return this.uniforms.start},r.start.set=function(t){this.uniforms.start=t,this.updateDelta()},r.end.get=function(){return this.uniforms.end},r.end.set=function(t){this.uniforms.end=t,this.updateDelta()},Object.defineProperties(i.prototype,r),i}(PIXI.Filter);PIXI.filters.TiltShiftAxisFilter=TiltShiftAxisFilter;var TiltShiftXFilter=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,i=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+i*i);this.uniforms.delta.x=t/r,this.uniforms.delta.y=i/r},i}(TiltShiftAxisFilter);PIXI.filters.TiltShiftXFilter=TiltShiftXFilter;var TiltShiftYFilter=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,i=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+i*i);this.uniforms.delta.x=-i/r,this.uniforms.delta.y=t/r},i}(TiltShiftAxisFilter);PIXI.filters.TiltShiftYFilter=TiltShiftYFilter;var TiltShiftFilter=function(t){function i(i,r,e,n){void 0===i&&(i=100),void 0===r&&(r=600),void 0===e&&(e=null),void 0===n&&(n=null),t.call(this),this.tiltShiftXFilter=new TiltShiftXFilter(i,r,e,n),this.tiltShiftYFilter=new TiltShiftYFilter(i,r,e,n)}t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var r={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return i.prototype.apply=function(t,i,r){var e=t.getRenderTarget(!0);this.tiltShiftXFilter.apply(t,i,e),this.tiltShiftYFilter.apply(t,e,r),t.returnRenderTarget(e)},r.blur.get=function(){return this.tiltShiftXFilter.blur},r.blur.set=function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t},r.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},r.gradientBlur.set=function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t},r.start.get=function(){return this.tiltShiftXFilter.start},r.start.set=function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t},r.end.get=function(){return this.tiltShiftXFilter.end},r.end.set=function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t},Object.defineProperties(i.prototype,r),i}(PIXI.Filter);PIXI.filters.TiltShiftFilter=TiltShiftFilter;export{TiltShiftFilter,TiltShiftXFilter,TiltShiftYFilter,TiltShiftAxisFilter};\n//# sourceMappingURL=filter-tilt-shift.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/tilt-shift/lib/filter-tilt-shift.es.js","/*!\n * @pixi/filter-twist - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:31 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",fragment=\"varying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform float radius;\\nuniform float angle;\\nuniform vec2 offset;\\nuniform vec4 filterArea;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= filterArea.xy;\\n    coord += filterArea.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= filterArea.zw;\\n    coord /= filterArea.xy;\\n\\n    return coord;\\n}\\n\\nvec2 twist(vec2 coord)\\n{\\n    coord -= offset;\\n\\n    float dist = length(coord);\\n\\n    if (dist < radius)\\n    {\\n        float ratioDist = (radius - dist) / radius;\\n        float angleMod = ratioDist * ratioDist * angle;\\n        float s = sin(angleMod);\\n        float c = cos(angleMod);\\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\\n    }\\n\\n    coord += offset;\\n\\n    return coord;\\n}\\n\\nvoid main(void)\\n{\\n\\n    vec2 coord = mapCoord(vTextureCoord);\\n\\n    coord = twist(coord);\\n\\n    coord = unmapCoord(coord);\\n\\n    gl_FragColor = texture2D(uSampler, coord );\\n\\n}\\n\",TwistFilter=function(o){function n(n,r,t){void 0===n&&(n=200),void 0===r&&(r=4),void 0===t&&(t=20),o.call(this,vertex,fragment),this.radius=n,this.angle=r,this.padding=t}o&&(n.__proto__=o),(n.prototype=Object.create(o&&o.prototype)).constructor=n;var r={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return r.offset.get=function(){return this.uniforms.offset},r.offset.set=function(o){this.uniforms.offset=o},r.radius.get=function(){return this.uniforms.radius},r.radius.set=function(o){this.uniforms.radius=o},r.angle.get=function(){return this.uniforms.angle},r.angle.set=function(o){this.uniforms.angle=o},Object.defineProperties(n.prototype,r),n}(PIXI.Filter);PIXI.filters.TwistFilter=TwistFilter;export{TwistFilter};\n//# sourceMappingURL=filter-twist.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/twist/lib/filter-twist.es.js","/*!\n * @pixi/filter-zoom-blur - v2.2.0\n * Compiled Tue, 31 Oct 2017 18:02:33 UTC\n *\n * pixi-filters is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar vertex=\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\",fragment=\"varying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform vec4 filterArea;\\n\\nuniform vec2 uCenter;\\nuniform float uStrength;\\nuniform float uInnerRadius;\\nuniform float uRadius;\\n\\nconst float MAX_KERNEL_SIZE = 32.0;\\n\\nfloat random(vec3 scale, float seed) {\\n    // use the fragment position for a different seed per-pixel\\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\n}\\n\\nvoid main() {\\n\\n    float minGradient = uInnerRadius * 0.3;\\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\\n\\n    float gradient = uRadius * 0.3;\\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\\n\\n    float countLimit = MAX_KERNEL_SIZE;\\n\\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\\n\\n    float strength = uStrength;\\n\\n    float delta = 0.0;\\n    float gap;\\n    if (dist < innerRadius) {\\n        delta = innerRadius - dist;\\n        gap = minGradient;\\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\\n        delta = dist - radius;\\n        gap = gradient;\\n    }\\n\\n    if (delta > 0.0) {\\n        float normalCount = gap / filterArea.x;\\n        delta = (normalCount - delta) / normalCount;\\n        countLimit *= delta;\\n        strength *= delta;\\n        if (countLimit < 1.0)\\n        {\\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\\n            return;\\n        }\\n    }\\n\\n    // randomize the lookup values to hide the fixed number of samples\\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\n\\n    float total = 0.0;\\n    vec4 color = vec4(0.0);\\n\\n    dir *= strength;\\n\\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\\n        float weight = 4.0 * (percent - percent * percent);\\n        vec2 p = vTextureCoord + dir * percent;\\n        vec4 sample = texture2D(uSampler, p);\\n\\n        // switch to pre-multiplied alpha to correctly blur transparent images\\n        // sample.rgb *= sample.a;\\n\\n        color += sample * weight;\\n        total += weight;\\n\\n        if (t > countLimit){\\n            break;\\n        }\\n    }\\n\\n    gl_FragColor = color / total;\\n\\n    // switch back from pre-multiplied alpha\\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\n\\n}\\n\",ZoomBlurFilter=function(n){function t(t,e,r,i){void 0===t&&(t=.1),void 0===e&&(e=[0,0]),void 0===r&&(r=0),void 0===i&&(i=-1),n.call(this,vertex,fragment),this.center=e,this.strength=t,this.innerRadius=r,this.radius=i}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return e.center.get=function(){return this.uniforms.uCenter},e.center.set=function(n){this.uniforms.uCenter=n},e.strength.get=function(){return this.uniforms.uStrength},e.strength.set=function(n){this.uniforms.uStrength=n},e.innerRadius.get=function(){return this.uniforms.uInnerRadius},e.innerRadius.set=function(n){this.uniforms.uInnerRadius=n},e.radius.get=function(){return this.uniforms.uRadius},e.radius.set=function(n){(n<0||n===1/0)&&(n=-1),this.uniforms.uRadius=n},Object.defineProperties(t.prototype,e),t}(PIXI.Filter);PIXI.filters.ZoomBlurFilter=ZoomBlurFilter;export{ZoomBlurFilter};\n//# sourceMappingURL=filter-zoom-blur.es.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../../filters/zoom-blur/lib/filter-zoom-blur.es.js","//\r\n// CannonBall class\r\n// self contained entity to manage the cannon ball and its flight, damage, results etc\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport Victor = require('victor');\r\nimport GameObject from './gameobject';\r\n\r\nexport const enum BallType {\r\n    CANNISTER,\r\n    BAR,\r\n    BALL\r\n}\r\n\r\nexport default class CannonBall extends PIXI.Sprite\r\n{\r\n\r\n    public v:Victor;           // velocity (speed plus heading) of this cannonball in pixels/millisecond\r\n    private pos:Victor;\r\n    public origin:Victor;  // world coord of cannonball's origin pt\r\n    public maxDist:number;     // how far (in pixels) can it fly?\r\n    public weight:number;      // 4lbs ball etc... ships will use this info to apply damage\r\n    public type:BallType;      // cannister, bar, ball\r\n    public inUse:boolean = false; // if not inuse, fxmanager can recycle\r\n    public spent:boolean = false; // has this ball flown over its maxDist value\r\n    private lastTime:number = 0; // frame calculation data\r\n    public firer:GameObject = null; // ignore the gameobject that fired it (dont kill yourself :)\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n        this.texture = PIXI.Texture.fromFrame(\"theBall.png\");\r\n        this.v = new Victor(0,0);\r\n        this.pos = new Victor(0,0);\r\n        this.origin = new Victor(0,0);\r\n    }\r\n\r\n    // allow override for maxdist, this is set by type normally\r\n    // vector givin in pixels/millisecond\r\n    public fire(ox:number, oy:number, velocity:Victor, weight:number, type:BallType, firer:GameObject, maxDist?:number)\r\n    {\r\n        this.origin.x = ox;\r\n        this.origin.y = oy;\r\n        this.x = ox;\r\n        this.y = oy;\r\n        this.v.x = velocity.x;\r\n        this.v.y = velocity.y;\r\n        this.weight = weight;\r\n        this.type = type;\r\n        this.spent = false;\r\n        this.firer = firer;\r\n        if(maxDist)\r\n            this.maxDist = maxDist;\r\n        else\r\n            this.maxDist = 350;\r\n        \r\n    }\r\n\r\n    public reset()\r\n    {\r\n        this.spent = false;\r\n        this.inUse = false;\r\n        this.lastTime = 0;\r\n    }\r\n\r\n    public update()\r\n    {\r\n        var deltaTime = 0;        \r\n        var now = Date.now();\r\n\r\n        if (this.lastTime != 0) {\r\n            deltaTime = now - this.lastTime;\r\n        }\r\n\r\n        this.lastTime = now;\r\n\r\n        var speed = 300 / 1000;\r\n\r\n        this.x += this.v.x * speed * deltaTime;\r\n        this.y += this.v.y * speed * deltaTime;\r\n        this.pos.x = this.x;\r\n        this.pos.y = this.y;\r\n\r\n        // if we have travelled our maxDist set the spent signal\r\n        var dist = this.pos.distance(this.origin);\r\n        if (dist > this.maxDist)\r\n        {\r\n            this.spent = true;\r\n            //console.log(\"ball dist: \" + dist + \" pos: \" + this.pos.x + \",\" + this.pos.y);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/cannonball.ts","//\r\n// HealthBar - simple shape bar that graphically represents health.\r\n//\r\nimport * as PIXI from 'pixi.js';\r\n\r\nexport default class HealthBar extends PIXI.Container \r\n{\r\n    private w:number;\r\n    private h:number;\r\n    private color:number;\r\n    private bg:PIXI.Graphics;\r\n    private bar:PIXI.Graphics;\r\n    private perc:number;        // the percent value this bar is currently showing\r\n\r\n    constructor(w:number, h:number, color:number)\r\n    {\r\n        super();\r\n        this.w = w;\r\n        this.h=h;\r\n        this.color = color;\r\n        this.initGraphics();\r\n    }\r\n\r\n    private initGraphics()\r\n    {\r\n        // background shape is a grey rectangle of w/h size\r\n        this.bg = new PIXI.Graphics();\r\n        this.bg.beginFill(0x777777, 1); // grey\r\n        this.bg.drawRect(0,0,this.w,this.h);\r\n        this.bg.endFill();\r\n        this.addChild(this.bg); // background added first to sort to rear\r\n        // foreground shape is of desired color\r\n        this.bar = new PIXI.Graphics();\r\n        this.bar.beginFill(this.color, 1); // provided color\r\n        this.bar.drawRect(0,0,this.w, this.h);\r\n        this.bar.endFill();\r\n        this.addChild(this.bar); // bar added atop background and will adjust in size according to perc set by user\r\n    }\r\n\r\n    public setPerc(perc:number)\r\n    {\r\n        var p;\r\n        // expects 0->1 inclusive\r\n        if (perc < 0)\r\n            p = 0;\r\n        else if (perc > 1)\r\n            p = 1;\r\n        else\r\n            p = perc;\r\n\r\n        this.bar.clear();\r\n        this.bar.beginFill(this.color, 1); // provided color\r\n        this.bar.drawRect(0,0,this.w * p, this.h);\r\n        this.bar.endFill();\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/healthbar.ts","import * as PIXI from 'pixi.js';\r\nimport theSea from './theSea';\r\nimport MainHUD from './mainhud';\r\n\r\nimport PopupManager from './popupmanager';\r\nimport SingletonClass from './singleton';\r\n\r\nexport default class Core {\r\n    private _renderer:PIXI.CanvasRenderer|PIXI.WebGLRenderer;\r\n    private _world:PIXI.Container;\r\n    private _sea:theSea;\r\n    private _hud:MainHUD;\r\n    private _popupManager:PopupManager;\r\n\r\n    private seaLoaded:boolean = false;\r\n    private hudLoaded:boolean = false;\r\n\r\n    constructor() {\r\n        this._renderer = PIXI.autoDetectRenderer(window.innerWidth, window.innerHeight,{backgroundColor: 0x7BA4DF});\r\n        this._world = new PIXI.Container();\r\n        document.body.appendChild(this._renderer.view);\r\n\r\n        // create a new sea object\r\n        this._sea = new theSea();\r\n        this._sea.init(this.seaLoadedCallback);\r\n\r\n        // create the main hud\r\n        this._hud = new MainHUD();\r\n        this._hud.addLoaderAssets(); \r\n\r\n        // create popupmanager\r\n        this._popupManager = new PopupManager();\r\n        this._popupManager.setContainer(this._hud.getContainer());\r\n        this._hud.setPopupManager(this._popupManager);\r\n        SingletonClass.popupManager = this._popupManager;\r\n\r\n        // load all the assets requested by theSea and Hud\r\n        PIXI.loader.load(this.onLoaded);\r\n\r\n        console.log(\"PotTW: build 0.0.14\");\r\n    }\r\n\r\n    private onLoaded = () => \r\n    {\r\n        // hud is done and needs no further loading\r\n        this.mainHUDLoaded();\r\n        // theSea needs to load its data files\r\n        this._sea.setup();\r\n\r\n        // the sea will call seaLoadedCallback when its finally done so we can proceed\r\n    }\r\n\r\n    private postLoad()\r\n    {\r\n        if (this.hudLoaded && this.seaLoaded)\r\n        {\r\n            this._world.addChild(this._sea.getContainer());\r\n            this._world.addChild(this._hud.getContainer());\r\n\r\n            // center hud on window size\r\n            let c = this._hud.getContainer();\r\n            c.x = (window.innerWidth - c.width) / 2;\r\n\r\n            //mousewheel not part of Pixi so add the event to the DOM\r\n            document.body.addEventListener(\"wheel\", this._sea.mouseWheelHandler, false);\r\n\r\n            this._hud.setSeaUILayer(this._sea.getUILayer());\r\n\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    private mainHUDLoaded = () =>\r\n    {\r\n        let c = this._hud.getContainer();\r\n        c.x = 0;\r\n        c.y = 0;\r\n\r\n        this.hudLoaded = true;\r\n        this._hud.onAssetsLoaded();\r\n\r\n        this.postLoad();\r\n    }\r\n\r\n    private seaLoadedCallback = () =>\r\n    {\r\n        this.seaLoaded = true;\r\n\r\n        this.postLoad();\r\n    }\r\n\r\n    public update = () => \r\n    {\r\n        this._sea.update();\r\n        this._hud.update();\r\n\r\n        this._renderer.render(this._world);\r\n\r\n        requestAnimationFrame(this.update);\r\n    }\r\n\r\n}\r\n\r\nlet game = new Core();\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/index.ts","import GameObject from './gameobject';\r\nimport { ObjectType } from './gameobject';\r\nimport Victor = require('victor');\r\n\r\nexport default class Island extends GameObject\r\n{\r\n    private islandData:any; // json data loaded by theSea and passed to us\r\n    private _isPort:boolean = false;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n        this.objType = ObjectType.ISLAND;\r\n    }\r\n\r\n    public setData(data:any)\r\n    {\r\n        this.islandData = data;\r\n        if (this.islandData.hasOwnProperty(\"port\") && this.islandData.port == true)\r\n        {\r\n            this._isPort = true;\r\n            //console.log(\"Found port: \" + this.islandData.portName);\r\n        }\r\n\r\n        // set the pivot point from the data\r\n        // this.sprite.pivot.x = this.islandData.refPt[0];\r\n        // this.sprite.pivot.x = this.islandData.refPt[1];\r\n    }\r\n\r\n    public isPort()\r\n    {\r\n        return this._isPort;\r\n    }\r\n\r\n    public getPortDest()\r\n    {\r\n        var x = this.sprite.x + this.islandData.portRef[0];\r\n        var y = this.sprite.y + this.islandData.portRef[1];\r\n        return new PIXI.Point(x,y);\r\n    }\r\n\r\n    public getPortDestVictor()\r\n    {\r\n        var x = this.sprite.x + this.islandData.portRef[0];\r\n        var y = this.sprite.y + this.islandData.portRef[1];\r\n        return new Victor(x,y);\r\n    }\r\n\r\n    public getName()\r\n    {\r\n        return this.islandData.portName;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/island.ts","//\r\n// player object.. stores all information on the player\r\n// \r\n\r\nexport default class Player\r\n{\r\n    private gold:number = 0;     // premium currency\r\n    private silver:number = 0;   // basic in-game currency\r\n    private _lastReload:number = 0;   // UTC timestamp of last reload time\r\n    private _reloadTime:number = 30000; // player can reload every reloadTime milliseconds\r\n    private _numReloads:number = 0; // number of times the user has reloaded\r\n\r\n    public getGold()\r\n    {\r\n        return this.gold;\r\n    }\r\n\r\n    public getSilver()\r\n    {\r\n        return this.silver;\r\n    }\r\n\r\n    public incGold(amount:number)\r\n    {\r\n        this.gold += amount;\r\n    }\r\n\r\n    public decGold(amount:number)\r\n    {\r\n        this.gold -= amount;\r\n    }\r\n    public incSilver(amount:number)\r\n    {\r\n        this.silver += amount;\r\n    }\r\n\r\n    public decSilver(amount:number)\r\n    {\r\n        this.silver -= amount;\r\n    }\r\n\r\n    public get lastReload()\r\n    {\r\n        return this._lastReload;\r\n    }\r\n\r\n    public set lastReload(loadtime:number)\r\n    {\r\n        this._lastReload = loadtime;\r\n    }\r\n\r\n    public get reloadTime()\r\n    {\r\n        return this._reloadTime;\r\n    }\r\n\r\n    public get numReloads()\r\n    {\r\n        return this._numReloads;\r\n    }\r\n\r\n    public incReloads()\r\n    {\r\n        this._numReloads++;\r\n    }\r\n }\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/player.ts","//\r\n// FXManager class to manage cannon balls, miss plumes, explosions, smoke fx on the sea\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport CannonBall from './cannonball';\r\nimport GameObject from './gameobject';\r\nimport { ObjectType } from './gameobject';\r\nimport Ship from './ship';\r\nimport theSea from './theSea';\r\nimport Victor = require('victor');\r\n\r\ndeclare var PolyK: any;\r\n\r\nexport default class FXManager\r\n{\r\n\r\n    private ballList:Array<CannonBall> = []; // the pool of cannon balls\r\n    private lastBall:number=0;  // last ball we handed out - this will also index into the splash/explosion/smoke arrays\r\n    private splashList:Array<PIXI.extras.AnimatedSprite> = [];\r\n    private explosionList:Array<PIXI.extras.AnimatedSprite> = [];\r\n    private muzzlePlumeList:Array<PIXI.extras.AnimatedSprite> = [];\r\n    private smokingPlumeList:Array<PIXI.extras.AnimatedSprite> = [];\r\n    private smokeInUse:Array<boolean> = [];\r\n    private nextSmoke:number = 0; // smoke doesnt need 100, likely only 20 or so.. one per ship so needs its own pool tracking number\r\n    private isles:Array<GameObject>;    // reference to theSea's island array\r\n    private ships:Array<GameObject>;    // reference to theSea's ship array\r\n    private container:PIXI.Container;   // the container to add effects to\r\n    private splash:Array<PIXI.Texture> = [];  // array of textures for the splash fx\r\n    private explosion:Array<PIXI.Texture> = []; // array for explosion textures\r\n    private muzzlePlume:Array<PIXI.Texture> = []; // smoke from cannon fire\r\n    private smokingPlume:Array<PIXI.Texture> = []; // ship wreck smoke\r\n\r\n    private target:Array<PIXI.Texture> = [];\r\n\r\n    // request the assets we need loaded\r\n    public addLoaderAssets()\r\n    {\r\n        PIXI.loader.add(\"./images/fx/shipfx.json\")\r\n                   .add(\"./images/ui/selection.json\");\r\n    }\r\n\r\n    // assets are loaded, initialize sprites etc\r\n    public onAssetsLoaded()\r\n    {\r\n        this.initBalls();\r\n        this.initAnimations();\r\n    }\r\n\r\n    private initAnimations()\r\n    {\r\n        var i;\r\n        var s;\r\n\r\n        for (i=1; i<25; i++)\r\n        {\r\n            s = \"spout\" + Ship.zeroPad(i, 4) + \".png\";\r\n            this.splash.push(PIXI.Texture.fromFrame(s));\r\n        }\r\n        this.initSplashPool();\r\n\r\n        \r\n        for (i=1; i<68; i++)\r\n        {\r\n            s = \"fiery_explosion\" + Ship.zeroPad(i, 4) + \".png\";\r\n            this.explosion.push(PIXI.Texture.fromFrame(s));\r\n        }\r\n        this.initExplosionPool();\r\n\r\n        for (i=1; i<121; i++)\r\n        {\r\n            s = \"smoke_cloud\" + Ship.zeroPad(i, 4) + \".png\";\r\n            this.muzzlePlume.push(PIXI.Texture.fromFrame(s));\r\n        }\r\n        this.initMuzzlePool();\r\n\r\n        for (i=1; i<43; i++)\r\n        {\r\n            s = \"ship_destruction_animation\" + Ship.zeroPad(i, 4) + \".png\";\r\n            this.smokingPlume.push(PIXI.Texture.fromFrame(s));\r\n        }\r\n        this.initSmokePool();\r\n\r\n        for (i=1; i<61; i++)\r\n        {\r\n            s = \"selected\" + Ship.zeroPad(i,4) + \".png\";\r\n            this.target.push(PIXI.Texture.fromFrame(s));\r\n        }\r\n    }\r\n\r\n    private initSplashPool()\r\n    {\r\n        var i;\r\n        var anim;\r\n\r\n        for (i=0; i<100; i++)\r\n        {\r\n            anim = new PIXI.extras.AnimatedSprite(this.splash);\r\n            anim.anchor.x = 0.5;\r\n            anim.anchor.y = 1;  // anchor/origin is the middle bottom of the sprite\r\n            anim.loop = false;\r\n            this.splashList.push(anim);\r\n        }\r\n    }\r\n\r\n    private initExplosionPool()\r\n    {\r\n        var i;\r\n        var anim;\r\n\r\n        for (i=0; i<100; i++)\r\n        {\r\n            anim = new PIXI.extras.AnimatedSprite(this.explosion);\r\n            anim.anchor.x = 0.54;\r\n            anim.anchor.y = 0.68;  // anchor/origin is at 27,42 on a frame 50,62\r\n            anim.loop = false;\r\n            this.explosionList.push(anim);\r\n        }\r\n    }\r\n\r\n    private initMuzzlePool()\r\n    {\r\n        var i;\r\n        var anim;\r\n\r\n        for (i=0; i<100; i++)\r\n        {\r\n            anim = new PIXI.extras.AnimatedSprite(this.muzzlePlume);\r\n            anim.anchor.x = 1;\r\n            anim.anchor.y = 0.5;  // anchor/origin center right (anim goes left)\r\n            anim.loop = false;\r\n            this.muzzlePlumeList.push(anim);\r\n        }\r\n    }\r\n\r\n    private initSmokePool()\r\n    {\r\n        var i;\r\n        var anim;\r\n\r\n        for (i=0; i<22; i++)\r\n        {\r\n            anim = new PIXI.extras.AnimatedSprite(this.smokingPlume);\r\n            anim.anchor.x = 0.8;\r\n            anim.anchor.y = 1;  // anchor/origin is 80% right and and at bottom\r\n            anim.loop = false;\r\n            anim.animationSpeed = 0.50;\r\n            anim.alpha = 0.67;\r\n            this.smokingPlumeList.push(anim);\r\n            this.smokeInUse[i] = false; // mark all available\r\n        }\r\n    }\r\n\r\n    public setIslesShips(isles:Array<GameObject>, ships:Array<GameObject>)\r\n    {\r\n        this.isles = isles;\r\n        this.ships = ships;\r\n    }\r\n\r\n    public setFXContainer(container:PIXI.Container)\r\n    {\r\n        this.container = container;\r\n    }\r\n\r\n    private initBalls()\r\n    {\r\n        for (var i=0; i<100; i++)\r\n        {\r\n            this.ballList.push(new CannonBall());\r\n        }\r\n    }\r\n\r\n    // returns index of smoke plum used, when caller is removed/destroyed this index should be returned to pool\r\n    public placeSmokePlume(x:number, y:number)\r\n    {\r\n        // use nextSmoke then increment index\r\n        this.smokingPlumeList[this.nextSmoke].x = x;\r\n        this.smokingPlumeList[this.nextSmoke].y = y;\r\n\r\n        // play from beginning, on anim end it will loop from an interior frame\r\n        this.smokingPlumeList[this.nextSmoke].gotoAndPlay(0);\r\n\r\n        var smokeID = this.nextSmoke;\r\n        this.container.addChild(this.smokingPlumeList[this.nextSmoke]);\r\n\r\n        // loop not from the beginning but from frame#21\r\n        this.smokingPlumeList[this.nextSmoke].onComplete = () => { this.smokingPlumeList[smokeID].gotoAndPlay(21);};\r\n        \r\n        this.smokeInUse[this.nextSmoke] = true;\r\n        var retVal = this.nextSmoke;\r\n        this.findNextSmoke();\r\n\r\n        return retVal; // return the index to caller so that it can be returned to pool later\r\n    }\r\n\r\n    // set next smoke to next available index in pool\r\n    private findNextSmoke()\r\n    {\r\n        var count = this.smokingPlumeList.length;\r\n        var i = this.nextSmoke;\r\n        var found = false;\r\n        var t = 0;\r\n        \r\n        while (!found)\r\n        {\r\n            i++;\r\n            t++;\r\n            if (t>=count)\r\n            {\r\n                console.log(\"smoke pool exhausted, none available\");\r\n                break; // none available!\r\n            }\r\n\r\n            // wrap around\r\n            if (i > count)\r\n                i = 0;\r\n\r\n            if (this.smokeInUse[i] == false) {\r\n                this.nextSmoke = i;\r\n                found = true;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    public returnSmokeToPool(index:number)\r\n    {\r\n        // index given to ship will be sent backl to us when ship is looted or disappears\r\n        this.smokingPlumeList[index].stop();\r\n        this.container.removeChild(this.smokingPlumeList[index]);\r\n        this.smokeInUse[index] = false;\r\n    }\r\n\r\n    public placeMuzzlePlume(x:number, y:number, dir:Victor)\r\n    {\r\n        // place a plume with given position and direction (v is normalized)\r\n        // assume last ball so use lastBall as index to use\r\n        this.muzzlePlumeList[this.lastBall].x = x;\r\n        this.muzzlePlumeList[this.lastBall].y = y;\r\n        // rotate the plume into the direction of the shot, plume is in negative x axis (faces left)\r\n        var plumeDir:Victor = new Victor(dir.x, dir.y);\r\n        //plumeDir.rotate(-Math.PI/2); // simply rotate the given direction 180 \r\n        this.muzzlePlumeList[this.lastBall].rotation = plumeDir.angle() + Math.PI;\r\n        this.muzzlePlumeList[this.lastBall].gotoAndPlay(0);\r\n\r\n        this.container.addChild(this.muzzlePlumeList[this.lastBall]);\r\n\r\n        let ball = this.lastBall; \r\n        this.muzzlePlumeList[this.lastBall].onComplete = () => { this.container.removeChild(this.muzzlePlumeList[ball]); this.muzzlePlumeList[ball].gotoAndStop(0); console.log(\"Removing muzzlePlume: \" + ball );};\r\n    }\r\n\r\n    // get cannonball from pool, returns null if all in use (!)\r\n    public getCannonBall()\r\n    {\r\n        var ball;\r\n        var count = 0;\r\n        var found = false;\r\n\r\n        while (!found)\r\n        {\r\n            this.lastBall++;\r\n            count++;\r\n            if (count > this.ballList.length) {\r\n                console.log(\"no cannonBalls available in pool\");\r\n                return null; // all cannonballs are out! take cover!\r\n            }\r\n\r\n            if (this.lastBall >= this.ballList.length)\r\n                this.lastBall = 0; // wrap around to head of list\r\n\r\n            if (!this.ballList[this.lastBall].inUse)\r\n            {\r\n                this.ballList[this.lastBall].inUse = true;\r\n                found = true;\r\n                console.log(\"ballList: assigning ball: \" + this.lastBall);\r\n            }\r\n        }\r\n\r\n        var numChildren = this.container.children.length;\r\n        this.container.addChild(this.ballList[this.lastBall]);\r\n\r\n        return this.ballList[this.lastBall];\r\n    }\r\n\r\n    // determine if this cannonBall has struck any isle or ship\r\n    private hit(ball:CannonBall)\r\n    {\r\n        var hitObj:GameObject = null;\r\n        var i=0;\r\n        var x,y;\r\n\r\n        // collision code here\r\n        // islands first\r\n        for (let entry of this.isles) {\r\n            // first do rectangular hit test\r\n            if (theSea.boxHitTest(entry.getSprite(), ball)) {\r\n                //console.log(\"ball inside island rect! checking PolyK\");\r\n                // sprites overlap, now do a PolyK contains point\r\n                x = ball.x;\r\n                y = 8192 - ball.y; // convert to cartesian\r\n                if (PolyK.ContainsPoint(entry.getCartPolyData(), x, y)) {\r\n                    console.log(\"hit \" + entry.getSprite().name + \"!\");\r\n                    hitObj = entry;\r\n                    break; // short circuit the loop\r\n                }\r\n            }\r\n        }\r\n        // now check boats\r\n        for (let entry of this.ships) {\r\n            // ignore the firer of this ball\r\n            if (ball.firer == entry)\r\n                continue;\r\n            // first do rectangular hit test\r\n            if (theSea.boxHitTest(entry.getSprite(), ball)) {\r\n                // sprites overlap, now do a PolyK contains point\r\n                x = ball.x;\r\n                y = 8192 - ball.y;\r\n                if ((<Ship>entry).hitTestByPoint(x,y)) {\r\n                    hitObj = entry;\r\n                    break; // short circuit the loop\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        return hitObj;\r\n    }\r\n\r\n    public placeTarget(ship:Ship)\r\n    {\r\n        var targ = new PIXI.extras.AnimatedSprite(this.target);\r\n        targ.anchor.x = 0.5;\r\n        targ.anchor.y = 0.5;\r\n        var ref = ship.getRefPt();\r\n        targ.x = ship.getSprite().x + ref.x;\r\n        targ.y = ship.getSprite().y + ref.y;\r\n        this.container.addChild(targ);\r\n        targ.loop = true;\r\n        targ.play();\r\n    }\r\n\r\n    public update()\r\n    {\r\n        var hit = false;\r\n        var hitObj;\r\n        let i = 0;\r\n\r\n        for (i=0; i<this.ballList.length; i++) {\r\n            if (this.ballList[i].inUse) {\r\n                //console.log(\"updating ball: \" + i);\r\n                this.ballList[i].update();\r\n                let ball = 0;\r\n                // check spent\r\n                if (this.ballList[i].spent)\r\n                {\r\n                    // put miss FX at its spot and remove it from contention\r\n                    this.splashList[i].x = this.ballList[i].x;\r\n                    this.splashList[i].y = this.ballList[i].y;\r\n                    this.container.addChild(this.splashList[i]);\r\n                    this.splashList[i].play(); // start the animation\r\n                    ball = i;\r\n                    this.splashList[i].onComplete = () => { this.container.removeChild(this.splashList[ball]); this.splashList[ball].gotoAndStop(0); console.log(\"Removing splash: \" + ball );};\r\n                    this.ballList[i].reset();\r\n                    this.container.removeChild(this.ballList[i]);\r\n                    console.log(\"ball \" + i + \" spent... SPLASH\");\r\n                    continue;\r\n                }\r\n\r\n                // collide with islands and ships code here\r\n                \r\n                hitObj = this.hit(this.ballList[i]);\r\n                \r\n                if (hitObj)\r\n                {\r\n                    // play hit animation\r\n                    this.explosionList[i].x = this.ballList[i].x;\r\n                    this.explosionList[i].y = this.ballList[i].y;\r\n                    this.container.addChild(this.explosionList[i]);\r\n                    this.explosionList[i].play(); // start the animation\r\n                    ball = i;\r\n                    this.explosionList[i].onComplete = () => { this.container.removeChild(this.explosionList[ball]); this.explosionList[ball].gotoAndStop(0); console.log(\"Removing explosion: \" + ball );};\r\n\r\n                    this.ballList[i].reset(); // return ball to pool\r\n                    this.container.removeChild(this.ballList[i]);\r\n                    // send the damage to the target if its a ship\r\n                    if (hitObj.getType() == ObjectType.SHIP) {\r\n                        (<Ship>hitObj).receiveFire(this.ballList[i].weight, this.ballList[i].firer);\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/fxmanager.ts","//\r\n// the main HUD, overlays theSea\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport sailTrim from './sailtrim';\r\nimport CompassRose from './compassrose';\r\nimport Watch from './watch';\r\nimport Ship from './ship';\r\nimport EconomyIcon from './economyicon';\r\nimport { EcoType } from './economyicon';\r\nimport Player from './player';\r\nimport ShipWidget from './shipwidget';\r\nimport PopupManager from './popupmanager';\r\nimport popShipDetails from './popshipdetail';\r\nimport Button from './button';\r\nimport popTownInterface from './poptowninterface';\r\nimport EconomyItem from './economyitem';\r\nimport SingletonClass from './singleton';\r\nimport popMsgBox from './popmsgbox';\r\n\r\ndeclare var TweenMax:any;\r\ndeclare var FB:any;\r\n\r\nexport default class MainHUD \r\n{\r\n    private container:PIXI.Container = new PIXI.Container();\r\n\r\n    private header:PIXI.Sprite; // background for header\r\n    private footer:PIXI.Sprite; // background for footer\r\n\r\n    private compassRose:CompassRose;\r\n    private rightCannonBattery:PIXI.Sprite;\r\n    private leftCannonBattery:PIXI.Sprite;\r\n    private _sailTrim:sailTrim;\r\n\r\n    private headingWatch:Watch;\r\n    private lootWatch:Watch;\r\n\r\n    private trackShip:Ship; // the ship the hud is currently tracking\r\n\r\n    private didGrounding:boolean = false;\r\n\r\n    private uiLayer:PIXI.Container;\r\n    private lootAvail:Array<EconomyIcon>=[];\r\n\r\n    private silverCoins:Array<PIXI.Sprite>=[];\r\n    private goldCoins:Array<PIXI.Sprite>=[];\r\n    private coinNum:number = 0;\r\n    private streamCoinEffect:boolean = false;\r\n    private streamGold:boolean = false;\r\n    private coinInc:number = 1;\r\n    private lastCoinTime:number = 0;\r\n    private coinCount:number = 0;\r\n    private coinMax:number = 0;\r\n    private coinDelta:number = 100; // every 100ms by default\r\n    private coinPos:PIXI.Point = new PIXI.Point(0,0);\r\n\r\n    private txtSilverCoins:PIXI.Text;\r\n    private txtGoldCoins:PIXI.Text;\r\n\r\n    private shipWidget:ShipWidget;\r\n    private popupManager:PopupManager;\r\n\r\n    private economyLoaded:boolean = false;\r\n\r\n    private btnAnchor:Button; // the anchor button for putting in to port\r\n\r\n    // request the assets we need loaded\r\n    public addLoaderAssets()\r\n    {\r\n        PIXI.loader.add(\"./images/ui/pottw5ui.json\")\r\n                   .add(\"images/2yYayZk.png\")\r\n                   .add(\"images/F8HIZMZFF22CHDE.MEDIUM.jpg\")\r\n                   .add(\"./images/ui/economy_icons.json\")\r\n                   .add(\"./images/ui/pottwcharacters.json\");\r\n        this.loadJSON(\"./data/economydata.json\", this.onEconomyLoaded);\r\n        \r\n    }\r\n        \r\n    private onEconomyLoaded = (responseText:string) => \r\n    {\r\n        var json_data = JSON.parse(responseText);\r\n        //console.log(json_data);\r\n        this.economyLoaded = true;\r\n        // save the data to the economyicon static\r\n        EconomyItem.setEconomyData(json_data);\r\n    }\r\n\r\n    // assets are loaded, initialize sprites etc\r\n    public onAssetsLoaded()\r\n    {\r\n        // create 100 coin sprites for loot effect\r\n        var i;\r\n        for (i = 0; i<50; i++) {\r\n            this.silverCoins[i] = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n            this.silverCoins[i].anchor.x = this.silverCoins[i].anchor.y = 0.5;\r\n        }\r\n        // create 100 coin sprites for loot effect\r\n        for (i = 0; i<50; i++) {\r\n            this.goldCoins[i] = new PIXI.Sprite(PIXI.Texture.fromFrame(\"goldCoin.png\"));\r\n            this.goldCoins[i].anchor.x = this.goldCoins[i].anchor.y = 0.5;\r\n        }\r\n\r\n        // create and place the header\r\n        this.header = new PIXI.Sprite(PIXI.Texture.fromFrame(\"UI_Header.png\"));\r\n        this.header.x = 0;\r\n        this.header.y = 0;\r\n\r\n        // create and place the footer\r\n        this.footer = new PIXI.Sprite(PIXI.Texture.fromFrame(\"UIFooter.png\"));\r\n        this.footer.x = 0;\r\n        this.footer.y = window.innerHeight - this.footer.height;\r\n\r\n        this.rightCannonBattery = new PIXI.Sprite(PIXI.Texture.fromFrame(\"CannonArray.png\"));\r\n        this.rightCannonBattery.x = this.footer.width - this.rightCannonBattery.width + 40;\r\n        this.rightCannonBattery.y = this.footer.y;\r\n        this.rightCannonBattery.interactive = true;\r\n        this.rightCannonBattery.on(\"click\", this.fireRight);\r\n\r\n        // sail trim nbext to guns\r\n        this._sailTrim = new sailTrim();\r\n        this._sailTrim.init();\r\n        this._sailTrim.scale.x = this._sailTrim.scale.y = 0.67;\r\n        this._sailTrim.x = this.rightCannonBattery.x - this._sailTrim.width + 20;\r\n        this._sailTrim.y = window.innerHeight - this._sailTrim.height;\r\n\r\n        this.compassRose = new CompassRose();\r\n        this.compassRose.init();\r\n        // pivot set by compassrose to be center of itself\r\n        this.compassRose.x = this._sailTrim.x - this.compassRose.width/2;\r\n        this.compassRose.y = window.innerHeight - this.compassRose.height/2;\r\n\r\n        this.leftCannonBattery = new PIXI.Sprite(PIXI.Texture.fromFrame(\"CannonArray.png\"));\r\n        this.leftCannonBattery.x = this.compassRose.x - this.compassRose.width/2; // scaleX will be flipped which makes its anchor point top right\r\n        this.leftCannonBattery.y = this.footer.y;\r\n        this.leftCannonBattery.scale.x = -1; // flip the art so it points left\r\n        this.leftCannonBattery.interactive = true;\r\n        this.leftCannonBattery.on(\"click\", this.fireLeft);\r\n\r\n        this.headingWatch = new Watch();\r\n        this.headingWatch.init();\r\n\r\n        this.lootWatch = new Watch();\r\n        this.lootWatch.init();\r\n\r\n        this.headingWatch.x = this.compassRose.x - this.headingWatch.width/2;\r\n        this.headingWatch.y = this.compassRose.y - this.compassRose.height/2 - this.headingWatch.height - 5;\r\n\r\n        this.shipWidget = new ShipWidget();\r\n        this.shipWidget.init();\r\n        this.shipWidget.x = 20;\r\n        this.shipWidget.y = this.footer.y + 10;\r\n        this.shipWidget.scale.x = this.shipWidget.scale.y = 0.8;\r\n        this.shipWidget.interactive = true;\r\n        this.shipWidget.on('click', this.doShipDetail);\r\n\r\n        this.btnAnchor = new Button(PIXI.Texture.fromFrame(\"AnchorButton.png\"));\r\n        this.btnAnchor.x = this.footer.x + 713;\r\n        this.btnAnchor.y = this.footer.y - 20;\r\n        this.btnAnchor.on('click', this.doTownInterface);\r\n\r\n        this.container.addChild(this.header);\r\n        this.container.addChild(this.footer);\r\n        this.container.addChild(this.rightCannonBattery);\r\n        this.container.addChild(this.leftCannonBattery);\r\n        this.container.addChild(this.compassRose);\r\n        this.container.addChild(this._sailTrim);\r\n        this.container.addChild(this.headingWatch);\r\n        this.container.addChild(this.shipWidget);\r\n        this.container.addChild(this.btnAnchor);\r\n\r\n        this.initHeader();\r\n\r\n        this.headingWatch.visible = false;\r\n\r\n        window.addEventListener(\"boatSelected\", this.boatSelectedHandler, false);\r\n        window.addEventListener(\"changeHeading\", this.changeHeadingHandler, false);\r\n        window.addEventListener(\"wreckMouseDown\", this.lootMouseDown, false);\r\n        window.addEventListener(\"wreckMouseUp\", this.lootMouseUp, false);\r\n        window.addEventListener(\"floatingIconClick\", this.collectLoot, false);\r\n        window.addEventListener(\"lootDone\", this.lootDone, false);\r\n        window.addEventListener(\"merchSell\",this.merchSell, false);\r\n        window.addEventListener(\"buyGold\",this.buyGold, false);\r\n\r\n        this.testAPI(); // test the FB API\r\n    }\r\n\r\n    public setPopupManager(popman:PopupManager)\r\n    {\r\n        this.popupManager = popman;\r\n    }\r\n\r\n    private doShipDetail = () =>\r\n    {\r\n        console.log(\"doShipDetail\");\r\n        // display the ship detail popup\r\n        var pop =  new popShipDetails(this.trackShip);\r\n        this.popupManager.displayPopup(pop);\r\n    }\r\n\r\n    private doTownInterface = () =>\r\n    {\r\n        console.log(\"doTownInterface\");\r\n\r\n        //display the town interface popup\r\n        var pop =  new popTownInterface();\r\n        pop.setPopupManager(this.popupManager);\r\n        this.popupManager.displayPopup(pop);\r\n    }\r\n\r\n    private initHeader()\r\n    {\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 16,\r\n            fill: 'white'\r\n        });\r\n        \r\n        this.txtSilverCoins = new PIXI.Text('0', style);\r\n        this.txtSilverCoins.x = 654;\r\n        this.txtSilverCoins.y = 10;\r\n\r\n        this.txtGoldCoins = new PIXI.Text('0', style);\r\n        this.txtGoldCoins.x = 555;\r\n        this.txtGoldCoins.y = 10;\r\n        \r\n        this.container.addChild(this.txtSilverCoins);\r\n        this.container.addChild(this.txtGoldCoins);\r\n    }\r\n\r\n    public getContainer()\r\n    {\r\n        return this.container;\r\n    }\r\n\r\n    public setSeaUILayer(layer:PIXI.Container)\r\n    {\r\n        this.uiLayer = layer;\r\n    }\r\n\r\n    fireRight = (event:any) => {\r\n        this.trackShip.fireCannons(true);\r\n    }\r\n\r\n    fireLeft = (event:any) => {\r\n        this.trackShip.fireCannons(false);\r\n    }\r\n\r\n    changeHeadingHandler = (event:any) => {\r\n        //console.log(\"changeHeadingHandler received!\");\r\n        // ask the boat to change to new heading, it will return how much time this take\r\n        var newHeading = event.detail;\r\n        let headingTime = this.trackShip.changeHeading(newHeading);\r\n        // display a watch over the compass set to countdown by this time (milliseconds)\r\n        this.headingWatch.visible = true;\r\n        this.headingWatch.countDown(headingTime);\r\n        this.headingWatch.start(this.onCountDone);\r\n    }\r\n\r\n    onCountDone = () => {\r\n        this.headingWatch.visible = false;\r\n        //console.log(\"onCountDone!\");\r\n    }\r\n\r\n    boatSelectedHandler = (event:any) => {\r\n        // event.detail the reference to the tracked ship\r\n        var newShip:Ship = event.detail;\r\n        this.compassRose.trackShip(newShip);\r\n        this.trackShip = newShip;\r\n        var s = SingletonClass.getInstance(); \r\n        s.SetShip(this.trackShip);\r\n    }\r\n\r\n    buyGold = (e:any) =>\r\n    {\r\n        var amount = e.detail.amount; // detail contains just the coint count\r\n        var x = e.detail.x;\r\n        var y = e.detail.y;\r\n        var inc = e.detail.inc;\r\n        var refPt = new PIXI.Point(x,y); // message has sent up global pos x,y\r\n        var locPos = this.container.toLocal(refPt);\r\n        this.streamCoins(amount,locPos.x,locPos.y,true,inc);       \r\n    }\r\n\r\n    merchSell = (e:any) => {\r\n        var amount = e.detail.amount; // detail contains just the coint count\r\n        var x = e.detail.x;\r\n        var y = e.detail.y;\r\n        var refPt = new PIXI.Point(x,y); // message has sent up global pos x,y\r\n        var locPos = this.container.toLocal(refPt);\r\n        this.streamCoins(amount,locPos.x,locPos.y);\r\n    }\r\n\r\n    lootMouseDown = (e:any) => {\r\n        // mouse down on a wreck icon, show the loot watch and popout a loot icon one per second\r\n        var boat:Ship = e.detail.boat;\r\n        var loots = e.detail.holdLength;\r\n        console.log(\"Clicked wreck to get: \" + boat.aiNumHoldItems() + \" items\");\r\n        if (boat.aiNumHoldItems() == 0)\r\n        {\r\n            // stream some coins to the HUD when out of loot items\r\n            var x,y;\r\n            x = boat.getSprite().x + boat.getRefPt().x;\r\n            y = boat.getSprite().y + boat.getRefPt().y;\r\n            var refPt = new PIXI.Point(x,y);\r\n            var pos = boat.getSprite().toGlobal(refPt);\r\n            var locPos = this.container.toLocal(boat.getSprite().getGlobalPosition());\r\n            var coins = boat.getCoins();\r\n            this.streamCoins(coins,locPos.x,locPos.y);\r\n            boat.sink();\r\n            return; // dont pop any more\r\n        }\r\n        var item = boat.aiPopNextLoot();\r\n        if (item == null)\r\n        {\r\n            console.log(\"Error: aiPopNextLoot returned no value\");\r\n            return;\r\n        }\r\n        var s = boat.getSprite();\r\n        // rand loot\r\n        var icon = new EconomyIcon(item.type,this.lootAvail.length,true,item.rarity);\r\n        var ref = boat.getRefPt();\r\n        icon.x = s.x + ref.x;\r\n        icon.y = s.y + ref.y;\r\n        icon.throwOutAndBob();\r\n        this.uiLayer.addChild(icon);\r\n        this.lootAvail.push(icon);\r\n        \r\n    }\r\n\r\n    lootMouseUp = (e:any) => {\r\n        // mouse up over wreck, stop the loot action (even if not done)\r\n        console.log(\"End Loot click\");\r\n    }\r\n\r\n    collectLoot = (e:any) => {\r\n        // mouse up over wreck, stop the loot action (even if not done)\r\n        console.log(\"collect loot!\");\r\n        // get the icon from the details\r\n        if (this.trackShip.isHoldFull())\r\n        {\r\n            // display first mate error message\r\n            console.log(\"Captain! Our hold is full! We cant store any more!\");\r\n        }\r\n        else\r\n        {\r\n            var id = e.detail;\r\n            var targx = this.trackShip.getSprite().x + this.trackShip.getRefPt().x;\r\n            var targy = this.trackShip.getSprite().y + this.trackShip.getRefPt().y;\r\n            this.lootAvail[id].lootIcon(targx, targy);\r\n        }\r\n\r\n    }\r\n\r\n    lootDone = (e:any) => {\r\n        var id = e.detail;\r\n        // give loot to the player's boat if possible\r\n        // remove this id\r\n        this.uiLayer.removeChild(this.lootAvail[id]);\r\n        if(!this.trackShip.addToHold(this.lootAvail[id].getType()))\r\n        {\r\n            // we already checked above, not sure how it could get full between calls\r\n            console.log(\"addToHold failed post-check\");\r\n        }\r\n    }\r\n\r\n    private streamCoins(numCoins:number,x:number,y:number,gold:boolean=false,inc:number=1)\r\n    {\r\n        // stream coins to the hud every tick\r\n        this.streamCoinEffect = true;\r\n        this.coinCount = 0;\r\n        this.coinMax += numCoins;\r\n        this.coinDelta = 1000 / (40 / 3) ;\r\n        this.coinPos.x = x;\r\n        this.coinPos.y = y;\r\n        this.streamGold = gold;\r\n        this.coinInc = inc;\r\n    }\r\n\r\n    private loadJSON(jsonFile:string, callback:Function) \r\n    {\r\n        var xobj = new XMLHttpRequest();\r\n            xobj.overrideMimeType(\"application/json\");\r\n        xobj.open('GET', jsonFile, true); \r\n        xobj.onreadystatechange = function () {\r\n            if (xobj.readyState == 4 && xobj.status == 200) {\r\n                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\r\n                callback(xobj.responseText);\r\n            }\r\n        };\r\n        xobj.send(null);  \r\n    }\r\n\r\n    private testAPI() \r\n    {\r\n        console.log(\"FB.getLoginStatus:\")\r\n        FB.getLoginStatus(this.fbStatusResponse);\r\n    }\r\n\r\n    fbStatusResponse = (response:any) => {\r\n        console.log(\"FB.getLoginStatus:\");\r\n        console.log(response);\r\n        this.doMe();\r\n    }\r\n\r\n    private doMe()\r\n    {\r\n        console.log(\"FB.api(/me)\");\r\n        FB.api('/me', function(response:any) {\r\n            console.log(response);\r\n          });\r\n    }\r\n\r\n    public update()\r\n    {\r\n        var now = Date.now();\r\n        \r\n        if (this.streamCoinEffect)\r\n        {\r\n            if (now - this.lastCoinTime > this.coinDelta)\r\n            {\r\n                this.coinCount++;\r\n                if (this.coinCount >= this.coinMax)\r\n                {\r\n                    this.streamCoinEffect = false;\r\n                    this.coinMax = 0;\r\n                }\r\n                this.lastCoinTime = now;\r\n                if (!this.streamGold)\r\n                    this.container.addChild(this.silverCoins[this.coinNum]);\r\n                else    \r\n                    this.container.addChild(this.goldCoins[this.coinNum]);\r\n                var ox,oy,x1,y1,x2,y2,fx,fy;\r\n                ox = this.coinPos.x;\r\n                oy = this.coinPos.y;\r\n                x1 = 0;\r\n                y1 = this.container.height * 0.75;\r\n                x2 = this.container.width;\r\n                y2 = this.container.height * 0.25;\r\n                if (!this.streamGold) {\r\n                    fx = this.header.x + 636;\r\n                    fy = this.header.y + 23;\r\n                } else {\r\n                    fx = this.header.x + 534;\r\n                    fy = this.header.y + 23;\r\n                }\r\n                let coin = this.coinNum;\r\n                if (!this.streamGold) {\r\n                    this.silverCoins[this.coinNum].x = ox; \r\n                    this.silverCoins[this.coinNum].y = oy;\r\n                } else {\r\n                    this.goldCoins[this.coinNum].x = ox; \r\n                    this.goldCoins[this.coinNum].y = oy;\r\n                }\r\n                if (!this.streamGold) {\r\n                TweenMax.to(this.silverCoins[this.coinNum], 1.75,\r\n                            {bezier: {type:\"soft\", curviness:2.0,values:[{x:ox,y:oy},{x:x1,y:y1},{x:x2,y:y2},{x:fx,y:fy}]},\r\n                             onComplete: () => {this.container.removeChild(this.silverCoins[coin]); SingletonClass.player.incSilver(1);} }\r\n                            ); \r\n                } else {\r\n                TweenMax.to(this.goldCoins[this.coinNum], 1.75,\r\n                    {bezier: {type:\"soft\", curviness:2.0,values:[{x:ox,y:oy},{x:x1,y:y1},{x:x2,y:y2},{x:fx,y:fy}]},\r\n                        onComplete: () => { this.container.removeChild(this.goldCoins[coin]); SingletonClass.player.incGold(this.coinInc); } }\r\n                    );                    \r\n                }\r\n                this.coinNum++;\r\n                if (this.coinNum >= this.silverCoins.length)\r\n                    this.coinNum = 0;\r\n            }\r\n        }\r\n\r\n        if (SingletonClass.player.getSilver().toString() != this.txtSilverCoins.text)\r\n            this.txtSilverCoins.text = SingletonClass.player.getSilver().toString();\r\n\r\n        if (SingletonClass.player.getGold().toString() != this.txtGoldCoins.text)\r\n            this.txtGoldCoins.text = SingletonClass.player.getGold().toString();\r\n\r\n        this.compassRose.update();\r\n        this.headingWatch.update();\r\n        this._sailTrim.update();\r\n\r\n        if (this.trackShip.isAground())\r\n        {\r\n            if (!this.didGrounding) {\r\n                this._sailTrim.setSailTrimPercent(0);\r\n                this.didGrounding = true;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (this.didGrounding)\r\n                this.didGrounding = false;\r\n        }\r\n\r\n        if (!CompassRose.isValidHeading(this.trackShip.getAngleToWind(),this.trackShip.getHeading()))\r\n        {\r\n            this._sailTrim.showLuff();\r\n        }\r\n        else {\r\n            this._sailTrim.hideLuff();\r\n        }\r\n\r\n        if (SingletonClass.currentPort != \"\")\r\n            this.btnAnchor.visible = true;\r\n        else\r\n            this.btnAnchor.visible = false;\r\n        \r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/mainhud.ts","//\r\n// sail trim widget\r\n//\r\nimport * as PIXI from 'pixi.js';\r\n\r\nexport default class sailTrim extends PIXI.Container \r\n{\r\n    private thumbSlider:PIXI.Container;\r\n    private mainLine:PIXI.Sprite;           // block and line graphic for thumb slider\r\n    private mainLineMask:PIXI.Graphics;     // mask for the mainLine - both become children of thumbSlider\r\n    private trimMast:PIXI.Sprite;\r\n    private sail:PIXI.Sprite;\r\n    private sailContainer:PIXI.Container;   // container for the sail and its displacement texture\r\n    private displacementFilter:PIXI.filters.DisplacementFilter;\r\n    private displacementSprite:PIXI.Sprite;\r\n    private displacementTexture:PIXI.Texture;\r\n    private _showLuff:boolean = false;\r\n    private luffDir:number = 1;\r\n\r\n    private mouseDown:boolean = false;\r\n    private lastY:number = -1;\r\n    private deltaY:number;\r\n\r\n    private sailTrimPercent:number;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    // init assumes it has its sprite assets available\r\n    public init()\r\n    {\r\n        this.thumbSlider = new PIXI.Container();\r\n        this.mainLine = new PIXI.Sprite(PIXI.Texture.fromFrame(\"sliderThumb2.png\"));\r\n        this.thumbSlider.addChild(this.mainLine);\r\n        this.mainLineMask = new PIXI.Graphics();\r\n        this.mainLineMask.beginFill(0xFF0000);\r\n        this.mainLineMask.drawRect(0,0,this.mainLine.width,235); \r\n        this.mainLineMask.endFill();\r\n        this.mainLineMask.x = 0;\r\n        this.mainLineMask.y = this.mainLine.height/2 - this.mainLineMask.height/2; // centered on mainLine\r\n        this.thumbSlider.addChild(this.mainLineMask);\r\n\r\n        this.mainLine.mask = this.mainLineMask;\r\n\r\n        this.sail = new PIXI.Sprite(PIXI.Texture.fromFrame(\"Sail_Yscale.png\"));\r\n        // this.sail.x = -7;\r\n        // this.sail.y = 56;\r\n        //this.addChild(this.sail);\r\n\r\n        this.displacementTexture = PIXI.loader.resources[\"images/2yYayZk.png\"].texture;\r\n        this.displacementTexture.baseTexture.wrapMode = PIXI.WRAP_MODES.REPEAT;\r\n        this.displacementSprite = new PIXI.Sprite(this.displacementTexture);\r\n        // this.displacementSprite.width = this.sail.width; // resize to same dimensions as the sail\r\n        // this.displacementSprite.height = this.sail.height;\r\n        // this.displacementSprite.scale.x = 4;\r\n        this.displacementFilter = new PIXI.filters.DisplacementFilter(this.displacementSprite);\r\n        \r\n\r\n        this.sailContainer = new PIXI.Container();\r\n        this.sailContainer.addChild(this.sail);\r\n        this.sailContainer.x = -7;\r\n        this.sailContainer.y = 56;\r\n        this.sailContainer.addChild(this.displacementSprite);\r\n        this.addChild(this.sailContainer);\r\n\r\n        this.trimMast = new PIXI.Sprite(PIXI.Texture.fromFrame(\"sliderBack.png\"));\r\n        this.addChild(this.trimMast); // 0,0\r\n\r\n        this.thumbSlider.x = 70;         // thumbSlider is 454 pix tall and will slide under mask so only 235 of it is viewed at one time\r\n        this.thumbSlider.y = -60;\r\n        this.addChild(this.thumbSlider); // add the thumbslider to our own container\r\n\r\n        this.mainLine.interactive = true;\r\n        this.mainLine.on(\"mousemove\", this.mouseMoveHandler);\r\n        this.mainLine.on(\"mousedown\", this.mouseDownHandler);\r\n        this.mainLine.on(\"mouseup\", this.mouseUpHandler);\r\n\r\n        this.setSailTrimPercent(0); // default to all stop\r\n\r\n    }\r\n\r\n    public showLuff()\r\n    {\r\n        if (this._showLuff == false) {\r\n            this.sailContainer.filters = [this.displacementFilter];\r\n            this._showLuff = true;\r\n        }\r\n    }\r\n\r\n    public hideLuff()\r\n    {\r\n        if (this._showLuff == true) {\r\n            this.sailContainer.filters = [];\r\n            this._showLuff = false;\r\n        }\r\n    }\r\n\r\n    public getSailTrimPercent()\r\n    {\r\n        return this.sailTrimPercent;\r\n    }\r\n\r\n    public setSailTrimPercent(percent:number)\r\n    {\r\n        // set the percentage here\r\n        this.sailTrimPercent = percent; //(this.mainLine.y + 100) / 210;\r\n\r\n        // set the mainLine position\r\n        this.mainLine.y = -100 + 210 * percent; // -100 is the zero position in y for the main sheet block\r\n                        \r\n        // sail scale goes from 0 - > 1.33 -- capped for visual appeal\r\n        this.sailContainer.scale.y = this.sailTrimPercent * 1.33;\r\n    }\r\n\r\n    mouseMoveHandler = (e:any) => {\r\n\r\n        if (e.data.buttons == 0) {\r\n            if (this.mouseDown)\r\n            {\r\n                this.endSetTrim();\r\n            }\r\n        }\r\n\r\n        if (this.mouseDown)\r\n        {\r\n            // move the mainlLine up and down only depending on delta in Y\r\n            if (this.lastY != -1) {\r\n                this.deltaY = (this.lastY - e.data.global.y) * (1 / this.scale.y);\r\n                // move the mainLine\r\n                this.mainLine.y -= this.deltaY;\r\n                // cap the movement\r\n                if (this.mainLine.y < -100)\r\n                    this.mainLine.y = -100;\r\n                else if (this.mainLine.y > 110)\r\n                    this.mainLine.y = 110;\r\n\r\n                // set the percentage here\r\n                this.sailTrimPercent = (this.mainLine.y + 100) / 210;\r\n\r\n                // sail scale goes from 0 - > 1.33 -- capped for visual appeal\r\n                this.sailContainer.scale.y = this.sailTrimPercent * 1.33;\r\n            }\r\n\r\n            this.lastY = e.data.global.y;\r\n        }\r\n    }\r\n\r\n    mouseDownHandler = (e:any) => {\r\n        if (e.target == this.mainLine)\r\n        {\r\n            this.mouseDown = true;\r\n        }\r\n        \r\n    }\r\n\r\n    mouseUpHandler = (e:any) => {\r\n        // release mouse no matter what the e.target was\r\n        this.endSetTrim();\r\n    }\r\n\r\n    private endSetTrim()\r\n    {\r\n        this.mouseDown = false;\r\n        this.lastY = -1;\r\n\r\n        var myEvent = new CustomEvent(\"sailTrimEvent\",\r\n        {\r\n            'detail': this.sailTrimPercent\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    public update()\r\n    {\r\n        if (this._showLuff)\r\n        {\r\n            // if (this.displacementSprite.x >= this.sail.width)\r\n            //     this.luffDir = -1;\r\n            // if (this.displacementSprite.x < 0)\r\n            //     this.luffDir = 1;\r\n            this.displacementSprite.x += 3; // * this.luffDir;\r\n            this.displacementSprite.y += 3;\r\n            //this.displacementSprite.y += 2;\r\n        }   \r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/sailtrim.ts","//\r\n// Watch class to visually display a timer countdown for when widgets are unavailable/working\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport CompassRose from './compassrose';\r\n\r\nexport default class Watch extends PIXI.Container\r\n{\r\n    private watchFace:PIXI.Sprite;\r\n    private counter:PIXI.Sprite;\r\n    private counterContainer:PIXI.Container;\r\n    private counterMask:PIXI.Graphics;          // circular mask drawn in arc to mask progress\r\n\r\n    private finishedCallback:Function;\r\n\r\n    private percentDone:number = 0;\r\n    private lastTime:number = 0;\r\n    private totalTime:number = 0;\r\n    private timeElapsed:number = 0;\r\n\r\n    private started:boolean = false;\r\n\r\n    private timeToZero(seconds:number)\r\n    {\r\n\r\n    }\r\n\r\n    public init()\r\n    {\r\n        // assumes its aszets are loaded inot the cache\r\n        this.watchFace = new PIXI.Sprite(PIXI.Texture.fromFrame(\"Watch.png\"));\r\n        this.counter = new PIXI.Sprite(PIXI.Texture.fromFrame(\"CounterProgress.png\"));\r\n        this.addChild(this.watchFace);\r\n        this.counter.x = 6;\r\n        this.counter.y = 12;\r\n        this.counter.alpha = 0.73;\r\n        this.addChild(this.counter);\r\n\r\n        // test mask\r\n        this.percentDone = 0.25;\r\n        this.doMask();\r\n    }\r\n\r\n    public start(callback:Function)\r\n    {\r\n        this.percentDone = 0;\r\n        this.timeElapsed = 0;\r\n        this.lastTime = 0;\r\n        this.finishedCallback = callback;\r\n        this.started = true;\r\n        //console.log(\"watch started\");\r\n    }\r\n\r\n    public stop()\r\n    {\r\n        this.started = false;\r\n    }\r\n\r\n    private doMask()\r\n    {\r\n        // make a circular arc based off percentDone  100 will be no mask.. reveals clockwise as percent increases\r\n        let degs = this.percentDone * 360;\r\n        let rads = CompassRose.getRads(degs);\r\n        var arc = new PIXI.Graphics();\r\n        arc.beginFill(0xff0000);\r\n        arc.moveTo(this.counter.width/2, this.counter.height/2);\r\n        arc.arc(this.counter.width/2, this.counter.height/2, this.counter.width/2, 0, rads, false); // cx, cy, radius, angle, endAngle, anticlockwise bool\r\n        arc.endFill();\r\n        \r\n        arc.rotation = CompassRose.getRads(-90);\r\n        arc.x = this.counter.x;\r\n        arc.y = this.counter.y + this.counter.width;\r\n\r\n        if (this.counterMask)\r\n        {\r\n            this.removeChild(this.counterMask);\r\n            this.counterMask.destroy();\r\n        }\r\n\r\n        this.counterMask = arc;\r\n        this.counter.mask = this.counterMask;\r\n        this.addChild(this.counterMask);\r\n    }\r\n\r\n    public countDown(timeToCount:number)\r\n    {\r\n        // all units in milliseconds\r\n        this.totalTime = timeToCount;\r\n    }\r\n\r\n    public update()\r\n    {\r\n        if (this.started)\r\n        {\r\n            let now = Date.now();\r\n            if (this.lastTime != 0)\r\n                this.timeElapsed += now - this.lastTime;\r\n\r\n            this.lastTime = now;\r\n\r\n            this.percentDone = 1 - (this.totalTime - this.timeElapsed) / this.totalTime;\r\n\r\n            if (this.percentDone >= 1)\r\n                this.percentDone = 1;\r\n\r\n            this.doMask();\r\n\r\n            if (this.percentDone == 1)\r\n            {\r\n                this.stop();\r\n                // call our callback to indicate we are finished\r\n                if (this.finishedCallback)\r\n                    this.finishedCallback();\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/watch.ts","//\r\n// ui widget that represents ship on the hud\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport HealthBar from './healthbar';\r\n\r\nexport default class ShipWidget extends PIXI.Container\r\n{\r\n    private shipWheel:PIXI.Sprite;\r\n    private sailHealth:HealthBar;\r\n    private crewHealth:HealthBar;\r\n    private hullHealth:HealthBar;\r\n    private flag:PIXI.Sprite; \r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        this.shipWheel = new PIXI.Sprite(PIXI.Texture.fromFrame(\"shipFrameUI.png\"));\r\n        this.shipWheel.x = 99 - this.shipWheel.width / 2; // position from center\r\n        this.shipWheel.y = 63 - this.shipWheel.height / 2;\r\n        this.sailHealth = new HealthBar(50,4, 0x0000FF);\r\n        this.sailHealth.x = 0;\r\n        this.sailHealth.y = 61;\r\n        this.crewHealth = new HealthBar(50,4,0x00FF00);\r\n        this.crewHealth.x = 0;\r\n        this.crewHealth.y = 72;\r\n        this.hullHealth = new HealthBar(50,4,0xFF0000);\r\n        this.hullHealth.x = 0;\r\n        this.hullHealth.y = 83;\r\n\r\n        this.addChild(this.shipWheel);\r\n        this.addChild(this.sailHealth);\r\n        this.addChild(this.crewHealth);\r\n        this.addChild(this.hullHealth);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/shipwidget.ts","//\r\n// ShipDetail popup screen to display hold, magazine, and ship stats\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Ship from './ship';\r\nimport Button from './button';\r\nimport HealthBar from './healthbar';\r\nimport EconomyIcon from './economyicon';\r\n\r\nexport default class popShipDetails extends PopUp\r\n{\r\n    private boat:Ship;\r\n    private sailHealth:HealthBar;\r\n    private crewHealth:HealthBar;\r\n    private hullHealth:HealthBar;\r\n    private lblSails:PIXI.Text;\r\n    private lblCrew:PIXI.Text;\r\n    private lblHull:PIXI.Text;\r\n    private lblHold:PIXI.Text;\r\n    private lblShot:PIXI.Text;\r\n    private lblCannon:PIXI.Text;\r\n    private lblName:PIXI.Text;\r\n    private txtShipName:PIXI.Text;\r\n\r\n    private holdBack:PIXI.Sprite;\r\n\r\n    constructor(boat:Ship)\r\n    {\r\n        super();\r\n        this.boat = boat;\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // load background and X button\r\n\r\n        // load and position our graphics\r\n        var s = this.getShipImage();\r\n        s.x = 603 - s.width/2;\r\n        s.y = 94 - s.height/2; // coordinate in flash are based off its center\r\n        this.addChild(s);\r\n\r\n\r\n        var b = new Button(PIXI.Texture.fromFrame(\"sellBtn.png\"));\r\n        b.anchor.x = b.anchor.y = 0.5;\r\n        b.x = 649;\r\n        b.y = 400;\r\n        b.setDisabled(true);\r\n        this.addChild(b);\r\n        this.holdBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"HoldBack.png\"));\r\n        this.holdBack.x = 348 - this.holdBack.width/2;\r\n        this.holdBack.y = 379 - this.holdBack.height/2;\r\n        this.addChild(this.holdBack);\r\n        s = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        s.x = 505 - s.width/2;\r\n        s.y = 505 - s.height/2;\r\n        this.addChild(s);\r\n        s = new PIXI.Sprite(PIXI.Texture.fromFrame(\"uiCannon.png\"));\r\n        s.x = 131 - s.width/2;\r\n        s.y = 112 - s.height/2;\r\n        this.addChild(s);\r\n        s = new PIXI.Sprite(PIXI.Texture.fromFrame(\"uiBall.png\"));\r\n        s.x = 130 - s.width/2;\r\n        s.y = 158 - s.height/2;\r\n        this.addChild(s);\r\n\r\n        // health bars\r\n        this.sailHealth = new HealthBar(150,12,0x0000FF);\r\n        this.sailHealth.x = 149;\r\n        this.sailHealth.y = 192;\r\n        this.addChild(this.sailHealth);\r\n        this.crewHealth = new HealthBar(150,12,0x00FF00);\r\n        this.crewHealth.x = 149;\r\n        this.crewHealth.y = 223;\r\n        this.addChild(this.crewHealth);\r\n        this.hullHealth = new HealthBar(150,12,0xFF0000);\r\n        this.hullHealth.x = 149;\r\n        this.hullHealth.y = 252;\r\n        this.addChild(this.hullHealth);\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n        \r\n        this.lblSails = new PIXI.Text('Sails:', style);\r\n        this.lblSails.x = this.sailHealth.x  - this.lblSails.width - 5;\r\n        this.lblSails.y = this.sailHealth.y + this.sailHealth.height / 2 - this.lblSails.height / 2;\r\n        this.addChild(this.lblSails);\r\n\r\n        this.lblCrew = new PIXI.Text('Crew:', style);\r\n        this.lblCrew.x = this.crewHealth.x  - this.lblCrew.width - 5;\r\n        this.lblCrew.y = this.crewHealth.y + this.crewHealth.height / 2 - this.lblCrew.height / 2;\r\n        this.addChild(this.lblCrew);\r\n\r\n        this.lblHull = new PIXI.Text('Hull:', style);\r\n        this.lblHull.x = this.hullHealth.x  - this.lblHull.width - 5;\r\n        this.lblHull.y = this.hullHealth.y + this.hullHealth.height / 2 - this.lblHull.height / 2;\r\n        this.addChild(this.lblHull);\r\n\r\n        this.lblHold = new PIXI.Text('Hold:', style);\r\n        this.lblHold.x = this.holdBack.x;\r\n        this.lblHold.y = this.holdBack.y + this.holdBack.height + 3;\r\n        this.addChild(this.lblHold);\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n        var sMag = this.boat.getMagBall() + \" of \" + this.boat.getMagBallMax();\r\n        this.lblShot = new PIXI.Text(sMag, styleb);\r\n        this.lblShot.x = this.sailHealth.x + this.sailHealth.width / 2 - this.lblShot.width /2;\r\n        this.lblShot.y = 135;\r\n        this.addChild(this.lblShot);\r\n\r\n        this.lblCannon = new PIXI.Text('x 6 4lb', styleb);\r\n        this.lblCannon.x = this.sailHealth.x + this.sailHealth.width / 2 - this.lblShot.width /2;\r\n        this.lblCannon.y = 93;\r\n        this.addChild(this.lblCannon);\r\n\r\n        this.lblName = new PIXI.Text('Name:', style);\r\n        this.lblName.x = 172;\r\n        this.lblName.y = 18;\r\n        this.addChild(this.lblName);\r\n\r\n        this.txtShipName = new PIXI.Text('\\\"The Donna Doctrine\\\"', style);\r\n        this.txtShipName.x = 172;\r\n        this.txtShipName.y = 43;\r\n        this.addChild(this.txtShipName);\r\n\r\n        this.loadHold();\r\n\r\n    }\r\n\r\n    private loadHold()\r\n    {\r\n        var hold = this.boat.getHold();\r\n        console.log(hold);\r\n        for (var i=0; i<hold.length; i++)\r\n        {\r\n            var e = new EconomyIcon(hold[i].type, i, false,hold[i].rarity);\r\n            // place in our 10x4 grid\r\n            e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n            e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n            e.x += this.holdBack.x + 10;\r\n            e.y += this.holdBack.y + 4;\r\n            this.addChild(e);\r\n        }\r\n    }\r\n\r\n    private getShipImage()\r\n    {\r\n        // switch off of ship type\r\n        return new PIXI.Sprite(PIXI.Texture.fromFrame(\"uiCorvette.png\"));\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popshipdetail.ts","//\r\n// TownInterface class for when players put to port and need to do business on an island\r\n// \r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport popProvisioner from './popprovisioner';\r\nimport popPrizeAgent from './popprizeagent';\r\nimport PopupManager from './popupmanager';\r\nimport SingletonClass from './singleton';\r\nimport popWarehouse from './popwarehouse';\r\nimport popMarket from './popmarket';\r\n\r\nexport default class popTownInterface extends PopUp\r\n{\r\n    private building1:PIXI.Sprite; \r\n    private building2:PIXI.Sprite; \r\n    private building3:PIXI.Sprite; \r\n    private building4:PIXI.Sprite; \r\n    private building5:PIXI.Sprite; \r\n    private building6:PIXI.Sprite; \r\n    private building7:PIXI.Sprite; \r\n    private dock:PIXI.Sprite;\r\n    private txtTownName:PIXI.Text;\r\n    private txtMouseOver:PIXI.Text;\r\n    private popMan:PopupManager;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public setPopupManager(popMan:PopupManager)\r\n    {\r\n        this.popMan = popMan;\r\n    }\r\n    public init()\r\n    {\r\n        super.init();\r\n        // add buildings by sort order, back to front\r\n        this.building6 = new Button(PIXI.Texture.fromFrame(\"building6.png\"), true);\r\n        this.building6.x = 121;\r\n        this.building6.y = 48;\r\n        this.building6.on('click', this.doPrizeAgent);\r\n        this.building6.on('mouseover', this.doPrizeOver);\r\n        this.addChild(this.building6);\r\n        this.building1 = new PIXI.Sprite(PIXI.Texture.fromFrame(\"building1.png\"));\r\n        this.building1.x = 283;\r\n        this.building1.y = 83;\r\n        this.addChild(this.building1);\r\n        this.building4 = new PIXI.Sprite(PIXI.Texture.fromFrame(\"building4.png\"));\r\n        this.building4.x = 496;\r\n        this.building4.y =79;\r\n        this.addChild(this.building4);\r\n        this.building3 = new PIXI.Sprite(PIXI.Texture.fromFrame(\"buildingForge.png\"));\r\n        this.building3.x = 338;\r\n        this.building3.y = 122;\r\n        this.addChild(this.building3);\r\n        this.building5 = new Button(PIXI.Texture.fromFrame(\"building5.png\"), true);\r\n        this.building5.x = 439;\r\n        this.building5.y = 210;\r\n        this.building5.on('click',this.doProvisioner);\r\n        this.building5.on('mouseover', this.doProvisOver);\r\n        this.addChild(this.building5);\r\n        this.building7 = new Button(PIXI.Texture.fromFrame(\"wareHouse.png\"), true);\r\n        this.building7.x = 130;\r\n        this.building7.y =207;\r\n        this.building7.on('click',this.doWarehouse);\r\n        this.building7.on('mouseover', this.doWareOver);\r\n        this.addChild(this.building7);\r\n        this.dock = new PIXI.Sprite(PIXI.Texture.fromFrame(\"dockSW.png\"));\r\n        this.dock.x = 329 - this.dock.width; // position is flipped in animate so origin is top right\r\n        this.dock.y = 354;\r\n        this.addChild(this.dock);\r\n        this.building2 = new Button(PIXI.Texture.fromFrame(\"building2.png\"), true);\r\n        this.building2.x = 261;\r\n        this.building2.y =282;\r\n        this.building2.on('click',this.doMarket);\r\n        this.building2.on('mouseover', this.doMarketOver);\r\n        this.addChild(this.building2);\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n\r\n        var townName = SingletonClass.currentPort;\r\n        this.txtTownName = new PIXI.Text(townName, style);\r\n        this.txtTownName.x = this.bg.width /2 - this.txtTownName.width / 2;\r\n        this.txtTownName.y = 29;\r\n        this.addChild(this.txtTownName);\r\n\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 18,\r\n            fill: 'black',\r\n            wordWrap: true,\r\n            wordWrapWidth: 312\r\n        });\r\n\r\n        this.txtMouseOver = new PIXI.Text(townName + \" info.  Mouse over the buildings for details.\", styleb);\r\n        this.txtMouseOver.x = 359;\r\n        this.txtMouseOver.y = 445;\r\n        this.addChild(this.txtMouseOver);\r\n\r\n\r\n    }\r\n\r\n    private doPrizeAgent = () =>\r\n    {\r\n        if (this._backgrounded)\r\n        {\r\n            console.log(\"backgrounded click: ignoring\");\r\n            return;\r\n        }\r\n        console.log(\"doPrizeAgent\");\r\n        var pop =  new popPrizeAgent();\r\n        this.popMan.displayPopup(pop);\r\n    }\r\n\r\n    private doPrizeOver = () =>\r\n    {\r\n        this.txtMouseOver.text = \"Prize Agent. Reload you magazine with cannon balls here.\";\r\n    }\r\n\r\n    private doProvisioner = (e:any) =>\r\n    {\r\n        if (this._backgrounded)\r\n        {\r\n            console.log(\"backgrounded click: ignoring\");\r\n            return;\r\n        }\r\n        console.log(\"doProvisioner\");\r\n        // display the town interface popup\r\n        var pop =  new popProvisioner();\r\n        this.popMan.displayPopup(pop);\r\n    }\r\n\r\n    private doProvisOver = () =>\r\n    {\r\n        this.txtMouseOver.text = \"Provisioner. Buy ship's goods here and/or sell items in your hold.\";\r\n    }\r\n\r\n    private doWarehouse = () =>\r\n    {\r\n        if (this._backgrounded)\r\n        {\r\n            console.log(\"backgrounded click: ignoring\");\r\n            return;\r\n        }\r\n        console.log(\"doWarehouse\");\r\n        // display the town interface popup\r\n        var pop =  new popWarehouse();\r\n        this.popMan.displayPopup(pop);\r\n    }\r\n\r\n    private doWareOver = () =>\r\n    {\r\n        this.txtMouseOver.text = \"Warehouse. Buy market items here and/or sell items in your hold\";\r\n    }\r\n\r\n    private doMarket = () =>\r\n    {\r\n        if (this._backgrounded)\r\n        {\r\n            console.log(\"backgrounded click: ignoring\");\r\n            return;\r\n        }\r\n        console.log(\"doMarket\");\r\n        // display the town interface popup\r\n        var pop =  new popMarket();\r\n        this.popMan.displayPopup(pop);\r\n    }\r\n\r\n    private doMarketOver = () =>\r\n    {\r\n        var townName = SingletonClass.currentPort;\r\n        this.txtMouseOver.text = \"Market. Check the going rates for items in \" + townName;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/poptowninterface.ts","//\r\n// popProvisioner class for buying selling provisions in town. This is where the player will\r\n//                  sell the stuff in their boat hold and buy ships provisions for thier boat\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport EconomyIcon from './economyicon';\r\nimport SingletonClass from './singleton';\r\n\r\n\r\nexport default class popProvisioner extends PopUp\r\n{\r\n    private mercBack:PIXI.Sprite;\r\n    private holdBack:PIXI.Sprite;\r\n    private coin:PIXI.Sprite;\r\n    private sellBtn:Button;\r\n    private txtAmount:PIXI.Text;\r\n    private eIcons:Array<EconomyIcon> = [];\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // add backdrop and x buttton\r\n\r\n        this.mercBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"HoldBack.png\"));\r\n        this.mercBack.x = 336 - this.mercBack.width/2;\r\n        this.mercBack.y = 189 - this.mercBack.height/2;\r\n        this.addChild(this.mercBack);\r\n\r\n        this.holdBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"HoldBack.png\"));\r\n        this.holdBack.x = 336 - this.holdBack.width/2;\r\n        this.holdBack.y = 417 - this.holdBack.height/2;\r\n        this.addChild(this.holdBack);\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n        \r\n        var lbl = new PIXI.Text('Merchant:', style);\r\n        lbl.x = this.mercBack.x;\r\n        lbl.y = this.mercBack.y - lbl.height - 2;\r\n        this.addChild(lbl);\r\n\r\n        lbl = new PIXI.Text('Hold:', style);\r\n        lbl.x = this.holdBack.x;\r\n        lbl.y = this.holdBack.y - lbl.height - 2;\r\n        this.addChild(lbl);\r\n\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n\r\n        lbl = new PIXI.Text('Provisioner:', styleb);\r\n        lbl.x = this.mercBack.x + this.mercBack.width/2 - lbl.width / 2;\r\n        lbl.y = 35;\r\n        this.addChild(lbl);\r\n\r\n        this.sellBtn = new Button(PIXI.Texture.fromFrame(\"sellBtn.png\"));\r\n        this.sellBtn.x = 531;\r\n        this.sellBtn.y = 302;\r\n        this.sellBtn.scale.x = this.sellBtn.scale.y = 0.67;\r\n        this.sellBtn.on('click',this.onSell);\r\n        this.addChild(this.sellBtn);\r\n\r\n        this.coin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        this.coin.x = 329 - this.coin.width/2;\r\n        this.coin.y = 306 - this.coin.height/2;\r\n        this.addChild(this.coin);\r\n\r\n        var stylec = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'white'\r\n        });\r\n        this.txtAmount = new PIXI.Text('0', stylec);\r\n        this.txtAmount.x = this.coin.x + this.coin.width + 5;\r\n        this.txtAmount.y = this.coin.y + this.coin.height/2 - this.txtAmount.height/2;\r\n        this.addChild(this.txtAmount);\r\n\r\n        this.loadHold();\r\n        this.displayMerch();\r\n    }\r\n\r\n    private loadHold(createIcons:boolean=true)\r\n    {\r\n        var hold = SingletonClass.ship.getHold();\r\n        var e;\r\n        for (var i=0; i<hold.length; i++)\r\n        {\r\n            if (createIcons)\r\n                e = new EconomyIcon(hold[i].type, i, false,hold[i].rarity);\r\n            else\r\n                e = this.eIcons[i];\r\n\r\n            // place in our 10x4 grid\r\n            e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n            e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n            e.x += this.holdBack.x + 10;\r\n            e.y += this.holdBack.y + 4;\r\n\r\n            if (createIcons)\r\n            {\r\n                e.interactive = true;\r\n                e.on('click',this.iconClicked);\r\n                this.eIcons.push(e);\r\n                this.addChild(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    private displayMerch()\r\n    {\r\n        var i=0;\r\n        // provisioner sells hard tack, meat, fish, wine, rum\r\n        var e = new EconomyIcon(20, 0, false, 0);\r\n        e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n        e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n        e.x += this.mercBack.x + 10;\r\n        e.y += this.mercBack.y + 4;\r\n        this.addChild(e);\r\n        i++;\r\n        e = new EconomyIcon(37, 0, false, 0);\r\n        e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n        e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n        e.x += this.mercBack.x + 10;\r\n        e.y += this.mercBack.y + 4;\r\n        this.addChild(e);\r\n        i++;\r\n        e = new EconomyIcon(15, 0, false, 0);\r\n        e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n        e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n        e.x += this.mercBack.x + 10;\r\n        e.y += this.mercBack.y + 4;\r\n        this.addChild(e);\r\n        i++;\r\n        e = new EconomyIcon(54, 0, false, 0);\r\n        e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n        e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n        e.x += this.mercBack.x + 10;\r\n        e.y += this.mercBack.y + 4;\r\n        this.addChild(e);\r\n        i++;\r\n        e = new EconomyIcon(42, 0, false, 0);\r\n        e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n        e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n        e.x += this.mercBack.x + 10;\r\n        e.y += this.mercBack.y + 4;\r\n        this.addChild(e);\r\n        i++;\r\n    }\r\n\r\n    iconClicked = (e:any) => \r\n    {\r\n        (<EconomyIcon>e.target).glowToggle();\r\n        this.calculateTotalSellPrice();\r\n    }\r\n\r\n    private calculateTotalSellPrice()\r\n    {\r\n        // loop through the icons, add price from hold item for those glowing\r\n        var i;\r\n        var price = 0;\r\n        var hold = SingletonClass.ship.getHold();\r\n        for(i=0;i<this.eIcons.length;i++)\r\n        {\r\n            if (this.eIcons[i].isGlowing())\r\n            {\r\n                price += hold[i].getMarketPrice();\r\n            }\r\n        }\r\n\r\n        // display this price in our txtlabel\r\n        this.txtAmount.text = price.toString();\r\n        return price;\r\n    }\r\n\r\n    onSell = (e:any) =>\r\n    {\r\n        // sell all glowing icons\r\n        // loop over the hold backwards\r\n        var amount = this.calculateTotalSellPrice();\r\n        if (amount <= 0)\r\n            return; // do nothing, nothign selected\r\n\r\n        // and send up the request to the hud to award the coins\r\n        var pos = this.toGlobal(this.coin.position);\r\n        var myEvent = new CustomEvent(\"merchSell\",\r\n        {\r\n            'detail': { \"amount\": amount, \"x\": pos.x +this.coin.width/2, \"y\":pos.y+this.coin.height/2 }\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n        var i;\r\n        var hold = SingletonClass.ship.getHold();\r\n        // loop from end as splice will change indeces if looped front to back\r\n        for(i=this.eIcons.length-1;i>=0;i--)\r\n        {\r\n            if (this.eIcons[i].isGlowing())\r\n            {\r\n                this.removeChild(this.eIcons[i]);\r\n                this.eIcons.splice(i,1);\r\n                hold.splice(i,1);\r\n            }\r\n        }\r\n\r\n        this.loadHold(false); // flag to just reposition existing items\r\n        this.txtAmount.text = \"0\";\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popprovisioner.ts","//\r\n// popPrizeAgent class for buying reloads to the magazine and ship quests\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport SingletonClass from './singleton';\r\nimport Ship from './ship';\r\nimport popMsgBox from './popmsgbox';\r\nimport popCoinStore from './popcoinstore';\r\n\r\n\r\nexport default class popPrizeAgent extends PopUp\r\n{\r\n    private lblShot:PIXI.Text;\r\n    private lblCannon:PIXI.Text;\r\n    private lblName:PIXI.Text;\r\n    private txtShipName:PIXI.Text;\r\n    private cannon:PIXI.Sprite;\r\n    private ball:PIXI.Sprite;\r\n    private lblTitle:PIXI.Text;\r\n    private lblNextReload:PIXI.Text;\r\n    private txtReloadTime:PIXI.Text;\r\n    private coin:PIXI.Sprite;\r\n    private txtReloadPrice:PIXI.Text;\r\n    private btnBuyNow:Button;\r\n    private btnReload:Button;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // background and x button\r\n        // add popup display items\r\n        this.cannon = new PIXI.Sprite(PIXI.Texture.fromFrame(\"uiCannon.png\"));\r\n        this.cannon.x = 114 - this.cannon.width/2;\r\n        this.cannon.y = 160 - this.cannon.height/2;\r\n        this.addChild(this.cannon);\r\n        this.ball = new PIXI.Sprite(PIXI.Texture.fromFrame(\"uiBall.png\"));\r\n        this.ball.x = 113 - this.ball.width/2;\r\n        this.ball.y = 205 - this.ball.height/2;\r\n        this.addChild(this.ball);\r\n\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n\r\n        this.lblCannon = new PIXI.Text('x 6 4lb', styleb);\r\n        this.lblCannon.x = this.cannon.x + this.cannon.width + 10;\r\n        this.lblCannon.y = this.cannon.y;\r\n        this.addChild(this.lblCannon);\r\n\r\n        var boat = SingletonClass.ship;\r\n        var sMag = boat.getMagBall() + \" of \" + boat.getMagBallMax();\r\n        this.lblShot = new PIXI.Text(sMag, styleb);\r\n        this.lblShot.x = this.ball.x + this.ball.width + 10;\r\n        this.lblShot.y = this.ball.y;\r\n        this.addChild(this.lblShot);\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n\r\n        this.lblName = new PIXI.Text('Name:', style);\r\n        this.lblName.x = 155;\r\n        this.lblName.y = 66;\r\n        this.addChild(this.lblName);\r\n\r\n        this.txtShipName = new PIXI.Text('\\\"The Donna Doctrine\\\"', styleb);\r\n        this.txtShipName.x = 155;\r\n        this.txtShipName.y = 90;\r\n        this.addChild(this.txtShipName);\r\n\r\n        this.lblTitle = new PIXI.Text(\"Prize Agent\", styleb);\r\n        this.lblTitle.x = this.bg.width / 2 - this.lblTitle.width / 2;\r\n        this.lblTitle.y = 30;\r\n        this.addChild(this.lblTitle);\r\n\r\n        this.lblNextReload = new PIXI.Text(\"Next Reload in: \", style);\r\n        this.lblNextReload.x = 284;\r\n        this.lblNextReload.y = 141;\r\n        this.addChild(this.lblNextReload);\r\n\r\n        this.txtReloadTime = new PIXI.Text(\"00:00:00 \", style);\r\n        this.txtReloadTime.x = this.lblNextReload.x + this.lblNextReload.width + 5;\r\n        this.txtReloadTime.y = this.lblNextReload.y;\r\n        this.addChild(this.txtReloadTime);\r\n\r\n        this.coin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"goldCoin.png\"));\r\n        this.coin.x = 400 - this.coin.width/2;\r\n        this.coin.y = 208 - this.coin.height/2;\r\n        this.addChild(this.coin);\r\n\r\n        this.txtReloadPrice = new PIXI.Text(\"10\", style);\r\n        this.txtReloadPrice.x = this.coin.x + this.coin.width + 5;\r\n        this.txtReloadPrice.y = this.coin.y;\r\n        this.addChild(this.txtReloadPrice);\r\n\r\n        this.btnBuyNow = new Button(PIXI.Texture.fromFrame(\"btnLong.png\"),false,\"Buy Now\", 18);\r\n        this.btnBuyNow.x = 329; // - this.btnBuyNow.width/2;\r\n        this.btnBuyNow.y = 204; // - this.btnBuyNow.height/2;\r\n        this.addChild(this.btnBuyNow);\r\n        this.btnBuyNow.on('click', this.onBuyNow);\r\n\r\n        this.btnReload = new Button(PIXI.Texture.fromFrame(\"btnLong.png\"), false, \"Reload\");\r\n        this.btnReload.x = 217; //- this.btnReload.width / 2;\r\n        this.btnReload.y = 254; // - this.btnReload.height / 2;\r\n        this.addChild(this.btnReload);\r\n        this.btnReload.on('click', this.onReload);\r\n\r\n        requestAnimationFrame(this.update);\r\n    }\r\n\r\n    update = () =>\r\n    {\r\n        this.txtReloadTime.text = this.getTimeRemaining();\r\n\r\n        requestAnimationFrame(this.update);\r\n    }\r\n\r\n    onBuyNow = (e:any) =>\r\n    {\r\n        var balls = SingletonClass.ship.getMagBall();\r\n        if (balls == SingletonClass.ship.getMagBallMax())\r\n        {\r\n            var msg = new popMsgBox();\r\n            msg.initMsg(0,\"1st Mate\", \"Our magazine is full captain! No need to reload right now.\");\r\n            SingletonClass.popupManager.displayPopup(msg);\r\n            return;\r\n        }\r\n\r\n        if (SingletonClass.player.getGold() >= 10)\r\n        {\r\n            SingletonClass.player.decGold(10);\r\n            SingletonClass.ship.fillMagazine();\r\n            var sMag = SingletonClass.ship.getMagBall() + \" of \" + SingletonClass.ship.getMagBallMax();\r\n            this.lblShot.text = sMag;\r\n\r\n            var msg = new popMsgBox();\r\n            msg.initMsg(0,\"Prize Agent\", \"Yes, exaction is the best way to deal with the armory...\");\r\n            SingletonClass.popupManager.displayPopup(msg);\r\n    \r\n            console.log(\"Refilled Mag! lastReload = \" + SingletonClass.player.lastReload);\r\n        }\r\n        else\r\n        {\r\n            // display the coin store\r\n            var pop = new popCoinStore();\r\n            SingletonClass.popupManager.displayPopup(pop);\r\n        }\r\n    }\r\n\r\n    onReload = () =>\r\n    {\r\n        // var pop = new popMsgBox();\r\n        // pop.initMsg(0, \"Important Message!\", \"Really boss! I thought this was important to tell you right now\");\r\n        // this.popupManager.displayPopup(pop);\r\n        var balls = SingletonClass.ship.getMagBall();\r\n        if (balls == SingletonClass.ship.getMagBallMax())\r\n        {\r\n            var msg = new popMsgBox();\r\n            msg.initMsg(0,\"1st Mate\", \"Our magazine is full captain! No need to reload right now.\");\r\n            SingletonClass.popupManager.displayPopup(msg);\r\n            return;\r\n        }\r\n\r\n        if (this.txtReloadTime.text != \"Ready!\")\r\n        {\r\n            var msg2 = new popMsgBox();\r\n            msg2.initMsg(0,\"Prize Agent\", \"I cannot reload your magazine at the moment. Unless you're willing to bribe the armory...\");\r\n            SingletonClass.popupManager.displayPopup(msg2);\r\n            return;\r\n        }\r\n\r\n        var now = Date.now();\r\n        SingletonClass.player.lastReload = now;\r\n\r\n        SingletonClass.ship.fillMagazine();\r\n        var sMag = SingletonClass.ship.getMagBall() + \" of \" + SingletonClass.ship.getMagBallMax();\r\n        this.lblShot.text = sMag;\r\n\r\n        console.log(\"Refilled Mag! lastReload = \" + SingletonClass.player.lastReload);\r\n    }\r\n\r\n    private  getTimeRemaining() {\r\n        if (SingletonClass.player.lastReload == 0)\r\n            return \"Ready!\";\r\n\r\n        var now = Date.now();\r\n        var t = now - SingletonClass.player.lastReload;\r\n\r\n        if (t > SingletonClass.player.reloadTime)\r\n            return \"Ready!\";\r\n\r\n        // if not zero, or elapsed, we are within the time window, determine how much is left\r\n        t = SingletonClass.player.reloadTime - t; \r\n\r\n        var seconds = Math.floor( (t/1000) % 60 );\r\n        var minutes = Math.floor( (t/1000/60) % 60 );\r\n        var hours = Math.floor( (t/(1000*60*60)) % 24 );\r\n        //console.log(hours + \":\" + minutes + \":\" +  seconds);\r\n        var strTime = Ship.zeroPad(hours, 2) + \":\" + Ship.zeroPad(minutes, 2) + \":\" + Ship.zeroPad(seconds, 2);\r\n        return strTime;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popprizeagent.ts","//\r\n// popPrizeAgent class for buying reloads to the magazine and ship quests\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport SingletonClass from './singleton';\r\nimport StoreCard from './storecard';\r\nimport Button from './button';\r\nimport popMsgBox from './popmsgbox';\r\n\r\ndeclare var FB:any;\r\n\r\n\r\nexport default class popCoinStore extends PopUp\r\n{\r\n\r\n    private cards:Array<StoreCard> = [];\r\n    private btnBuy:Button;\r\n    private clickID:number = -1;\r\n    private badgeBestValue:PIXI.Sprite;\r\n    private purchaseAmount:number;\r\n    private coinInc:number; \r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // background and x button\r\n\r\n        // baked cards for now, later this will be data driven from some kind of store config file\r\n        var card = new StoreCard(\"10\", \"$0.99\", 1, 2, this.coinCallBack);\r\n        card.x = 183;\r\n        card.y = 85;\r\n        this.addChild(card);\r\n        this.cards.push(card);\r\n        card = new StoreCard(\"30\", \"$1.99\", 2, 2, this.coinCallBack);\r\n        card.x = 309;\r\n        card.y = 85;\r\n        this.addChild(card);\r\n        this.cards.push(card);\r\n        card = new StoreCard(\"70\", \"$4.99\", 3, 2, this.coinCallBack);\r\n        card.x = 434;\r\n        card.y = 85;\r\n        this.addChild(card);\r\n        this.cards.push(card);\r\n        card = new StoreCard(\"300\", \"$9.99\", 4, 2, this.coinCallBack);\r\n        card.x = 183;\r\n        card.y = 278;\r\n        this.addChild(card);\r\n        this.cards.push(card);\r\n        card = new StoreCard(\"600\", \"$19.99\", 5, 2, this.coinCallBack);\r\n        card.x = 309;\r\n        card.y = 278;\r\n        this.addChild(card);\r\n        this.cards.push(card);\r\n        card = new StoreCard(\"1,500\", \"$49.99\", 6, 2, this.coinCallBack);\r\n        card.x = 434;\r\n        card.y = 278;\r\n        this.addChild(card);\r\n        this.cards.push(card); \r\n\r\n        this.btnBuy = new Button(PIXI.Texture.fromFrame(\"btnLong.png\"), false, \"Buy\", 24);\r\n        this.btnBuy.x = 368;\r\n        this.btnBuy.y = 499;\r\n        this.addChild(this.btnBuy);\r\n        this.btnBuy.on('click',this.onBuy);\r\n\r\n        this.badgeBestValue = new PIXI.Sprite(PIXI.Texture.fromFrame(\"bestValue.png\"));\r\n        this.badgeBestValue.scale.x =this.badgeBestValue.scale.y = 0.5;\r\n        this.badgeBestValue.x = 163;\r\n        this.badgeBestValue.y = 410;\r\n        this.addChild(this.badgeBestValue);\r\n    }\r\n\r\n    onBuy = (e:any) =>\r\n    {\r\n        // start a purchase for the id number contained in the card\r\n        var id = this.clickID;\r\n        if (id == -1)\r\n        {\r\n            var msg = new popMsgBox();\r\n            msg.initMsg(0,\"Coin Store\", \"Click a coin package you'd like to buy then click the Buy button.\");\r\n            SingletonClass.popupManager.displayPopup(msg);\r\n            return;\r\n        }\r\n\r\n        this.coinInc = 1;\r\n        if (id == 1)\r\n            this.purchaseAmount = 10; // 10 gold\r\n        if (id == 2)\r\n            this.purchaseAmount = 30; // 30 gold\r\n        if (id == 3) {\r\n            this.purchaseAmount = 7; // 70 gold in increments of 10\r\n            this.coinInc = 10;\r\n        }\r\n        if (id == 4) {\r\n            this.purchaseAmount = 30; // 300 gold in increments of 10\r\n            this.coinInc = 10;\r\n        }\r\n        if (id == 5) { // 600 gold in increments of 100\r\n            this.purchaseAmount = 6;\r\n            this.coinInc = 100;\r\n        }\r\n        if (id == 6) { // 1500 gold in increments of 100\r\n            this.purchaseAmount = 15;\r\n            this.coinInc = 100;\r\n        }\r\n\r\n        FB.ui(\r\n            {\r\n              method: 'pay',\r\n              action: 'purchaseiap',\r\n              product_id: 'payments_lite_01',\r\n              developer_payload: 'this_is_a_test_payload'\r\n            },\r\n            this.fbIAPResponse // Callback function\r\n        );\r\n    }\r\n\r\n    fbIAPResponse = (response:any) => {\r\n        console.log(\"FB.ui pay response: \");\r\n        console.log(response);\r\n\r\n        // and send up the request to the hud to award the coins\r\n        var pos = this.toGlobal(this.btnBuy.position);\r\n        var myEvent = new CustomEvent(\"buyGold\",\r\n        {\r\n            'detail': { \"amount\": this.purchaseAmount, \"inc\": this.coinInc, \"x\": pos.x +this.btnBuy.width/2, \"y\":pos.y+this.btnBuy.height/2 }\r\n        });\r\n        window.dispatchEvent(myEvent);\r\n    }\r\n\r\n    coinCallBack = (id:number) =>\r\n    {\r\n        // loop through cards and unhihlight cards not of this id\r\n        for (var i=0; i<this.cards.length; i++)\r\n        {\r\n            if (this.cards[i].getID() != id)\r\n                this.cards[i].removeGlow();\r\n        }\r\n\r\n        this.clickID = id;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popcoinstore.ts","//\r\n// StoreCard - class to display a store item\r\n//\r\n\r\nimport * as PIXI from 'pixi.js';\r\nimport * as filters from 'pixi-filters';\r\n\r\nexport default class StoreCard extends PIXI.Container\r\n{\r\n    private cardBack:PIXI.Sprite;\r\n    private txtName:PIXI.Text;\r\n    private txtPrice:PIXI.Text;\r\n    private itemID:number;\r\n    private coinIcon:PIXI.Sprite;\r\n    private itemImage:PIXI.Sprite;\r\n    private glow:filters.GlowFilter;\r\n    private glowing:boolean = false;\r\n    private callBack:Function = null;\r\n\r\n    constructor(name:string, price:string, id:number, coin:number, cb:Function=null,imageName:string=\"\")\r\n    {\r\n        super();\r\n        this.cardBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"cardBack.png\"));\r\n        this.addChild(this.cardBack);\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'white'\r\n        });\r\n        this.txtName = new PIXI.Text(name, style);\r\n        this.txtName.x = 48;\r\n        this.txtName.y = 1;\r\n        this.addChild(this.txtName);\r\n\r\n        this.txtPrice = new PIXI.Text(price, style);\r\n        this.txtPrice.x = 39;\r\n        this.txtPrice.y = 151;\r\n        this.addChild(this.txtPrice);\r\n\r\n        this.itemID = id;\r\n        \r\n        // coin 1 = silver, coin 2 = gold, coin 0 = display no coin\r\n        if (coin == 1)\r\n            this.coinIcon = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        else if (coin == 2)\r\n            this.coinIcon = new PIXI.Sprite(PIXI.Texture.fromFrame(\"goldCoin.png\"));\r\n\r\n        if (coin != 0)\r\n        {\r\n            this.coinIcon.x = 34 - this.coinIcon.width / 2;\r\n            this.coinIcon.y = 17 - this.coinIcon.height / 2;\r\n            this.addChild(this.coinIcon);\r\n        }\r\n\r\n        if (imageName != \"\")\r\n        {\r\n            // add an image with indicated name to the frame\r\n        }\r\n\r\n        this.interactive = true;\r\n        this.on('mousedown', this.onMouseDown);\r\n\r\n        this.glow = new filters.GlowFilter(10, 1, 1, 0xFFFFFF);\r\n\r\n        this.callBack = cb;\r\n    }\r\n\r\n    public getID()\r\n    {\r\n        return this.itemID;\r\n    }\r\n\r\n    onMouseDown = () => \r\n    {\r\n        // apply glow filter\r\n        this.filters = [this.glow];\r\n        this.glowing = true;\r\n        if (this.callBack != null)\r\n            this.callBack(this.itemID); // call the call back with our item id\r\n    }\r\n\r\n    public isGlowing()\r\n    {\r\n        return this.glowing;\r\n    }\r\n\r\n    public removeGlow()\r\n    {\r\n        this.filters = [];\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/storecard.ts","//\r\n// popProvisioner class for buying selling provisions in town. This is where the player will\r\n//                  sell the stuff in their boat hold and buy ships provisions for thier boat\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport EconomyIcon from './economyicon';\r\nimport SingletonClass from './singleton';\r\nimport popMsgBox from './popmsgbox';\r\n\r\n\r\nexport default class popWarehouse extends PopUp\r\n{\r\n    private mercBack:PIXI.Sprite;\r\n    private holdBack:PIXI.Sprite;\r\n    private sellCoin:PIXI.Sprite;\r\n    private overCoin:PIXI.Sprite;\r\n    private goldCoin:PIXI.Sprite;\r\n    private sellBtn:Button;\r\n    private txtAmount:PIXI.Text;\r\n    private txtMouseOver:PIXI.Text;\r\n    private txtOverAmount:PIXI.Text;\r\n    private txtResupplyTimer:PIXI.Text;\r\n    private txtResupplyAmount:PIXI.Text;\r\n    private holdIcons:Array<EconomyIcon> = [];\r\n    private wareIcons:Array<EconomyIcon> = [];\r\n    private buyNow:Button;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // add backdrop and x buttton\r\n\r\n        this.mercBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"HoldBack.png\"));\r\n        this.mercBack.x = 336 - this.mercBack.width/2;\r\n        this.mercBack.y = 173 - this.mercBack.height/2;\r\n        this.addChild(this.mercBack);\r\n\r\n        this.holdBack = new PIXI.Sprite(PIXI.Texture.fromFrame(\"HoldBack.png\"));\r\n        this.holdBack.x = 336 - this.holdBack.width/2;\r\n        this.holdBack.y = 397 - this.holdBack.height/2;\r\n        this.addChild(this.holdBack);\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n        \r\n       \r\n        var lbl = new PIXI.Text('Warehouse:', style);\r\n        lbl.x = this.mercBack.x;\r\n        lbl.y = this.mercBack.y - lbl.height - 2;\r\n        this.addChild(lbl);\r\n\r\n        lbl = new PIXI.Text('Hold:', style);\r\n        lbl.x = this.holdBack.x;\r\n        lbl.y = this.holdBack.y - lbl.height - 2;\r\n        this.addChild(lbl);\r\n\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n\r\n        var townName = SingletonClass.currentPort;\r\n        lbl = new PIXI.Text(townName + ' Warehouse', styleb);\r\n        lbl.x = this.mercBack.x + this.mercBack.width/2 - lbl.width / 2;\r\n        lbl.y = 20;\r\n        this.addChild(lbl);\r\n\r\n        this.sellBtn = new Button(PIXI.Texture.fromFrame(\"sellBtn.png\"));\r\n        this.sellBtn.x = 531;\r\n        this.sellBtn.y = 285;\r\n        this.sellBtn.scale.x = this.sellBtn.scale.y = 0.67;\r\n        this.sellBtn.on('click',this.onSell);\r\n        this.addChild(this.sellBtn);\r\n\r\n        this.sellCoin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        this.sellCoin.x = 422 - this.sellCoin.width/2;\r\n        this.sellCoin.y = 285 - this.sellCoin.height/2;\r\n        this.addChild(this.sellCoin);\r\n\r\n        var stylec = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'white'\r\n        });\r\n        this.txtAmount = new PIXI.Text('0', stylec);\r\n        this.txtAmount.x = this.sellCoin.x + this.sellCoin.width + 5;\r\n        this.txtAmount.y = this.sellCoin.y + this.sellCoin.height/2 - this.txtAmount.height/2;\r\n        this.addChild(this.txtAmount);\r\n\r\n        var styled = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 18,\r\n            fill: 'black'\r\n        });\r\n\r\n        lbl = new PIXI.Text(\"Resupply In:\", styled);\r\n        lbl.x = 251;\r\n        lbl.y = 56;\r\n        this.addChild(lbl);\r\n        this.txtResupplyTimer = new PIXI.Text(\"00:00:00\", styled);\r\n        this.txtResupplyTimer.x = lbl.x + lbl.width + 3;\r\n        this.txtResupplyTimer.y = 56;\r\n        this.addChild(this.txtResupplyTimer);\r\n\r\n        this.txtMouseOver = new PIXI.Text(\"Mouse Over Description\", styled);\r\n        this.txtMouseOver.x = 209;\r\n        this.txtMouseOver.y = 495;\r\n        this.addChild(this.txtMouseOver);\r\n\r\n        this.overCoin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        this.overCoin.x = 422 - this.overCoin.width/2;\r\n        this.overCoin.y = 508 - this.overCoin.height/2;\r\n        this.addChild(this.overCoin);\r\n\r\n        this.txtOverAmount = new PIXI.Text('0', stylec);\r\n        this.txtOverAmount.x = this.overCoin.x + this.overCoin.width + 5;\r\n        this.txtOverAmount.y = this.overCoin.y + this.overCoin.height/2 - this.txtOverAmount.height/2;\r\n        this.addChild(this.txtOverAmount);\r\n\r\n        this.goldCoin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"goldCoin.png\"));\r\n        this.goldCoin.x = 539 - this.goldCoin.width/2;\r\n        this.goldCoin.y = 61 - this.goldCoin.height/2;\r\n        this.addChild(this.goldCoin);\r\n\r\n        this.txtResupplyAmount = new PIXI.Text('10', style);\r\n        this.txtResupplyAmount.x = this.goldCoin.x + this.goldCoin.width + 5;\r\n        this.txtResupplyAmount.y = this.goldCoin.y + this.goldCoin.height/2 - this.txtResupplyAmount.height/2;\r\n        this.addChild(this.txtResupplyAmount);\r\n\r\n        this.buyNow = new Button(PIXI.Texture.fromFrame(\"btnLong.png\"), false, \"Resupply\", 18);\r\n        this.buyNow.width = 55;\r\n        this.buyNow.height = 28;\r\n        this.buyNow.x = 494;\r\n        this.buyNow.y = 64;\r\n        this.addChild(this.buyNow);\r\n\r\n        this.loadHold();\r\n        this.displayWares();\r\n    }\r\n\r\n    private reloadHold()\r\n    {\r\n        // remove all icons\r\n        var i,e;\r\n        for (i=this.holdIcons.length-1; i>=0; i--)\r\n        {\r\n            e = this.holdIcons.pop();\r\n            this.removeChild(e);\r\n        }\r\n\r\n        this.loadHold();\r\n    }\r\n\r\n    private loadHold(createIcons:boolean=true)\r\n    {\r\n        var hold = SingletonClass.ship.getHold();\r\n        var e;\r\n        for (var i=0; i<hold.length; i++)\r\n        {\r\n            if (createIcons)\r\n                e = new EconomyIcon(hold[i].type, i, false,hold[i].rarity);\r\n            else\r\n                e = this.holdIcons[i];\r\n\r\n            // place in our 10x4 grid\r\n            e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n            e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n            e.x += this.holdBack.x + 10;\r\n            e.y += this.holdBack.y + 4;\r\n\r\n            if (createIcons)\r\n            {\r\n                e.interactive = true;\r\n                e.on('click',this.iconClicked);\r\n                e.on('mouseover',this.wareOver);\r\n                this.holdIcons.push(e);\r\n                this.addChild(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    private displayWares()\r\n    {\r\n        // warehouse sells lowest demand items generated on the singleton\r\n        var data = SingletonClass.getPortWarehouseData(SingletonClass.currentPort);\r\n        var i,e;\r\n        for (i=0;i<data.items.length;i++)\r\n        {\r\n            e = new EconomyIcon(data.items[i], 0, false, 0);\r\n            e.x = ((i % 10) * 42) + i%10*3 + 21; // icons are center anchor\r\n            e.y = (Math.floor(i/10) * 42) + Math.floor(i/10)*3 + 21; // adjust for center anchor\r\n            e.x += this.mercBack.x + 10;\r\n            e.y += this.mercBack.y + 4;\r\n            this.addChild(e);\r\n            e.interactive = true;\r\n            e.on('click',this.wareClicked);\r\n            e.on('mouseover',this.wareOver);\r\n            this.wareIcons.push(e);\r\n        }\r\n        \r\n    }\r\n\r\n    private redisplayWares()\r\n    {\r\n        var i;\r\n        for (i=0;i<this.wareIcons.length;i++)\r\n        {\r\n\r\n        }   \r\n    }\r\n\r\n    wareOver = (e:any) => \r\n    {\r\n        var eIcon = <EconomyIcon>e.target;\r\n        var name = eIcon.getName();\r\n        var itemID = eIcon.getType();\r\n        var price = SingletonClass.getMarketItemPrice(itemID);\r\n        this.txtMouseOver.text = name;\r\n        this.txtOverAmount.text = price.toString();\r\n    }\r\n\r\n    wareClicked = (e:any) =>\r\n    {\r\n        var eIcon = <EconomyIcon>e.target;\r\n        var itemID = eIcon.getType();\r\n        var price = SingletonClass.getMarketItemPrice(itemID);\r\n        if (SingletonClass.player.getSilver() >= price)\r\n        {\r\n            // add the icon to their hold\r\n            if (!SingletonClass.ship.addToHold(itemID,0))\r\n            {\r\n                // no room! abort\r\n                var msg = new popMsgBox();\r\n                msg.initMsg(0,\"1st Mate\", \"Hold is full captain! We'll have to sell items to make room.\");\r\n                SingletonClass.popupManager.displayPopup(msg);\r\n            }\r\n            else\r\n            {\r\n                // charge the user\r\n                SingletonClass.player.decSilver(price);\r\n                // remove the icon from the warehouse\r\n                var i;\r\n                for (i=this.wareIcons.length-1; i>=0; i--)\r\n                {\r\n                    if (this.wareIcons[i] == eIcon)\r\n                    {\r\n                        this.wareIcons.splice(i,1);\r\n                        var data = SingletonClass.getPortWarehouseData(SingletonClass.currentPort);\r\n                        data.items.splice(i,1); // remove from the warehouse data as well\r\n                        break;\r\n                    }\r\n                }\r\n                eIcon.interactive = false;\r\n                eIcon.parent.removeChild(eIcon);\r\n                this.reloadHold();\r\n            }\r\n        } else { // not enough money!\r\n            var msg = new popMsgBox();\r\n            msg.initMsg(0,\"1st Mate\", \"We dont have enough silver for that Cap'n! Price: \" + price);\r\n            SingletonClass.popupManager.displayPopup(msg);\r\n        }\r\n    }\r\n\r\n    iconClicked = (e:any) => \r\n    {\r\n        (<EconomyIcon>e.target).glowToggle();\r\n        this.calculateTotalSellPrice();\r\n    }\r\n\r\n    private calculateTotalSellPrice()\r\n    {\r\n        // loop through the icons, add price from hold item for those glowing\r\n        var i;\r\n        var price = 0;\r\n        var hold = SingletonClass.ship.getHold();\r\n        for(i=0;i<this.holdIcons.length;i++)\r\n        {\r\n            if (this.holdIcons[i].isGlowing())\r\n            {\r\n                price += hold[i].getMarketPrice();\r\n            }\r\n        }\r\n\r\n        // display this price in our txtlabel\r\n        this.txtAmount.text = price.toString();\r\n        return price;\r\n    }\r\n\r\n    onSell = (e:any) =>\r\n    {\r\n        // sell all glowing icons\r\n        // loop over the hold backwards\r\n        var amount = this.calculateTotalSellPrice();\r\n        if (amount <= 0)\r\n            return; // do nothing, nothign selected\r\n\r\n        // and send up the request to the hud to award the coins\r\n        var pos = this.toGlobal(this.sellCoin.position);\r\n        var myEvent = new CustomEvent(\"merchSell\",\r\n        {\r\n            'detail': { \"amount\": amount, \"x\": pos.x +this.sellCoin.width/2, \"y\":pos.y+this.sellCoin.height/2 }\r\n        });\r\n\r\n        window.dispatchEvent(myEvent);\r\n        var i;\r\n        var hold = SingletonClass.ship.getHold();\r\n        // loop from end as splice will change indeces if looped front to back\r\n        for(i=this.holdIcons.length-1;i>=0;i--)\r\n        {\r\n            if (this.holdIcons[i].isGlowing())\r\n            {\r\n                this.removeChild(this.holdIcons[i]);\r\n                this.holdIcons.splice(i,1);\r\n                hold.splice(i,1);\r\n            }\r\n        }\r\n\r\n        this.loadHold(false); // flag to just reposition existing items\r\n        this.txtAmount.text = \"0\";\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popwarehouse.ts","//\r\n// popMarket - popup to display MarketItem market values for economy icons at the current port\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport PopUp from './popup';\r\nimport Button from './button';\r\nimport MarketItem from './marketitem';\r\nimport theSea from './theSea';\r\nimport SingletonClass from './singleton';\r\nimport EconomyItem from './economyitem';\r\n\r\nexport default class popMarket extends PopUp\r\n{\r\n    private txtHeader:PIXI.Text;\r\n    private txtMouseOver:PIXI.Text;\r\n    private txtPrice:PIXI.Text;\r\n    private coin:PIXI.Sprite;\r\n    private marketItems:Array<MarketItem> = [];\r\n    private marketData:any;\r\n    private pageIndex:number=0; // index of the market item for this page of results\r\n    private pageUp:Button;\r\n    private pageDown:Button;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public init()\r\n    {\r\n        super.init(); // background and X button with handler\r\n        var data = this.getMarketData();\r\n        var i,m,rate,up;\r\n        for (i=0; i<EconomyItem.maxItems; i++)\r\n        {\r\n            rate = data[i].rate;\r\n            up = data[i].up;\r\n            m = new MarketItem(i,rate,up);\r\n            this.addChild(m);\r\n            if (i<8) // position and add the first page\r\n            {\r\n                m.x = 113;\r\n                m.y = 94 + (i * (m.height + 5));\r\n                m.visible = true;\r\n            } else {\r\n                m.visible = false;\r\n            }\r\n\r\n            //console.log(\"item: \" + i + \"rate: \" + rate + \" up: \" + up);\r\n            m.interactive = true;\r\n            m.on('mouseover',this.itemOver);\r\n            \r\n            this.marketItems.push(m);\r\n        }\r\n\r\n        var styleb = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 32,\r\n            fill: 'black'\r\n        });\r\n        var town = SingletonClass.currentPort;\r\n        var title = town + \" Market\";\r\n        this.txtHeader = new PIXI.Text(title, styleb);\r\n        this.txtHeader.x = this.bg.width / 2 - this.txtHeader.width / 2;\r\n        this.txtHeader.y = 40;\r\n        this.addChild(this.txtHeader);\r\n\r\n        var style = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'black'\r\n        });\r\n\r\n        this.txtMouseOver = new PIXI.Text(\"Mouse over icons to see price information.\", style);\r\n        this.txtMouseOver.x = 268;\r\n        this.txtMouseOver.y = 480;\r\n        this.addChild(this.txtMouseOver);\r\n\r\n        this.coin = new PIXI.Sprite(PIXI.Texture.fromFrame(\"silverCoin.png\"));\r\n        this.coin.x = 127 - this.coin.width/2;\r\n        this.coin.y = 499 - this.coin.height/2;\r\n        this.addChild(this.coin);\r\n\r\n        var stylec = new PIXI.TextStyle({\r\n            fontFamily: 'IM Fell English SC',\r\n            fontSize: 22,\r\n            fill: 'white'\r\n        });\r\n        this.txtPrice = new PIXI.Text(\"0\", stylec);\r\n        this.txtPrice.x = this.coin.x + this.coin.width + 20;\r\n        this.txtPrice.y = 480;\r\n        this.addChild(this.txtPrice);\r\n\r\n        this.pageDown = new Button(PIXI.Texture.fromFrame(\"uiArrow.png\"));\r\n        this.pageDown.x = 696;\r\n        this.pageDown.y = 463;\r\n        this.addChild(this.pageDown);\r\n        this.pageDown.on('click',this.onPageDown);\r\n\r\n        this.pageUp = new Button(PIXI.Texture.fromFrame(\"uiArrow.png\"));\r\n        this.pageUp.rotation = Math.PI; // 180 degrees\r\n        this.pageUp.x = 696;\r\n        this.pageUp.y = 103;\r\n        this.addChild(this.pageUp);\r\n        this.pageUp.on('click', this.onPageUp);\r\n    }\r\n\r\n    onPageDown = () =>\r\n    {\r\n        this.pageIndex += 8;\r\n        if (this.pageIndex > 55)\r\n            this.pageIndex -= 8;\r\n        this.displayPage();\r\n    }\r\n\r\n    onPageUp = () =>\r\n    {\r\n        this.pageIndex -= 8;\r\n        if (this.pageIndex < 0)\r\n            this.pageIndex = 0;\r\n        this.displayPage();\r\n    }\r\n\r\n    private displayPage()\r\n    {\r\n        // display 8 market items from pageIndex member, hide all others\r\n        var i,k,m;\r\n        for (i=0;i<this.marketItems.length;i++)\r\n        {\r\n            m = this.marketItems[i];\r\n            if (i >= this.pageIndex && i <= this.pageIndex + 7)\r\n            {  \r\n                k = i - this.pageIndex;\r\n                console.log(\"i:\" + i + \" k:\"+ k + \" index: \" + this.pageIndex);\r\n                m.x = 113;\r\n                m.y = 94 + (k * (m.height + 5));\r\n                m.visible = true;\r\n            } else {\r\n                m.visible = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getMarketData()\r\n    {\r\n        // check on the singleton, if not there generate it\r\n        var town = SingletonClass.currentPort;\r\n        var data = SingletonClass.getPortMarketData(town);\r\n\r\n        return data;\r\n    }\r\n\r\n    itemOver = (e:any) =>\r\n    {\r\n        var item = <MarketItem>e.target;\r\n        //console.log(e);\r\n        if (item)\r\n        {\r\n            this.txtMouseOver.text = item.getName();\r\n            this.txtPrice.text = item.getPrice().toString();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popmarket.ts","//\r\n// MarketItem - container class for each market item displayed within the market popup\r\n//\r\nimport * as PIXI from 'pixi.js';\r\nimport EconomyIcon from './economyicon';\r\n\r\nexport default class MarketItem extends PIXI.Container\r\n{\r\n    private bullbear:PIXI.Sprite;\r\n    private item:EconomyIcon;\r\n    private exact:PIXI.Container;\r\n    private rate:number;\r\n\r\n    constructor(itemid:number, marketRate:number, up:boolean)\r\n    {\r\n        super();\r\n\r\n        if (up)\r\n            this.bullbear = new PIXI.Sprite(PIXI.Texture.fromFrame(\"bull.png\"));\r\n        else\r\n            this.bullbear = new PIXI.Sprite(PIXI.Texture.fromFrame(\"bear.png\"));\r\n\r\n        this.item = new EconomyIcon(itemid, 0,false,0);\r\n        this.item.x = 21;\r\n        this.item.y = 21;\r\n        this.addChild(this.item);\r\n\r\n        this.bullbear.x = -this.bullbear.width - 5;\r\n        this.addChild(this.bullbear);\r\n\r\n        this.addPips(marketRate);\r\n        this.rate = marketRate;\r\n    }\r\n\r\n    private addPips(rate:number)\r\n    {\r\n        // 10 pips.. each is 10% value...\r\n        var fullPips = Math.floor(rate / 10); \r\n        var empties = 10 - fullPips;\r\n        var exact = rate % 10 * 10 / 100;\r\n        var xSpot = this.item.x + this.item.width/2 +  5; // econicons are center anchor\r\n        // add full pips\r\n        var pip, i;\r\n        for (i=0; i<fullPips; i++) {\r\n            pip = new PIXI.Graphics();\r\n            pip.beginFill(0x705337);\r\n            pip.drawCircle(21,21,21);\r\n            pip.endFill();\r\n            pip.x = xSpot;\r\n            pip.y = 0;\r\n            xSpot += 47;\r\n            this.addChild(pip);\r\n        }\r\n        // add the exact pip\r\n        if (exact != 0) {\r\n            this.exact = new PIXI.Container();\r\n            pip = new PIXI.Graphics();\r\n            pip.beginFill(0x705337);\r\n            pip.drawCircle(21,21,21);\r\n            pip.endFill();\r\n            pip.x = 0;\r\n            pip.y = 0;\r\n            this.exact.addChild(pip);\r\n            var mask = new PIXI.Graphics();\r\n            mask.beginFill(0xFFFFFF);\r\n            mask.drawRect(0,0,42,42);\r\n            mask.x = -(42 * (1 - exact));\r\n            this.exact.addChild(mask);\r\n            this.exact.mask = mask;\r\n            this.exact.x = xSpot;\r\n            this.addChild(this.exact);\r\n        }\r\n        // add empty pips\r\n        for (i=0; i<empties; i++) {\r\n            pip = new PIXI.Graphics();\r\n            pip.lineStyle(1, 0x705337);  //(thickness, color)\r\n            pip.drawCircle(21,21,21);\r\n            pip.endFill();\r\n            pip.x = xSpot;\r\n            xSpot += 47;\r\n            this.addChild(pip);\r\n        }\r\n    }\r\n\r\n    public getName()\r\n    {\r\n        return this.item.getName();\r\n    }\r\n\r\n    public getPrice()\r\n    {\r\n        var p =this.item.getPrice();\r\n        return Math.floor(p + Math.ceil(p *  this.rate / 100));\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/marketitem.ts","//\r\n// PopupManager class to manage queued popup windows\r\n//\r\n\r\nimport PopUp from './popup';\r\nimport popMsgBox from './popmsgbox';\r\n\r\nexport default class PopupManager\r\n{\r\n    private popupStack:Array<PopUp>=[];\r\n    private container:PIXI.Container;\r\n\r\n    public setContainer(container:PIXI.Container)\r\n    {\r\n        this.container = container;\r\n    }\r\n\r\n    public displayPopup(newpop:PopUp)\r\n    {\r\n        newpop.init();\r\n        if (this.popupStack.length != 0)\r\n        {\r\n            var top = this.popupStack[this.popupStack.length-1];\r\n            top.backgrounded();\r\n        }\r\n        this.popupStack.push(newpop);\r\n        newpop.setManagerClose(this.popIt);\r\n        var p = new PIXI.Point();\r\n        if (newpop instanceof popMsgBox)\r\n        {\r\n            // position in lower left\r\n            p.x = 0;\r\n            p.y = window.innerHeight - newpop.height;\r\n        } else {\r\n            p.x = window.innerWidth / 2 - newpop.width / 2;\r\n            p.y = window.innerHeight / 2 - newpop.height / 2;\r\n        }\r\n        var loc = this.container.toLocal(p);\r\n        newpop.x = loc.x;\r\n        newpop.y = loc.y;\r\n        if (newpop.y < 0)\r\n            newpop.y = 0;\r\n        this.container.addChild(newpop);\r\n    }\r\n\r\n    public popIt = () => { // from callback on popup or called directly by external\r\n        var pop = this.popupStack.pop();\r\n        this.container.removeChild(pop);\r\n        if (this.popupStack.length != 0)\r\n        {\r\n            var top = this.popupStack[this.popupStack.length-1];\r\n            top.top();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./src/popupmanager.ts"],"sourceRoot":""}